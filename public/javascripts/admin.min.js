(function(h,g){function j(a){return c.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}function l(a){if(!db[a]){var d=X.body,b=c("<"+a+">").appendTo(d),e=b.css("display");b.remove();if(e==="none"||e===""){Xa||(Xa=X.createElement("iframe"),Xa.frameBorder=Xa.width=Xa.height=0);d.appendChild(Xa);if(!Ha||!Xa.createElement){Ha=(Xa.contentWindow||Xa.contentDocument).document;Ha.write((X.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");Ha.close()}b=Ha.createElement(a);Ha.body.appendChild(b);
e=c.css(b,"display");d.removeChild(Xa)}db[a]=e}return db[a]}function q(a,d){var b={};c.each(Pa.concat.apply([],Pa.slice(0,d)),function(){b[this]=a});return b}function s(){qb=g}function x(){setTimeout(s,0);return qb=c.now()}function G(){try{return new h.XMLHttpRequest}catch(a){}}function B(a,d,b,e){if(c.isArray(d))c.each(d,function(i,k){b||eb.test(a)?e(a,k):B(a+"["+(typeof k=="object"||c.isArray(k)?i:"")+"]",k,b,e)});else if(!b&&d!=null&&typeof d=="object")for(var f in d)B(a+"["+f+"]",d[f],b,e);else e(a,
d)}function z(a,d,b,e,f,i){f=f||d.dataTypes[0];i=i||{};i[f]=true;f=a[f];for(var k=0,n=f?f.length:0,p=a===cb,t;k<n&&(p||!t);k++){t=f[k](d,b,e);typeof t=="string"&&(!p||i[t]?(t=g):(d.dataTypes.unshift(t),t=z(a,d,b,e,t,i)))}(p||!t)&&!i["*"]&&(t=z(a,d,b,e,"*",i));return t}function N(a){return function(d,b){typeof d!="string"&&(b=d,d="*");if(c.isFunction(b))for(var e=d.toLowerCase().split(cc),f=0,i=e.length,k,n;f<i;f++){k=e[f];(n=/^\+/.test(k))&&(k=k.substr(1)||"*");k=a[k]=a[k]||[];k[n?"unshift":"push"](b)}}}
function P(a,d,b){var e=d==="width"?a.offsetWidth:a.offsetHeight,f=d==="width"?ma:Qb;if(e>0){b!=="border"&&c.each(f,function(){b||(e-=parseFloat(c.css(a,"padding"+this))||0);b==="margin"?(e+=parseFloat(c.css(a,b+this))||0):(e-=parseFloat(c.css(a,"border"+this+"Width"))||0)});return e+"px"}e=fb(a,d,d);if(e<0||e==null)e=a.style[d]||0;e=parseFloat(e)||0;b&&c.each(f,function(){e+=parseFloat(c.css(a,"padding"+this))||0;b!=="padding"&&(e+=parseFloat(c.css(a,"border"+this+"Width"))||0);b==="margin"&&(e+=
parseFloat(c.css(a,b+this))||0)});return e+"px"}function la(a,d){d.src?c.ajax({url:d.src,async:false,dataType:"script"}):c.globalEval((d.text||d.textContent||d.innerHTML||"").replace(dc,"/*$0*/"));d.parentNode&&d.parentNode.removeChild(d)}function pa(a){c.nodeName(a,"input")?na(a):"getElementsByTagName"in a&&c.grep(a.getElementsByTagName("input"),na)}function na(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function m(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):
"querySelectorAll"in a?a.querySelectorAll("*"):[]}function r(a,d){var b;if(d.nodeType===1){d.clearAttributes&&d.clearAttributes();d.mergeAttributes&&d.mergeAttributes(a);b=d.nodeName.toLowerCase();if(b==="object")d.outerHTML=a.outerHTML;else if(b!=="input"||a.type!=="checkbox"&&a.type!=="radio")if(b==="option")d.selected=a.defaultSelected;else{if(b==="input"||b==="textarea")d.defaultValue=a.defaultValue}else{a.checked&&(d.defaultChecked=d.checked=a.checked);d.value!==a.value&&(d.value=a.value)}d.removeAttribute(c.expando)}}
function y(a,d){if(d.nodeType===1&&c.hasData(a)){var b=c.expando,e=c.data(a),f=c.data(d,e);if(e=e[b]){var i=e.events;f=f[b]=c.extend({},e);if(i){delete f.handle;f.events={};for(var k in i){b=0;for(e=i[k].length;b<e;b++)c.event.add(d,k+(i[k][b].namespace?".":"")+i[k][b].namespace,i[k][b],i[k][b].data)}}}}}function E(a,d,b){d=d||0;if(c.isFunction(d))return c.grep(a,function(f,i){return!!d.call(f,i,f)===b});if(d.nodeType)return c.grep(a,function(f){return f===d===b});if(typeof d=="string"){var e=c.grep(a,
function(f){return f.nodeType===1});if(Ka.test(d))return c.filter(d,e,!b);d=c.filter(d,e)}return c.grep(a,function(f){return c.inArray(f,d)>=0===b})}function ca(a,d){return(a&&a!=="*"?a+".":"")+d.replace(La,"`").replace(gb,"&")}function oa(a){var d,b,e,f,i,k,n,p,t,w,C,R=[];f=[];i=c._data(this,"events");if(!(a.liveFired===this||!i||!i.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(C=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)"));a.liveFired=this;
var ba=i.live.slice(0);for(n=0;n<ba.length;n++){i=ba[n];i.origType.replace(sa,"")===a.type?f.push(i.selector):ba.splice(n--,1)}f=c(a.target).closest(f,a.currentTarget);p=0;for(t=f.length;p<t;p++){w=f[p];for(n=0;n<ba.length;n++){i=ba[n];if(w.selector===i.selector&&(!C||C.test(i.namespace))&&!w.elem.disabled){k=w.elem;e=null;if(i.preType==="mouseenter"||i.preType==="mouseleave"){a.type=i.preType;(e=c(a.relatedTarget).closest(i.selector)[0])&&c.contains(k,e)&&(e=k)}(!e||e!==k)&&R.push({elem:k,handleObj:i,
level:w.level})}}}p=0;for(t=R.length;p<t;p++){f=R[p];if(b&&f.level>b)break;a.currentTarget=f.elem;a.data=f.handleObj.data;a.handleObj=f.handleObj;C=f.handleObj.origHandler.apply(f.elem,arguments);if(C===false||a.isPropagationStopped()){b=f.level;C===false&&(d=false);if(a.isImmediatePropagationStopped())break}}return d}}function T(a,d,b){var e=c.extend({},b[0]);e.type=a;e.originalEvent={};e.liveFired=g;c.event.handle.call(d,e);e.isDefaultPrevented()&&b[0].preventDefault()}function fa(){return true}
function ga(){return false}function xa(a,d,b){var e=d+"defer",f=d+"queue",i=d+"mark",k=c.data(a,e,g,true);k&&(b==="queue"||!c.data(a,f,g,true))&&(b==="mark"||!c.data(a,i,g,true))&&setTimeout(function(){!c.data(a,f,g,true)&&!c.data(a,i,g,true)&&(c.removeData(a,e,true),k.resolve())},0)}function Oa(a){for(var d in a)if(d!=="toJSON")return false;return true}function Ra(a,d,b){if(b===g&&a.nodeType===1){b="data-"+d.replace(S,"$1-$2").toLowerCase();b=a.getAttribute(b);if(typeof b=="string"){try{b=b==="true"?
true:b==="false"?false:b==="null"?null:c.isNaN(b)?M.test(b)?c.parseJSON(b):b:parseFloat(b)}catch(e){}c.data(a,d,b)}else b=g}return b}var X=h.document,Q=h.navigator,V=h.location,c=function(){function a(){if(!d.isReady){try{X.documentElement.doScroll("left")}catch(v){setTimeout(a,1);return}d.ready()}}var d=function(v,K){return new d.fn.init(v,K,f)},b=h.jQuery,e=h.$,f,i=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=/\S/,n=/^\s+/,p=/\s+$/,t=/\d/,w=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,C=/^[\],:{}\s]*$/,R=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
ba=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ka=/(?:^|:|,)(?:\s*\[)+/g,Ia=/(webkit)[ \/]([\w.]+)/,za=/(opera)(?:.*version)?[ \/]([\w.]+)/,Ba=/(msie) ([\w.]+)/,Ca=/(mozilla)(?:.*? rv:([\w.]+))?/,o=/-([a-z])/ig,u=function(v,K){return K.toUpperCase()},F=Q.userAgent,I,D,J=Object.prototype.toString,U=Object.prototype.hasOwnProperty,Z=Array.prototype.push,ra=Array.prototype.slice,Ma=String.prototype.trim,Ja=Array.prototype.indexOf,Sa={};d.fn=d.prototype={constructor:d,init:function(v,
K,da){var Y,qa;if(!v)return this;if(v.nodeType){this.context=this[0]=v;this.length=1;return this}if(v==="body"&&!K&&X.body){this.context=X;this[0]=X.body;this.selector=v;this.length=1;return this}if(typeof v=="string"){v.charAt(0)!=="<"||v.charAt(v.length-1)!==">"||v.length<3?(Y=i.exec(v)):(Y=[null,v,null]);if(Y&&(Y[1]||!K)){if(Y[1]){qa=(K=K instanceof d?K[0]:K)?K.ownerDocument||K:X;(da=w.exec(v))?d.isPlainObject(K)?(v=[X.createElement(da[1])],d.fn.attr.call(v,K,true)):(v=[qa.createElement(da[1])]):
(da=d.buildFragment([Y[1]],[qa]),v=(da.cacheable?d.clone(da.fragment):da.fragment).childNodes);return d.merge(this,v)}if((K=X.getElementById(Y[2]))&&K.parentNode){if(K.id!==Y[2])return da.find(v);this.length=1;this[0]=K}this.context=X;this.selector=v;return this}return!K||K.jquery?(K||da).find(v):this.constructor(K).find(v)}if(d.isFunction(v))return da.ready(v);v.selector!==g&&(this.selector=v.selector,this.context=v.context);return d.makeArray(v,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},
toArray:function(){return ra.call(this,0)},get:function(v){return v==null?this.toArray():v<0?this[this.length+v]:this[v]},pushStack:function(v,K,da){var Y=this.constructor();d.isArray(v)?Z.apply(Y,v):d.merge(Y,v);Y.prevObject=this;Y.context=this.context;K==="find"?(Y.selector=this.selector+(this.selector?" ":"")+da):K&&(Y.selector=this.selector+"."+K+"("+da+")");return Y},each:function(v,K){return d.each(this,v,K)},ready:function(v){d.bindReady();I.done(v);return this},eq:function(v){return v===-1?
this.slice(v):this.slice(v,+v+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ra.apply(this,arguments),"slice",ra.call(arguments).join(","))},map:function(v){return this.pushStack(d.map(this,function(K,da){return v.call(K,da,K)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice};d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var v,K,da,Y,qa,Aa,Da=arguments[0]||{},Fa=1,
vb=arguments.length,wb=false;typeof Da=="boolean"&&(wb=Da,Da=arguments[1]||{},Fa=2);typeof Da!="object"&&!d.isFunction(Da)&&(Da={});for(vb===Fa&&(Da=this,--Fa);Fa<vb;Fa++)if((v=arguments[Fa])!=null)for(K in v){da=Da[K];Y=v[K];if(Da!==Y)wb&&Y&&(d.isPlainObject(Y)||(qa=d.isArray(Y)))?(qa?(qa=false,Aa=da&&d.isArray(da)?da:[]):(Aa=da&&d.isPlainObject(da)?da:{}),Da[K]=d.extend(wb,Aa,Y)):Y!==g&&(Da[K]=Y)}return Da};d.extend({noConflict:function(v){h.$===d&&(h.$=e);v&&h.jQuery===d&&(h.jQuery=b);return d},
isReady:false,readyWait:1,holdReady:function(v){v?d.readyWait++:d.ready(true)},ready:function(v){if(v===true&&!--d.readyWait||v!==true&&!d.isReady){if(!X.body)return setTimeout(d.ready,1);d.isReady=true;if(!(v!==true&&--d.readyWait>0)){I.resolveWith(X,[d]);d.fn.trigger&&d(X).trigger("ready").unbind("ready")}}},bindReady:function(){if(!I){I=d._Deferred();if(X.readyState==="complete")return setTimeout(d.ready,1);if(X.addEventListener){X.addEventListener("DOMContentLoaded",D,false);h.addEventListener("load",
d.ready,false)}else if(X.attachEvent){X.attachEvent("onreadystatechange",D);h.attachEvent("onload",d.ready);var v=false;try{v=h.frameElement==null}catch(K){}X.documentElement.doScroll&&v&&a()}}},isFunction:function(v){return d.type(v)==="function"},isArray:Array.isArray||function(v){return d.type(v)==="array"},isWindow:function(v){return v&&typeof v=="object"&&"setInterval"in v},isNaN:function(v){return v==null||!t.test(v)||isNaN(v)},type:function(v){return v==null?String(v):Sa[J.call(v)]||"object"},
isPlainObject:function(v){if(!v||d.type(v)!=="object"||v.nodeType||d.isWindow(v))return false;if(v.constructor&&!U.call(v,"constructor")&&!U.call(v.constructor.prototype,"isPrototypeOf"))return false;var K;for(K in v);return K===g||U.call(v,K)},isEmptyObject:function(v){for(var K in v)return false;return true},error:function(v){throw v;},parseJSON:function(v){if(typeof v!="string"||!v)return null;v=d.trim(v);if(h.JSON&&h.JSON.parse)return h.JSON.parse(v);if(C.test(v.replace(R,"@").replace(ba,"]").replace(ka,
"")))return(new Function("return "+v))();d.error("Invalid JSON: "+v)},parseXML:function(v,K,da){h.DOMParser?(da=new DOMParser,K=da.parseFromString(v,"text/xml")):(K=new ActiveXObject("Microsoft.XMLDOM"),K.async="false",K.loadXML(v));da=K.documentElement;(!da||!da.nodeName||da.nodeName==="parsererror")&&d.error("Invalid XML: "+v);return K},noop:function(){},globalEval:function(v){v&&k.test(v)&&(h.execScript||function(K){h.eval.call(h,K)})(v)},camelCase:function(v){return v.replace(o,u)},nodeName:function(v,
K){return v.nodeName&&v.nodeName.toUpperCase()===K.toUpperCase()},each:function(v,K,da){var Y,qa=0,Aa=v.length,Da=Aa===g||d.isFunction(v);if(da)if(Da)for(Y in v){if(K.apply(v[Y],da)===false)break}else for(;qa<Aa;){if(K.apply(v[qa++],da)===false)break}else if(Da)for(Y in v){if(K.call(v[Y],Y,v[Y])===false)break}else for(;qa<Aa;)if(K.call(v[qa],qa,v[qa++])===false)break;return v},trim:Ma?function(v){return v==null?"":Ma.call(v)}:function(v){return v==null?"":(v+"").replace(n,"").replace(p,"")},makeArray:function(v,
K){var da=K||[];if(v!=null){var Y=d.type(v);v.length==null||Y==="string"||Y==="function"||Y==="regexp"||d.isWindow(v)?Z.call(da,v):d.merge(da,v)}return da},inArray:function(v,K){if(Ja)return Ja.call(K,v);for(var da=0,Y=K.length;da<Y;da++)if(K[da]===v)return da;return-1},merge:function(v,K){var da=v.length,Y=0;if(typeof K.length=="number")for(var qa=K.length;Y<qa;Y++)v[da++]=K[Y];else for(;K[Y]!==g;)v[da++]=K[Y++];v.length=da;return v},grep:function(v,K,da){var Y=[],qa;da=!!da;for(var Aa=0,Da=v.length;Aa<
Da;Aa++){qa=!!K(v[Aa],Aa);da!==qa&&Y.push(v[Aa])}return Y},map:function(v,K,da){var Y,qa,Aa=[],Da=0,Fa=v.length;if(v instanceof d||Fa!==g&&typeof Fa=="number"&&(Fa>0&&v[0]&&v[Fa-1]||Fa===0||d.isArray(v)))for(;Da<Fa;Da++){Y=K(v[Da],Da,da);Y!=null&&(Aa[Aa.length]=Y)}else for(qa in v){Y=K(v[qa],qa,da);Y!=null&&(Aa[Aa.length]=Y)}return Aa.concat.apply([],Aa)},guid:1,proxy:function(v,K){if(typeof K=="string"){var da=v[K];K=v;v=da}if(!d.isFunction(v))return g;var Y=ra.call(arguments,2);da=function(){return v.apply(K,
Y.concat(ra.call(arguments)))};da.guid=v.guid=v.guid||da.guid||d.guid++;return da},access:function(v,K,da,Y,qa,Aa){var Da=v.length;if(typeof K=="object"){for(var Fa in K)d.access(v,Fa,K[Fa],Y,qa,da);return v}if(da!==g){Y=!Aa&&Y&&d.isFunction(da);for(Fa=0;Fa<Da;Fa++)qa(v[Fa],K,Y?da.call(v[Fa],Fa,qa(v[Fa],K)):da,Aa);return v}return Da?qa(v[0],K):g},now:function(){return(new Date).getTime()},uaMatch:function(v){v=v.toLowerCase();v=Ia.exec(v)||za.exec(v)||Ba.exec(v)||v.indexOf("compatible")<0&&Ca.exec(v)||
[];return{browser:v[1]||"",version:v[2]||"0"}},sub:function(){function v(da,Y){return new v.fn.init(da,Y)}d.extend(true,v,this);v.superclass=this;v.fn=v.prototype=this();v.fn.constructor=v;v.sub=this.sub;v.fn.init=function(da,Y){Y&&Y instanceof d&&!(Y instanceof v)&&(Y=v(Y));return d.fn.init.call(this,da,Y,K)};v.fn.init.prototype=v.fn;var K=v(X);return v},browser:{}});d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(v,K){Sa["[object "+K+"]"]=K.toLowerCase()});F=
d.uaMatch(F);F.browser&&(d.browser[F.browser]=true,d.browser.version=F.version);d.browser.webkit&&(d.browser.safari=true);k.test("\u00a0")&&(n=/^[\s\xA0]+/,p=/[\s\xA0]+$/);f=d(X);X.addEventListener?(D=function(){X.removeEventListener("DOMContentLoaded",D,false);d.ready()}):X.attachEvent&&(D=function(){X.readyState==="complete"&&(X.detachEvent("onreadystatechange",D),d.ready())});return d}(),A="done fail isResolved isRejected promise then always pipe".split(" "),L=[].slice;c.extend({_Deferred:function(){var a=
[],d,b,e,f={done:function(){if(!e){var i=arguments,k,n,p,t,w;d&&(w=d,d=0);k=0;for(n=i.length;k<n;k++){p=i[k];t=c.type(p);t==="array"?f.done.apply(f,p):t==="function"&&a.push(p)}w&&f.resolveWith(w[0],w[1])}return this},resolveWith:function(i,k){if(!e&&!d&&!b){k=k||[];b=1;try{for(;a[0];)a.shift().apply(i,k)}finally{d=[i,k];b=0}}return this},resolve:function(){f.resolveWith(this,arguments);return this},isResolved:function(){return!!b||!!d},cancel:function(){e=1;a=[];return this}};return f},Deferred:function(a){var d=
c._Deferred(),b=c._Deferred(),e;c.extend(d,{then:function(f,i){d.done(f).fail(i);return this},always:function(){return d.done.apply(d,arguments).fail.apply(this,arguments)},fail:b.done,rejectWith:b.resolveWith,reject:b.resolve,isRejected:b.isResolved,pipe:function(f,i){return c.Deferred(function(k){c.each({done:[f,"resolve"],fail:[i,"reject"]},function(n,p){var t=p[0],w=p[1],C;c.isFunction(t)?d[n](function(){(C=t.apply(this,arguments))&&c.isFunction(C.promise)?C.promise().then(k.resolve,k.reject):
k[w](C)}):d[n](k[w])})}).promise()},promise:function(f){if(f==null){if(e)return e;e=f={}}for(var i=A.length;i--;)f[A[i]]=d[A[i]];return f}});d.done(b.cancel).fail(d.cancel);delete d.cancel;a&&a.call(d,d);return d},when:function(a){function d(n){return function(p){b[n]=arguments.length>1?L.call(arguments,0):p;--i||k.resolveWith(k,L.call(b,0))}}var b=arguments,e=0,f=b.length,i=f,k=f<=1&&a&&c.isFunction(a.promise)?a:c.Deferred();if(f>1){for(;e<f;e++)b[e]&&c.isFunction(b[e].promise)?b[e].promise().then(d(e),
k.reject):--i;i||k.resolveWith(k,b)}else k!==a&&k.resolveWith(k,f?[a]:[]);return k.promise()}});c.support=function(){var a=X.createElement("div"),d=X.documentElement,b,e,f,i,k,n,p;a.setAttribute("className","t");a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";b=a.getElementsByTagName("*");e=a.getElementsByTagName("a")[0];if(!b||!b.length||!e)return{};f=X.createElement("select");i=f.appendChild(X.createElement("option"));b=a.getElementsByTagName("input")[0];
n={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:b.value==="on",optSelected:i.selected,getSetAttribute:a.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,
shrinkWrapBlocks:false,reliableMarginRight:true};b.checked=true;n.noCloneChecked=b.cloneNode(true).checked;f.disabled=true;n.optDisabled=!i.disabled;try{delete a.test}catch(t){n.deleteExpando=false}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){n.noCloneEvent=false}),a.cloneNode(true).fireEvent("onclick"));b=X.createElement("input");b.value="t";b.setAttribute("type","radio");n.radioValue=b.value==="t";b.setAttribute("checked","checked");a.appendChild(b);e=X.createDocumentFragment();
e.appendChild(a.firstChild);n.checkClone=e.cloneNode(true).cloneNode(true).lastChild.checked;a.innerHTML="";a.style.width=a.style.paddingLeft="1px";f=X.getElementsByTagName("body")[0];e=X.createElement(f?"div":"body");i={visibility:"hidden",width:0,height:0,border:0,margin:0};f&&c.extend(i,{position:"absolute",left:-1000,top:-1000});for(p in i)e.style[p]=i[p];e.appendChild(a);d=f||d;d.insertBefore(e,d.firstChild);n.appendChecked=b.checked;n.boxModel=a.offsetWidth===2;"zoom"in a.style&&(a.style.display=
"inline",a.style.zoom=1,n.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",n.shrinkWrapBlocks=a.offsetWidth!==2);a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";f=a.getElementsByTagName("td");b=f[0].offsetHeight===0;f[0].style.display="";f[1].style.display="none";n.reliableHiddenOffsets=b&&f[0].offsetHeight===0;a.innerHTML="";X.defaultView&&X.defaultView.getComputedStyle&&(k=X.createElement("div"),
k.style.width="0",k.style.marginRight="0",a.appendChild(k),n.reliableMarginRight=(parseInt((X.defaultView.getComputedStyle(k,null)||{marginRight:0}).marginRight,10)||0)===0);e.innerHTML="";d.removeChild(e);if(a.attachEvent)for(p in{submit:1,change:1,focusin:1}){k="on"+p;(b=k in a)||(a.setAttribute(k,"return;"),b=typeof a[k]=="function");n[p+"Bubbles"]=b}e=e=f=i=f=k=a=b=null;return n}();c.boxModel=c.support.boxModel;var M=/^(?:\{.*\}|\[.*\])$/,S=/([a-z])([A-Z])/g;c.extend({cache:{},uuid:0,expando:"jQuery"+
(c.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(a){a=a.nodeType?c.cache[a[c.expando]]:a[c.expando];return!!a&&!Oa(a)},data:function(a,d,b,e){if(c.acceptData(a)){var f=c.expando,i=typeof d=="string",k=a.nodeType,n=k?c.cache:a,p=k?a[c.expando]:a[c.expando]&&c.expando;if(!((!p||e&&p&&!n[p][f])&&i&&b===g)){p||(k?(a[c.expando]=p=++c.uuid):(p=c.expando));n[p]||(n[p]={},k||(n[p].toJSON=c.noop));if(typeof d==
"object"||typeof d=="function")e?(n[p][f]=c.extend(n[p][f],d)):(n[p]=c.extend(n[p],d));a=n[p];e&&(a[f]||(a[f]={}),a=a[f]);b!==g&&(a[c.camelCase(d)]=b);if(d==="events"&&!a[d])return a[f]&&a[f].events;return i?a[c.camelCase(d)]||a[d]:a}}},removeData:function(a,d,b){if(c.acceptData(a)){var e=c.expando,f=a.nodeType,i=f?c.cache:a,k=f?a[c.expando]:c.expando;if(i[k]){if(d){var n=b?i[k][e]:i[k];if(n){delete n[d];if(!Oa(n))return}}if(b){delete i[k][e];if(!Oa(i[k]))return}d=i[k][e];c.support.deleteExpando||
i!=h?delete i[k]:(i[k]=null);d?(i[k]={},f||(i[k].toJSON=c.noop),i[k][e]=d):f&&(c.support.deleteExpando?delete a[c.expando]:a.removeAttribute?a.removeAttribute(c.expando):(a[c.expando]=null))}}},_data:function(a,d,b){return c.data(a,d,b,true)},acceptData:function(a){if(a.nodeName){var d=c.noData[a.nodeName.toLowerCase()];if(d)return d!==true&&a.getAttribute("classid")===d}return true}});c.fn.extend({data:function(a,d){var b=null;if(typeof a=="undefined"){if(this.length){b=c.data(this[0]);if(this[0].nodeType===
1)for(var e=this[0].attributes,f,i=0,k=e.length;i<k;i++){f=e[i].name;f.indexOf("data-")===0&&(f=c.camelCase(f.substring(5)),Ra(this[0],f,b[f]))}}return b}if(typeof a=="object")return this.each(function(){c.data(this,a)});var n=a.split(".");n[1]=n[1]?"."+n[1]:"";if(d===g){b=this.triggerHandler("getData"+n[1]+"!",[n[0]]);b===g&&this.length&&(b=c.data(this[0],a),b=Ra(this[0],a,b));return b===g&&n[1]?this.data(n[0]):b}return this.each(function(){var p=c(this),t=[n[0],d];p.triggerHandler("setData"+n[1]+
"!",t);c.data(this,a,d);p.triggerHandler("changeData"+n[1]+"!",t)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({_mark:function(a,d){a&&(d=(d||"fx")+"mark",c.data(a,d,(c.data(a,d,g,true)||0)+1,true))},_unmark:function(a,d,b){a!==true&&(b=d,d=a,a=false);if(d){b=b||"fx";var e=b+"mark";(a=a?0:(c.data(d,e,g,true)||1)-1)?c.data(d,e,a,true):(c.removeData(d,e,true),xa(d,b,"mark"))}},queue:function(a,d,b){if(a){d=(d||"fx")+"queue";var e=c.data(a,d,g,true);b&&(!e||
c.isArray(b)?(e=c.data(a,d,c.makeArray(b),true)):e.push(b));return e||[]}},dequeue:function(a,d){d=d||"fx";var b=c.queue(a,d),e=b.shift();e==="inprogress"&&(e=b.shift());e&&(d==="fx"&&b.unshift("inprogress"),e.call(a,function(){c.dequeue(a,d)}));b.length||(c.removeData(a,d+"queue",true),xa(a,d,"queue"))}});c.fn.extend({queue:function(a,d){typeof a!="string"&&(d=a,a="fx");if(d===g)return c.queue(this[0],a);return this.each(function(){var b=c.queue(this,a,d);a==="fx"&&b[0]!=="inprogress"&&c.dequeue(this,
a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,d){a=c.fx?c.fx.speeds[a]||a:a;d=d||"fx";return this.queue(d,function(){var b=this;setTimeout(function(){c.dequeue(b,d)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,d){function b(){--k||e.resolveWith(f,[f])}typeof a!="string"&&(d=a,a=g);a=a||"fx";for(var e=c.Deferred(),f=this,i=f.length,k=1,n=a+"defer",p=a+"queue",t=a+"mark",w;i--;)if(w=c.data(f[i],n,g,true)||(c.data(f[i],
p,g,true)||c.data(f[i],t,g,true))&&c.data(f[i],n,c._Deferred(),true)){k++;w.done(b)}b();return e.promise()}});var ja=/[\n\t\r]/g,ia=/\s+/,wa=/\r/g,Ga=/^(?:button|input)$/i,ua=/^(?:button|input|object|select|textarea)$/i,Na=/^a(?:rea)?$/i,H=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ea=/\:|^on/,aa,ha;c.fn.extend({attr:function(a,d){return c.access(this,a,d,true,c.attr)},removeAttr:function(a){return this.each(function(){c.removeAttr(this,
a)})},prop:function(a,d){return c.access(this,a,d,true,c.prop)},removeProp:function(a){a=c.propFix[a]||a;return this.each(function(){try{this[a]=g;delete this[a]}catch(d){}})},addClass:function(a){var d,b,e,f,i,k,n;if(c.isFunction(a))return this.each(function(p){c(this).addClass(a.call(this,p,this.className))});if(a&&typeof a=="string"){d=a.split(ia);b=0;for(e=this.length;b<e;b++){f=this[b];if(f.nodeType===1)if(!f.className&&d.length===1)f.className=a;else{i=" "+f.className+" ";k=0;for(n=d.length;k<
n;k++)~i.indexOf(" "+d[k]+" ")||(i+=d[k]+" ");f.className=c.trim(i)}}}return this},removeClass:function(a){var d,b,e,f,i,k,n;if(c.isFunction(a))return this.each(function(p){c(this).removeClass(a.call(this,p,this.className))});if(a&&typeof a=="string"||a===g){d=(a||"").split(ia);b=0;for(e=this.length;b<e;b++){f=this[b];if(f.nodeType===1&&f.className)if(a){i=(" "+f.className+" ").replace(ja," ");k=0;for(n=d.length;k<n;k++)i=i.replace(" "+d[k]+" "," ");f.className=c.trim(i)}else f.className=""}}return this},
toggleClass:function(a,d){var b=typeof a,e=typeof d=="boolean";if(c.isFunction(a))return this.each(function(f){c(this).toggleClass(a.call(this,f,this.className,d),d)});return this.each(function(){if(b==="string")for(var f,i=0,k=c(this),n=d,p=a.split(ia);f=p[i++];){n=e?n:!k.hasClass(f);k[n?"addClass":"removeClass"](f)}else if(b==="undefined"||b==="boolean"){this.className&&c._data(this,"__className__",this.className);this.className=this.className||a===false?"":c._data(this,"__className__")||""}})},
hasClass:function(a){for(var d=0,b=this.length;d<b;d++)if((" "+this[d].className+" ").replace(ja," ").indexOf(" "+a+" ")>-1)return true;return false},val:function(a){var d,b,e=this[0];if(!arguments.length){if(e){if((d=c.valHooks[e.nodeName.toLowerCase()]||c.valHooks[e.type])&&"get"in d&&(b=d.get(e,"value"))!==g)return b;b=e.value;return typeof b=="string"?b.replace(wa,""):b==null?"":b}return g}var f=c.isFunction(a);return this.each(function(i){var k=c(this),n;if(this.nodeType===1){f?(n=a.call(this,
i,k.val())):(n=a);n==null?(n=""):typeof n=="number"?(n+=""):c.isArray(n)&&(n=c.map(n,function(p){return p==null?"":p+""}));d=c.valHooks[this.nodeName.toLowerCase()]||c.valHooks[this.type];if(!d||!("set"in d)||d.set(this,n,"value")===g)this.value=n}})}});c.extend({valHooks:{option:{get:function(a){var d=a.attributes.value;return!d||d.specified?a.value:a.text}},select:{get:function(a){var d,b=a.selectedIndex,e=[],f=a.options;a=a.type==="select-one";if(b<0)return null;for(var i=a?b:0,k=a?b+1:f.length;i<
k;i++){d=f[i];if(d.selected&&(c.support.optDisabled?!d.disabled:d.getAttribute("disabled")===null)&&(!d.parentNode.disabled||!c.nodeName(d.parentNode,"optgroup"))){d=c(d).val();if(a)return d;e.push(d)}}if(a&&!e.length&&f.length)return c(f[b]).val();return e},set:function(a,d){var b=c.makeArray(d);c(a).find("option").each(function(){this.selected=c.inArray(c(this).val(),b)>=0});b.length||(a.selectedIndex=-1);return b}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,
offset:true},attrFix:{tabindex:"tabIndex"},attr:function(a,d,b,e){var f=a.nodeType;if(!a||f===3||f===8||f===2)return g;if(e&&d in c.attrFn)return c(a)[d](b);if(!("getAttribute"in a))return c.prop(a,d,b);var i,k;(e=f!==1||!c.isXMLDoc(a))&&(d=c.attrFix[d]||d,k=c.attrHooks[d],k||(H.test(d)?(k=ha):aa&&d!=="className"&&(c.nodeName(a,"form")||ea.test(d))&&(k=aa)));if(b!==g){if(b===null){c.removeAttr(a,d);return g}if(k&&"set"in k&&e&&(i=k.set(a,b,d))!==g)return i;a.setAttribute(d,""+b);return b}if(k&&"get"in
k&&e&&(i=k.get(a,d))!==null)return i;i=a.getAttribute(d);return i===null?g:i},removeAttr:function(a,d){var b;a.nodeType===1&&(d=c.attrFix[d]||d,c.support.getSetAttribute?a.removeAttribute(d):(c.attr(a,d,""),a.removeAttributeNode(a.getAttributeNode(d))),H.test(d)&&(b=c.propFix[d]||d)in a&&(a[b]=false))},attrHooks:{type:{set:function(a,d){if(Ga.test(a.nodeName)&&a.parentNode)c.error("type property can't be changed");else if(!c.support.radioValue&&d==="radio"&&c.nodeName(a,"input")){var b=a.value;a.setAttribute("type",
d);b&&(a.value=b);return d}}},tabIndex:{get:function(a){var d=a.getAttributeNode("tabIndex");return d&&d.specified?parseInt(d.value,10):ua.test(a.nodeName)||Na.test(a.nodeName)&&a.href?0:g}},value:{get:function(a,d){if(aa&&c.nodeName(a,"button"))return aa.get(a,d);return d in a?a.value:null},set:function(a,d,b){if(aa&&c.nodeName(a,"button"))return aa.set(a,d,b);a.value=d}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",
cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,d,b){var e=a.nodeType;if(!a||e===3||e===8||e===2)return g;var f,i;(e!==1||!c.isXMLDoc(a))&&(d=c.propFix[d]||d,i=c.propHooks[d]);return b!==g?i&&"set"in i&&(f=i.set(a,b,d))!==g?f:(a[d]=b):i&&"get"in i&&(f=i.get(a,d))!==g?f:a[d]},propHooks:{}});ha={get:function(a,d){return c.prop(a,d)?d.toLowerCase():g},set:function(a,d,b){var e;d===false?c.removeAttr(a,
b):(e=c.propFix[b]||b,e in a&&(a[e]=true),a.setAttribute(b,b.toLowerCase()));return b}};c.support.getSetAttribute||(c.attrFix=c.propFix,aa=c.attrHooks.name=c.attrHooks.title=c.valHooks.button={get:function(a,d){var b;return(b=a.getAttributeNode(d))&&b.nodeValue!==""?b.nodeValue:g},set:function(a,d,b){if(a=a.getAttributeNode(b))return a.nodeValue=d}},c.each(["width","height"],function(a,d){c.attrHooks[d]=c.extend(c.attrHooks[d],{set:function(b,e){if(e===""){b.setAttribute(d,"auto");return e}}})}));
c.support.hrefNormalized||c.each(["href","src","width","height"],function(a,d){c.attrHooks[d]=c.extend(c.attrHooks[d],{get:function(b){b=b.getAttribute(d,2);return b===null?g:b}})});c.support.style||(c.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||g},set:function(a,d){return a.style.cssText=""+d}});c.support.optSelected||(c.propHooks.selected=c.extend(c.propHooks.selected,{get:function(){}}));c.support.checkOn||c.each(["radio","checkbox"],function(){c.valHooks[this]={get:function(a){return a.getAttribute("value")===
null?"on":a.value}}});c.each(["radio","checkbox"],function(){c.valHooks[this]=c.extend(c.valHooks[this],{set:function(a,d){if(c.isArray(d))return a.checked=c.inArray(c(a).val(),d)>=0}})});var sa=/\.(.*)$/,ta=/^(?:textarea|input|select)$/i,La=/\./g,gb=/ /g,kb=/[^\w\s.|`]/g,Fb=function(a){return a.replace(kb,"\\$&")};c.event={add:function(a,d,b,e){if(a.nodeType!==3&&a.nodeType!==8){if(b===false)b=ga;else if(!b)return;var f,i;b.handler&&(f=b,b=f.handler);b.guid||(b.guid=c.guid++);if(i=c._data(a)){var k=
i.events,n=i.handle;k||(i.events=k={});n||(i.handle=n=function(ba){return typeof c!="undefined"&&(!ba||c.event.triggered!==ba.type)?c.event.handle.apply(n.elem,arguments):g});n.elem=a;d=d.split(" ");for(var p,t=0,w;p=d[t++];){i=f?c.extend({},f):{handler:b,data:e};p.indexOf(".")>-1?(w=p.split("."),p=w.shift(),i.namespace=w.slice(0).sort().join(".")):(w=[],i.namespace="");i.type=p;i.guid||(i.guid=b.guid);var C=k[p],R=c.event.special[p]||{};if(!C){C=k[p]=[];if(!R.setup||R.setup.call(a,e,w,n)===false)a.addEventListener?
a.addEventListener(p,n,false):a.attachEvent&&a.attachEvent("on"+p,n)}R.add&&(R.add.call(a,i),i.handler.guid||(i.handler.guid=b.guid));C.push(i);c.event.global[p]=true}a=null}}},global:{},remove:function(a,d,b,e){if(a.nodeType!==3&&a.nodeType!==8){b===false&&(b=ga);var f,i,k=0,n,p,t,w,C,R,ba=c.hasData(a)&&c._data(a),ka=ba&&ba.events;if(ba&&ka){d&&d.type&&(b=d.handler,d=d.type);if(!d||typeof d=="string"&&d.charAt(0)===".")for(f in ka)c.event.remove(a,f+(d||""));else{for(d=d.split(" ");f=d[k++];){w=
f;n=f.indexOf(".")<0;p=[];n||(p=f.split("."),f=p.shift(),t=new RegExp("(^|\\.)"+c.map(p.slice(0).sort(),Fb).join("\\.(?:.*\\.)?")+"(\\.|$)"));if(C=ka[f])if(b){w=c.event.special[f]||{};for(i=e||0;i<C.length;i++){R=C[i];if(b.guid===R.guid){if(n||t.test(R.namespace)){e==null&&C.splice(i--,1);w.remove&&w.remove.call(a,R)}if(e!=null)break}}if(C.length===0||e!=null&&C.length===1){(!w.teardown||w.teardown.call(a,p)===false)&&c.removeEvent(a,f,ba.handle);delete ka[f]}}else for(i=0;i<C.length;i++){R=C[i];
if(n||t.test(R.namespace)){c.event.remove(a,w,R.handler,i);C.splice(i--,1)}}}if(c.isEmptyObject(ka)){(d=ba.handle)&&(d.elem=null);delete ba.events;delete ba.handle;c.isEmptyObject(ba)&&c.removeData(a,g,true)}}}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(a,d,b,e){var f=a.type||a,i=[],k;f.indexOf("!")>=0&&(f=f.slice(0,-1),k=true);f.indexOf(".")>=0&&(i=f.split("."),f=i.shift(),i.sort());if(b&&!c.event.customEvent[f]||c.event.global[f]){a=typeof a=="object"?a[c.expando]?
a:new c.Event(f,a):new c.Event(f);a.type=f;a.exclusive=k;a.namespace=i.join(".");a.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(e||!b){a.preventDefault();a.stopPropagation()}if(b){if(!(b.nodeType===3||b.nodeType===8)){a.result=g;a.target=b;d=d!=null?c.makeArray(d):[];d.unshift(a);i=b;e=f.indexOf(":")<0?"on"+f:"";do{k=c._data(i,"handle");a.currentTarget=i;k&&k.apply(i,d);e&&c.acceptData(i)&&i[e]&&i[e].apply(i,d)===false&&(a.result=false,a.preventDefault());i=i.parentNode||
i.ownerDocument||i===a.target.ownerDocument&&h}while(i&&!a.isPropagationStopped());if(!a.isDefaultPrevented()){var n;i=c.event.special[f]||{};if((!i._default||i._default.call(b.ownerDocument,a)===false)&&(f!=="click"||!c.nodeName(b,"a"))&&c.acceptData(b)){try{e&&b[f]&&(n=b[e],n&&(b[e]=null),c.event.triggered=f,b[f]())}catch(p){}n&&(b[e]=n);c.event.triggered=g}}return a.result}}else c.each(c.cache,function(){var t=this[c.expando];t&&t.events&&t.events[f]&&c.event.trigger(a,d,t.handle.elem)})}},handle:function(a){a=
c.event.fix(a||h.event);var d=((c._data(this,"events")||{})[a.type]||[]).slice(0),b=!a.exclusive&&!a.namespace,e=Array.prototype.slice.call(arguments,0);e[0]=a;a.currentTarget=this;for(var f=0,i=d.length;f<i;f++){var k=d[f];if(b||a.namespace_re.test(k.namespace)){a.handler=k.handler;a.data=k.data;a.handleObj=k;k=k.handler.apply(this,e);k!==g&&(a.result=k,k===false&&(a.preventDefault(),a.stopPropagation()));if(a.isImmediatePropagationStopped())break}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[c.expando])return a;var d=a;a=c.Event(d);for(var b=this.props.length,e;b;){e=this.props[--b];a[e]=d[e]}a.target||(a.target=a.srcElement||X);a.target.nodeType===3&&(a.target=a.target.parentNode);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){b=a.target.ownerDocument||X;d=b.documentElement;b=b.body;a.pageX=a.clientX+(d&&d.scrollLeft||b&&b.scrollLeft||0)-(d&&d.clientLeft||b&&b.clientLeft||0);
a.pageY=a.clientY+(d&&d.scrollTop||b&&b.scrollTop||0)-(d&&d.clientTop||b&&b.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode);!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey);!a.which&&a.button!==g&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,ca(a.origType,a.selector),c.extend({},a,{handler:oa,guid:a.handler.guid}))},
remove:function(a){c.event.remove(this,ca(a.origType,a.selector),a)}},beforeunload:{setup:function(a,d,b){c.isWindow(this)&&(this.onbeforeunload=b)},teardown:function(a,d){this.onbeforeunload===d&&(this.onbeforeunload=null)}}}};c.removeEvent=X.removeEventListener?function(a,d,b){a.removeEventListener&&a.removeEventListener(d,b,false)}:function(a,d,b){a.detachEvent&&a.detachEvent("on"+d,b)};c.Event=function(a,d){if(!this.preventDefault)return new c.Event(a,d);a&&a.type?(this.originalEvent=a,this.type=
a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===false||a.getPreventDefault&&a.getPreventDefault()?fa:ga):(this.type=a);d&&c.extend(this,d);this.timeStamp=c.now();this[c.expando]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=fa;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():(a.returnValue=false))},stopPropagation:function(){this.isPropagationStopped=fa;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=
true)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=fa;this.stopPropagation()},isDefaultPrevented:ga,isPropagationStopped:ga,isImmediatePropagationStopped:ga};var Rb=function(a){var d=a.relatedTarget,b=false,e=a.type;a.type=a.data;d!==this&&(d&&(b=c.contains(this,d)),b||(c.event.handle.apply(this,arguments),a.type=e))},Sb=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,d){c.event.special[a]=
{setup:function(b){c.event.add(this,d,b&&b.selector?Sb:Rb,a)},teardown:function(b){c.event.remove(this,d,b&&b.selector?Sb:Rb)}}});c.support.submitBubbles||(c.event.special.submit={setup:function(){if(c.nodeName(this,"form"))return false;else{c.event.add(this,"click.specialSubmit",function(a){var d=a.target,b=d.type;(b==="submit"||b==="image")&&c(d).closest("form").length&&T("submit",this,arguments)});c.event.add(this,"keypress.specialSubmit",function(a){var d=a.target,b=d.type;(b==="text"||b==="password")&&
c(d).closest("form").length&&a.keyCode===13&&T("submit",this,arguments)})}},teardown:function(){c.event.remove(this,".specialSubmit")}});if(!c.support.changeBubbles){var lb,Gb=function(a){var d=a.type,b=a.value;d==="radio"||d==="checkbox"?(b=a.checked):d==="select-multiple"?(b=a.selectedIndex>-1?c.map(a.options,function(e){return e.selected}).join("-"):""):c.nodeName(a,"select")&&(b=a.selectedIndex);return b},Hb=function(a,d){var b=a.target,e,f;if(ta.test(b.nodeName)&&!b.readOnly){e=c._data(b,"_change_data");
f=Gb(b);(a.type!=="focusout"||b.type!=="radio")&&c._data(b,"_change_data",f);if(!(e===g||f===e))if(e!=null||f){a.type="change";a.liveFired=g;c.event.trigger(a,d,b)}}};c.event.special.change={filters:{focusout:Hb,beforedeactivate:Hb,click:function(a){var d=a.target,b=c.nodeName(d,"input")?d.type:"";(b==="radio"||b==="checkbox"||c.nodeName(d,"select"))&&Hb.call(this,a)},keydown:function(a){var d=a.target,b=c.nodeName(d,"input")?d.type:"";(a.keyCode===13&&!c.nodeName(d,"textarea")||a.keyCode===32&&(b===
"checkbox"||b==="radio")||b==="select-multiple")&&Hb.call(this,a)},beforeactivate:function(a){a=a.target;c._data(a,"_change_data",Gb(a))}},setup:function(){if(this.type==="file")return false;for(var a in lb)c.event.add(this,a+".specialChange",lb[a]);return ta.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return ta.test(this.nodeName)}};lb=c.event.special.change.filters;lb.focus=lb.beforeactivate}c.support.focusinBubbles||c.each({focus:"focusin",blur:"focusout"},function(a,
d){function b(f){var i=c.event.fix(f);i.type=d;i.originalEvent={};c.event.trigger(i,null,i.target);i.isDefaultPrevented()&&f.preventDefault()}var e=0;c.event.special[d]={setup:function(){e++===0&&X.addEventListener(a,b,true)},teardown:function(){--e===0&&X.removeEventListener(a,b,true)}}});c.each(["bind","one"],function(a,d){c.fn[d]=function(b,e,f){var i;if(typeof b=="object"){for(var k in b)this[d](k,e,b[k],f);return this}if(arguments.length===2||e===false){f=e;e=g}d==="one"?(i=function(p){c(this).unbind(p,
i);return f.apply(this,arguments)},i.guid=f.guid||c.guid++):(i=f);if(b==="unload"&&d!=="one")this.one(b,e,f);else{k=0;for(var n=this.length;k<n;k++)c.event.add(this[k],b,i,e)}return this}});c.fn.extend({unbind:function(a,d){if(typeof a=="object"&&!a.preventDefault)for(var b in a)this.unbind(b,a[b]);else{b=0;for(var e=this.length;b<e;b++)c.event.remove(this[b],a,d)}return this},delegate:function(a,d,b,e){return this.live(d,b,e,a)},undelegate:function(a,d,b){return arguments.length===0?this.unbind("live"):
this.die(d,null,b,a)},trigger:function(a,d){return this.each(function(){c.event.trigger(a,d,this)})},triggerHandler:function(a,d){if(this[0])return c.event.trigger(a,d,this[0],true)},toggle:function(a){var d=arguments,b=a.guid||c.guid++,e=0,f=function(i){var k=(c.data(this,"lastToggle"+a.guid)||0)%e;c.data(this,"lastToggle"+a.guid,k+1);i.preventDefault();return d[k].apply(this,arguments)||false};for(f.guid=b;e<d.length;)d[e++].guid=b;return this.click(f)},hover:function(a,d){return this.mouseenter(a).mouseleave(d||
a)}});var rb={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,d){c.fn[d]=function(b,e,f,i){var k=0,n,p,t=i||this.selector,w=i?this:c(this.context);if(typeof b=="object"&&!b.preventDefault){for(n in b)w[d](n,e,b[n],t);return this}if(d==="die"&&!b&&i&&i.charAt(0)==="."){w.unbind(i);return this}if(e===false||c.isFunction(e)){f=e||ga;e=g}for(b=(b||"").split(" ");(i=b[k++])!=null;){n=sa.exec(i);p="";n&&(p=n[0],i=i.replace(sa,""));if(i==="hover")b.push("mouseenter"+
p,"mouseleave"+p);else{n=i;rb[i]?(b.push(rb[i]+p),i+=p):(i=(rb[i]||i)+p);if(d==="live"){p=0;for(var C=w.length;p<C;p++)c.event.add(w[p],"live."+ca(i,t),{data:e,selector:t,handler:f,origType:i,origHandler:f,preType:n})}else w.unbind("live."+ca(i,t),f)}}return this}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,d){c.fn[d]=function(b,
e){e==null&&(e=b,b=null);return arguments.length>0?this.bind(d,b,e):this.trigger(d)};c.attrFn&&(c.attrFn[d]=true)});(function(){function a(o,u,F,I,D,J){D=0;for(var U=I.length;D<U;D++){var Z=I[D];if(Z){var ra=false;for(Z=Z[o];Z;){if(Z.sizcache===F){ra=I[Z.sizset];break}if(Z.nodeType===1){J||(Z.sizcache=F,Z.sizset=D);if(typeof u!="string"){if(Z===u){ra=true;break}}else if(t.filter(u,[Z]).length>0){ra=Z;break}}Z=Z[o]}I[D]=ra}}}function d(o,u,F,I,D,J){D=0;for(var U=I.length;D<U;D++){var Z=I[D];if(Z){var ra=
false;for(Z=Z[o];Z;){if(Z.sizcache===F){ra=I[Z.sizset];break}Z.nodeType===1&&!J&&(Z.sizcache=F,Z.sizset=D);if(Z.nodeName.toLowerCase()===u){ra=Z;break}Z=Z[o]}I[D]=ra}}}var b=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,f=Object.prototype.toString,i=false,k=true,n=/\\/g,p=/\W/;[0,0].sort(function(){k=false;return 0});var t=function(o,u,F,I){F=F||[];var D=u=u||X;if(u.nodeType!==1&&u.nodeType!==9)return[];if(!o||
typeof o!="string")return F;var J,U,Z,ra,Ma,Ja,Sa=true,v=t.isXML(u),K=[],da=o;do{b.exec("");if(J=b.exec(da)){da=J[3];K.push(J[1]);if(J[2]){ra=J[3];break}}}while(J);if(K.length>1&&C.exec(o))if(K.length===2&&w.relative[K[0]])U=Ca(K[0]+K[1],u);else for(U=w.relative[K[0]]?[u]:t(K.shift(),u);K.length;){o=K.shift();w.relative[o]&&(o+=K.shift());U=Ca(o,U)}else{!I&&K.length>1&&u.nodeType===9&&!v&&w.match.ID.test(K[0])&&!w.match.ID.test(K[K.length-1])&&(Ma=t.find(K.shift(),u,v),u=Ma.expr?t.filter(Ma.expr,
Ma.set)[0]:Ma.set[0]);if(u){Ma=I?{expr:K.pop(),set:ka(I)}:t.find(K.pop(),K.length===1&&(K[0]==="~"||K[0]==="+")&&u.parentNode?u.parentNode:u,v);U=Ma.expr?t.filter(Ma.expr,Ma.set):Ma.set;for(K.length>0?(Z=ka(U)):(Sa=false);K.length;){J=Ja=K.pop();w.relative[Ja]?(J=K.pop()):(Ja="");J==null&&(J=u);w.relative[Ja](Z,J,v)}}else Z=[]}Z||(Z=U);Z||t.error(Ja||o);if(f.call(Z)==="[object Array]")if(Sa)if(u&&u.nodeType===1)for(o=0;Z[o]!=null;o++)Z[o]&&(Z[o]===true||Z[o].nodeType===1&&t.contains(u,Z[o]))&&F.push(U[o]);
else for(o=0;Z[o]!=null;o++)Z[o]&&Z[o].nodeType===1&&F.push(U[o]);else F.push.apply(F,Z);else ka(Z,F);ra&&(t(ra,D,F,I),t.uniqueSort(F));return F};t.uniqueSort=function(o){if(za){i=k;o.sort(za);if(i)for(var u=1;u<o.length;u++)o[u]===o[u-1]&&o.splice(u--,1)}return o};t.matches=function(o,u){return t(o,null,null,u)};t.matchesSelector=function(o,u){return t(u,null,null,[o]).length>0};t.find=function(o,u,F){var I;if(!o)return[];for(var D=0,J=w.order.length;D<J;D++){var U,Z=w.order[D];if(U=w.leftMatch[Z].exec(o)){var ra=
U[1];U.splice(1,1);if(ra.substr(ra.length-1)!=="\\"){U[1]=(U[1]||"").replace(n,"");I=w.find[Z](U,u,F);if(I!=null){o=o.replace(w.match[Z],"");break}}}}I||(I=typeof u.getElementsByTagName!="undefined"?u.getElementsByTagName("*"):[]);return{set:I,expr:o}};t.filter=function(o,u,F,I){for(var D,J,U=o,Z=[],ra=u,Ma=u&&u[0]&&t.isXML(u[0]);o&&u.length;){for(var Ja in w.filter)if((D=w.leftMatch[Ja].exec(o))!=null&&D[2]){var Sa,v,K=w.filter[Ja];v=D[1];J=false;D.splice(1,1);if(v.substr(v.length-1)!=="\\"){ra===
Z&&(Z=[]);if(w.preFilter[Ja])if(D=w.preFilter[Ja](D,ra,F,Z,I,Ma)){if(D===true)continue}else J=Sa=true;if(D)for(var da=0;(v=ra[da])!=null;da++)if(v){Sa=K(v,D,da,ra);var Y=I^!!Sa;F&&Sa!=null?Y?(J=true):(ra[da]=false):Y&&(Z.push(v),J=true)}if(Sa!==g){F||(ra=Z);o=o.replace(w.match[Ja],"");if(!J)return[];break}}}if(o===U)if(J==null)t.error(o);else break;U=o}return ra};t.error=function(o){throw"Syntax error, unrecognized expression: "+o;};var w=t.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},
leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(o){return o.getAttribute("href")},type:function(o){return o.getAttribute("type")}},relative:{"+":function(o,u){var F=typeof u=="string",I=F&&!p.test(u);F=F&&!I;I&&(u=u.toLowerCase());I=0;for(var D=o.length,J;I<D;I++)if(J=o[I]){for(;(J=J.previousSibling)&&J.nodeType!==1;);o[I]=F||J&&J.nodeName.toLowerCase()===u?J||false:J===u}F&&t.filter(u,o,true)},">":function(o,u){var F,I=typeof u=="string",D=0,J=o.length;if(I&&
!p.test(u))for(u=u.toLowerCase();D<J;D++){if(F=o[D]){F=F.parentNode;o[D]=F.nodeName.toLowerCase()===u?F:false}}else{for(;D<J;D++)(F=o[D])&&(o[D]=I?F.parentNode:F.parentNode===u);I&&t.filter(u,o,true)}},"":function(o,u,F){var I,D=e++,J=a;typeof u=="string"&&!p.test(u)&&(u=u.toLowerCase(),I=u,J=d);J("parentNode",u,D,o,I,F)},"~":function(o,u,F){var I,D=e++,J=a;typeof u=="string"&&!p.test(u)&&(u=u.toLowerCase(),I=u,J=d);J("previousSibling",u,D,o,I,F)}},find:{ID:function(o,u,F){if(typeof u.getElementById!=
"undefined"&&!F)return(o=u.getElementById(o[1]))&&o.parentNode?[o]:[]},NAME:function(o,u){if(typeof u.getElementsByName!="undefined"){for(var F=[],I=u.getElementsByName(o[1]),D=0,J=I.length;D<J;D++)I[D].getAttribute("name")===o[1]&&F.push(I[D]);return F.length===0?null:F}},TAG:function(o,u){if(typeof u.getElementsByTagName!="undefined")return u.getElementsByTagName(o[1])}},preFilter:{CLASS:function(o,u,F,I,D,J){o=" "+o[1].replace(n,"")+" ";if(J)return o;J=0;for(var U;(U=u[J])!=null;J++)U&&(D^(U.className&&
(" "+U.className+" ").replace(/[\t\n\r]/g," ").indexOf(o)>=0)?F||I.push(U):F&&(u[J]=false));return false},ID:function(o){return o[1].replace(n,"")},TAG:function(o){return o[1].replace(n,"").toLowerCase()},CHILD:function(o){if(o[1]==="nth"){o[2]||t.error(o[0]);o[2]=o[2].replace(/^\+|\s*/g,"");var u=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(o[2]==="even"&&"2n"||o[2]==="odd"&&"2n+1"||!/\D/.test(o[2])&&"0n+"+o[2]||o[2]);o[2]=u[1]+(u[2]||1)-0;o[3]=u[3]-0}else o[2]&&t.error(o[0]);o[0]=e++;return o},ATTR:function(o,
u,F,I,D,J){u=o[1]=o[1].replace(n,"");!J&&w.attrMap[u]&&(o[1]=w.attrMap[u]);o[4]=(o[4]||o[5]||"").replace(n,"");o[2]==="~="&&(o[4]=" "+o[4]+" ");return o},PSEUDO:function(o,u,F,I,D){if(o[1]==="not")if((b.exec(o[3])||"").length>1||/^\w/.test(o[3]))o[3]=t(o[3],null,null,u);else{o=t.filter(o[3],u,F,true^D);F||I.push.apply(I,o);return false}else if(w.match.POS.test(o[0])||w.match.CHILD.test(o[0]))return true;return o},POS:function(o){o.unshift(true);return o}},filters:{enabled:function(o){return o.disabled===
false&&o.type!=="hidden"},disabled:function(o){return o.disabled===true},checked:function(o){return o.checked===true},selected:function(o){return o.selected===true},parent:function(o){return!!o.firstChild},empty:function(o){return!o.firstChild},has:function(o,u,F){return!!t(F[3],o).length},header:function(o){return/h\d/i.test(o.nodeName)},text:function(o){var u=o.getAttribute("type"),F=o.type;return o.nodeName.toLowerCase()==="input"&&"text"===F&&(u===F||u===null)},radio:function(o){return o.nodeName.toLowerCase()===
"input"&&"radio"===o.type},checkbox:function(o){return o.nodeName.toLowerCase()==="input"&&"checkbox"===o.type},file:function(o){return o.nodeName.toLowerCase()==="input"&&"file"===o.type},password:function(o){return o.nodeName.toLowerCase()==="input"&&"password"===o.type},submit:function(o){var u=o.nodeName.toLowerCase();return(u==="input"||u==="button")&&"submit"===o.type},image:function(o){return o.nodeName.toLowerCase()==="input"&&"image"===o.type},reset:function(o){var u=o.nodeName.toLowerCase();
return(u==="input"||u==="button")&&"reset"===o.type},button:function(o){var u=o.nodeName.toLowerCase();return u==="input"&&"button"===o.type||u==="button"},input:function(o){return/input|select|textarea|button/i.test(o.nodeName)},focus:function(o){return o===o.ownerDocument.activeElement}},setFilters:{first:function(o,u){return u===0},last:function(o,u,F,I){return u===I.length-1},even:function(o,u){return u%2===0},odd:function(o,u){return u%2===1},lt:function(o,u,F){return u<F[3]-0},gt:function(o,
u,F){return u>F[3]-0},nth:function(o,u,F){return F[3]-0===u},eq:function(o,u,F){return F[3]-0===u}},filter:{PSEUDO:function(o,u,F,I){var D=u[1],J=w.filters[D];if(J)return J(o,F,u,I);if(D==="contains")return(o.textContent||o.innerText||t.getText([o])||"").indexOf(u[3])>=0;if(D==="not"){u=u[3];F=0;for(I=u.length;F<I;F++)if(u[F]===o)return false;return true}t.error(D)},CHILD:function(o,u){var F=u[1],I=o;switch(F){case "only":case "first":for(;I=I.previousSibling;)if(I.nodeType===1)return false;if(F===
"first")return true;I=o;case "last":for(;I=I.nextSibling;)if(I.nodeType===1)return false;return true;case "nth":F=u[2];var D=u[3];if(F===1&&D===0)return true;var J=u[0],U=o.parentNode;if(U&&(U.sizcache!==J||!o.nodeIndex)){var Z=0;for(I=U.firstChild;I;I=I.nextSibling)I.nodeType===1&&(I.nodeIndex=++Z);U.sizcache=J}I=o.nodeIndex-D;return F===0?I===0:I%F===0&&I/F>=0}},ID:function(o,u){return o.nodeType===1&&o.getAttribute("id")===u},TAG:function(o,u){return u==="*"&&o.nodeType===1||o.nodeName.toLowerCase()===
u},CLASS:function(o,u){return(" "+(o.className||o.getAttribute("class"))+" ").indexOf(u)>-1},ATTR:function(o,u){var F=u[1];F=w.attrHandle[F]?w.attrHandle[F](o):o[F]!=null?o[F]:o.getAttribute(F);var I=F+"",D=u[2],J=u[4];return F==null?D==="!=":D==="="?I===J:D==="*="?I.indexOf(J)>=0:D==="~="?(" "+I+" ").indexOf(J)>=0:J?D==="!="?I!==J:D==="^="?I.indexOf(J)===0:D==="$="?I.substr(I.length-J.length)===J:D==="|="?I===J||I.substr(0,J.length+1)===J+"-":false:I&&F!==false},POS:function(o,u,F,I){var D=w.setFilters[u[2]];
if(D)return D(o,F,u,I)}}},C=w.match.POS,R=function(o,u){return"\\"+(u-0+1)};for(var ba in w.match){w.match[ba]=new RegExp(w.match[ba].source+/(?![^\[]*\])(?![^\(]*\))/.source);w.leftMatch[ba]=new RegExp(/(^(?:.|\r|\n)*?)/.source+w.match[ba].source.replace(/\\(\d+)/g,R))}var ka=function(o,u){o=Array.prototype.slice.call(o,0);if(u){u.push.apply(u,o);return u}return o};try{Array.prototype.slice.call(X.documentElement.childNodes,0)}catch(Ia){ka=function(o,u){var F=0,I=u||[];if(f.call(o)==="[object Array]")Array.prototype.push.apply(I,
o);else if(typeof o.length=="number")for(var D=o.length;F<D;F++)I.push(o[F]);else for(;o[F];F++)I.push(o[F]);return I}}var za,Ba;X.documentElement.compareDocumentPosition?(za=function(o,u){if(o===u){i=true;return 0}if(!o.compareDocumentPosition||!u.compareDocumentPosition)return o.compareDocumentPosition?-1:1;return o.compareDocumentPosition(u)&4?-1:1}):(za=function(o,u){if(o===u){i=true;return 0}if(o.sourceIndex&&u.sourceIndex)return o.sourceIndex-u.sourceIndex;var F,I,D=[],J=[];F=o.parentNode;I=
u.parentNode;var U=F;if(F===I)return Ba(o,u);if(!F)return-1;if(!I)return 1;for(;U;){D.unshift(U);U=U.parentNode}for(U=I;U;){J.unshift(U);U=U.parentNode}F=D.length;I=J.length;for(U=0;U<F&&U<I;U++)if(D[U]!==J[U])return Ba(D[U],J[U]);return U===F?Ba(o,J[U],-1):Ba(D[U],u,1)},Ba=function(o,u,F){if(o===u)return F;for(o=o.nextSibling;o;){if(o===u)return-1;o=o.nextSibling}return 1});t.getText=function(o){for(var u="",F,I=0;o[I];I++){F=o[I];F.nodeType===3||F.nodeType===4?(u+=F.nodeValue):F.nodeType!==8&&(u+=
t.getText(F.childNodes))}return u};(function(){var o=X.createElement("div"),u="script"+(new Date).getTime(),F=X.documentElement;o.innerHTML="<a name='"+u+"'/>";F.insertBefore(o,F.firstChild);X.getElementById(u)&&(w.find.ID=function(I,D,J){if(typeof D.getElementById!="undefined"&&!J)return(D=D.getElementById(I[1]))?D.id===I[1]||typeof D.getAttributeNode!="undefined"&&D.getAttributeNode("id").nodeValue===I[1]?[D]:g:[]},w.filter.ID=function(I,D){var J=typeof I.getAttributeNode!="undefined"&&I.getAttributeNode("id");
return I.nodeType===1&&J&&J.nodeValue===D});F.removeChild(o);F=o=null})();(function(){var o=X.createElement("div");o.appendChild(X.createComment(""));o.getElementsByTagName("*").length>0&&(w.find.TAG=function(u,F){var I=F.getElementsByTagName(u[1]);if(u[1]==="*"){for(var D=[],J=0;I[J];J++)I[J].nodeType===1&&D.push(I[J]);I=D}return I});o.innerHTML="<a href='#'></a>";o.firstChild&&typeof o.firstChild.getAttribute!="undefined"&&o.firstChild.getAttribute("href")!=="#"&&(w.attrHandle.href=function(u){return u.getAttribute("href",
2)});o=null})();X.querySelectorAll&&function(){var o=t,u=X.createElement("div");u.innerHTML="<p class='TEST'></p>";if(!u.querySelectorAll||u.querySelectorAll(".TEST").length!==0){t=function(I,D,J,U){D=D||X;if(!U&&!t.isXML(D)){var Z=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(I);if(Z&&(D.nodeType===1||D.nodeType===9)){if(Z[1])return ka(D.getElementsByTagName(I),J);if(Z[2]&&w.find.CLASS&&D.getElementsByClassName)return ka(D.getElementsByClassName(Z[2]),J)}if(D.nodeType===9){if(I==="body"&&D.body)return ka([D.body],
J);if(Z&&Z[3]){var ra=D.getElementById(Z[3]);if(!ra||!ra.parentNode)return ka([],J);if(ra.id===Z[3])return ka([ra],J)}try{return ka(D.querySelectorAll(I),J)}catch(Ma){}}else if(D.nodeType===1&&D.nodeName.toLowerCase()!=="object"){Z=D;var Ja=(ra=D.getAttribute("id"))||"__sizzle__",Sa=D.parentNode,v=/^\s*[+~]/.test(I);ra?(Ja=Ja.replace(/'/g,"\\$&")):D.setAttribute("id",Ja);v&&Sa&&(D=D.parentNode);try{if(!v||Sa)return ka(D.querySelectorAll("[id='"+Ja+"'] "+I),J)}catch(K){}finally{ra||Z.removeAttribute("id")}}}return o(I,
D,J,U)};for(var F in o)t[F]=o[F];u=null}}();(function(){var o=X.documentElement,u=o.matchesSelector||o.mozMatchesSelector||o.webkitMatchesSelector||o.msMatchesSelector;if(u){var F=!u.call(X.createElement("div"),"div"),I=false;try{u.call(X.documentElement,"[test!='']:sizzle")}catch(D){I=true}t.matchesSelector=function(J,U){U=U.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!t.isXML(J))try{if(I||!w.match.PSEUDO.test(U)&&!/!=/.test(U)){var Z=u.call(J,U);if(Z||!F||J.document&&J.document.nodeType!==11)return Z}}catch(ra){}return t(U,
null,null,[J]).length>0}}})();(function(){var o=X.createElement("div");o.innerHTML="<div class='test e'></div><div class='test'></div>";if(o.getElementsByClassName&&o.getElementsByClassName("e").length!==0){o.lastChild.className="e";if(o.getElementsByClassName("e").length!==1){w.order.splice(1,0,"CLASS");w.find.CLASS=function(u,F,I){if(typeof F.getElementsByClassName!="undefined"&&!I)return F.getElementsByClassName(u[1])};o=null}}})();X.documentElement.contains?(t.contains=function(o,u){return o!==
u&&(o.contains?o.contains(u):true)}):X.documentElement.compareDocumentPosition?(t.contains=function(o,u){return!!(o.compareDocumentPosition(u)&16)}):(t.contains=function(){return false});t.isXML=function(o){return(o=(o?o.ownerDocument||o:0).documentElement)?o.nodeName!=="HTML":false};var Ca=function(o,u){for(var F,I=[],D="",J=u.nodeType?[u]:u;F=w.match.PSEUDO.exec(o);){D+=F[0];o=o.replace(w.match.PSEUDO,"")}o=w.relative[o]?o+"*":o;F=0;for(var U=J.length;F<U;F++)t(o,J[F],I);return t.filter(D,I)};c.find=
t;c.expr=t.selectors;c.expr[":"]=c.expr.filters;c.unique=t.uniqueSort;c.text=t.getText;c.isXMLDoc=t.isXML;c.contains=t.contains})();var xb=/Until$/,yb=/^(?:parents|prevUntil|prevAll)/,zb=/,/,Ka=/^.[^:#\[\.,]*$/,lc=Array.prototype.slice,sb=c.expr.match.POS,ec={children:true,contents:true,next:true,prev:true};c.fn.extend({find:function(a){var d=this,b,e;if(typeof a!="string")return c(a).filter(function(){b=0;for(e=d.length;b<e;b++)if(c.contains(d[b],this))return true});var f=this.pushStack("","find",
a),i,k,n;b=0;for(e=this.length;b<e;b++){i=f.length;c.find(a,this[b],f);if(b>0)for(k=i;k<f.length;k++)for(n=0;n<i;n++)if(f[n]===f[k]){f.splice(k--,1);break}}return f},has:function(a){var d=c(a);return this.filter(function(){for(var b=0,e=d.length;b<e;b++)if(c.contains(this,d[b]))return true})},not:function(a){return this.pushStack(E(this,a,false),"not",a)},filter:function(a){return this.pushStack(E(this,a,true),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?c.filter(a,this).length>0:this.filter(a).length>
0)},closest:function(a,d){var b=[],e,f,i=this[0];if(c.isArray(a)){var k,n={},p=1;if(i&&a.length){e=0;for(f=a.length;e<f;e++){k=a[e];n[k]||(n[k]=sb.test(k)?c(k,d||this.context):k)}for(;i&&i.ownerDocument&&i!==d;){for(k in n){e=n[k];(e.jquery?e.index(i)>-1:c(i).is(e))&&b.push({selector:k,elem:i,level:p})}i=i.parentNode;p++}}return b}k=sb.test(a)||typeof a!="string"?c(a,d||this.context):0;e=0;for(f=this.length;e<f;e++)for(i=this[e];i;){if(k?k.index(i)>-1:c.find.matchesSelector(i,a)){b.push(i);break}i=
i.parentNode;if(!i||!i.ownerDocument||i===d||i.nodeType===11)break}b=b.length>1?c.unique(b):b;return this.pushStack(b,"closest",a)},index:function(a){if(!a||typeof a=="string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,d){var b=typeof a=="string"?c(a,d):c.makeArray(a&&a.nodeType?[a]:a),e=c.merge(this.get(),b);return this.pushStack(!b[0]||!b[0].parentNode||b[0].parentNode.nodeType===11||!e[0]||!e[0].parentNode||e[0].parentNode.nodeType===
11?e:c.unique(e))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,d,b){return c.dir(a,"parentNode",b)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,d,b){return c.dir(a,
"nextSibling",b)},prevUntil:function(a,d,b){return c.dir(a,"previousSibling",b)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,d){c.fn[a]=function(b,e){var f=c.map(this,d,b),i=lc.call(arguments);xb.test(a)||(e=b);e&&typeof e=="string"&&(f=c.filter(e,f));f=this.length>1&&!ec[a]?c.unique(f):f;(this.length>
1||zb.test(e))&&yb.test(a)&&(f=f.reverse());return this.pushStack(f,a,i.join(","))}});c.extend({filter:function(a,d,b){b&&(a=":not("+a+")");return d.length===1?c.find.matchesSelector(d[0],a)?[d[0]]:[]:c.find.matches(a,d)},dir:function(a,d,b){var e=[];for(a=a[d];a&&a.nodeType!==9&&(b===g||a.nodeType!==1||!c(a).is(b));){a.nodeType===1&&e.push(a);a=a[d]}return e},nth:function(a,d,b){for(var e=0;a;a=a[b])if(a.nodeType===1&&++e===(d||1))break;return a},sibling:function(a,d){for(var b=[];a;a=a.nextSibling)a.nodeType===
1&&a!==d&&b.push(a);return b}});var Tb=/ jQuery\d+="(?:\d+|null)"/g,Jb=/^\s+/,Ub=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Vb=/<([\w:]+)/,Wb=/<tbody/i,fc=/<|&#?\w+;/,ab=/<(?:script|object|embed|option|style)/i,tb=/checked\s*(?:[^=]|=\s*.checked.)/i,gc=/\/(java|ecma)script/i,dc=/^\s*<!(?:\[CDATA\[|\-\-)/,Va={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],
td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Va.optgroup=Va.option;Va.tbody=Va.tfoot=Va.colgroup=Va.caption=Va.thead;Va.th=Va.td;c.support.htmlSerialize||(Va._default=[1,"div<div>","</div>"]);c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(d){var b=c(this);b.text(a.call(this,d,b.text()))});if(typeof a!="object"&&a!==g)return this.empty().append((this[0]&&
this[0].ownerDocument||X).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapAll(a.call(this,b))});if(this[0]){var d=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&d.insertBefore(this[0]);d.map(function(){for(var b=this;b.firstChild&&b.firstChild.nodeType===1;)b=b.firstChild;return b}).append(this)}return this},wrapInner:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapInner(a.call(this,d))});
return this.each(function(){var d=c(this),b=d.contents();b.length?b.wrapAll(a):d.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,
this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(d){this.parentNode.insertBefore(d,this)});if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(d){this.parentNode.insertBefore(d,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,
c(arguments[0]).toArray());return a}},remove:function(a,d){for(var b=0,e;(e=this[b])!=null;b++)if(!a||c.filter(a,[e]).length){!d&&e.nodeType===1&&(c.cleanData(e.getElementsByTagName("*")),c.cleanData([e]));e.parentNode&&e.parentNode.removeChild(e)}return this},empty:function(){for(var a=0,d;(d=this[a])!=null;a++)for(d.nodeType===1&&c.cleanData(d.getElementsByTagName("*"));d.firstChild;)d.removeChild(d.firstChild);return this},clone:function(a,d){a=a==null?false:a;d=d==null?a:d;return this.map(function(){return c.clone(this,
a,d)})},html:function(a){if(a===g)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Tb,""):null;if(typeof a=="string"&&!ab.test(a)&&(c.support.leadingWhitespace||!Jb.test(a))&&!Va[(Vb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ub,"<$1></$2>");try{for(var d=0,b=this.length;d<b;d++)this[d].nodeType===1&&(c.cleanData(this[d].getElementsByTagName("*")),this[d].innerHTML=a)}catch(e){this.empty().append(a)}}else c.isFunction(a)?this.each(function(f){var i=c(this);i.html(a.call(this,f,
i.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a))return this.each(function(d){var b=c(this),e=b.html();b.replaceWith(a.call(this,d,e))});typeof a!="string"&&(a=c(a).detach());return this.each(function(){var d=this.nextSibling,b=this.parentNode;c(this).remove();d?c(d).before(a):c(b).append(a)})}return this.length?this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,true)},domManip:function(a,
d,b){var e,f,i,k=a[0],n=[];if(!c.support.checkClone&&arguments.length===3&&typeof k=="string"&&tb.test(k))return this.each(function(){c(this).domManip(a,d,b,true)});if(c.isFunction(k))return this.each(function(w){var C=c(this);a[0]=k.call(this,w,d?C.html():g);C.domManip(a,d,b)});if(this[0]){i=k&&k.parentNode;c.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?(e={fragment:i}):(e=c.buildFragment(a,this,n));i=e.fragment;i.childNodes.length===1?(f=i=i.firstChild):(f=i.firstChild);
if(f){d=d&&c.nodeName(f,"tr");f=0;for(var p=this.length,t=p-1;f<p;f++)b.call(d?c.nodeName(this[f],"table")?this[f].getElementsByTagName("tbody")[0]||this[f].appendChild(this[f].ownerDocument.createElement("tbody")):this[f]:this[f],e.cacheable||p>1&&f<t?c.clone(i,true,true):i)}n.length&&c.each(n,la)}return this}});c.buildFragment=function(a,d,b){var e,f,i,k;d&&d[0]&&(k=d[0].ownerDocument||d[0]);k.createDocumentFragment||(k=X);a.length===1&&typeof a[0]=="string"&&a[0].length<512&&k===X&&a[0].charAt(0)===
"<"&&!ab.test(a[0])&&(c.support.checkClone||!tb.test(a[0]))&&(f=true,i=c.fragments[a[0]],i&&i!==1&&(e=i));e||(e=k.createDocumentFragment(),c.clean(a,k,e,b));f&&(c.fragments[a[0]]=i?e:1);return{fragment:e,cacheable:f}};c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){c.fn[a]=function(b){var e=[];b=c(b);var f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&b.length===1){b[d](this[0]);
return this}f=0;for(var i=b.length;f<i;f++){var k=(f>0?this.clone(true):this).get();c(b[f])[d](k);e=e.concat(k)}return this.pushStack(e,a,b.selector)}});c.extend({clone:function(a,d,b){var e=a.cloneNode(true),f,i,k;if((!c.support.noCloneEvent||!c.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!c.isXMLDoc(a)){r(a,e);f=m(a);i=m(e);for(k=0;f[k];++k)r(f[k],i[k])}if(d){y(a,e);if(b){f=m(a);i=m(e);for(k=0;f[k];++k)y(f[k],i[k])}}return e},clean:function(a,d,b,e){d=d||X;typeof d.createElement==
"undefined"&&(d=d.ownerDocument||d[0]&&d[0].ownerDocument||X);for(var f=[],i,k=0,n;(n=a[k])!=null;k++){typeof n=="number"&&(n+="");if(n){if(typeof n=="string")if(fc.test(n)){n=n.replace(Ub,"<$1></$2>");i=(Vb.exec(n)||["",""])[1].toLowerCase();var p=Va[i]||Va._default,t=p[0],w=d.createElement("div");for(w.innerHTML=p[1]+n+p[2];t--;)w=w.lastChild;if(!c.support.tbody){t=Wb.test(n);p=i==="table"&&!t?w.firstChild&&w.firstChild.childNodes:p[1]==="<table>"&&!t?w.childNodes:[];for(i=p.length-1;i>=0;--i)c.nodeName(p[i],
"tbody")&&!p[i].childNodes.length&&p[i].parentNode.removeChild(p[i])}!c.support.leadingWhitespace&&Jb.test(n)&&w.insertBefore(d.createTextNode(Jb.exec(n)[0]),w.firstChild);n=w.childNodes}else n=d.createTextNode(n);var C;if(!c.support.appendChecked)if(n[0]&&typeof(C=n.length)=="number")for(i=0;i<C;i++)pa(n[i]);else pa(n);n.nodeType?f.push(n):(f=c.merge(f,n))}}if(b){a=function(R){return!R.type||gc.test(R.type)};for(k=0;f[k];k++)if(e&&c.nodeName(f[k],"script")&&(!f[k].type||f[k].type.toLowerCase()===
"text/javascript"))e.push(f[k].parentNode?f[k].parentNode.removeChild(f[k]):f[k]);else{if(f[k].nodeType===1){d=c.grep(f[k].getElementsByTagName("script"),a);f.splice.apply(f,[k+1,0].concat(d))}b.appendChild(f[k])}}return f},cleanData:function(a){for(var d,b,e=c.cache,f=c.expando,i=c.event.special,k=c.support.deleteExpando,n=0,p;(p=a[n])!=null;n++)if(!(p.nodeName&&c.noData[p.nodeName.toLowerCase()]))if(b=p[c.expando]){if((d=e[b]&&e[b][f])&&d.events){for(var t in d.events)i[t]?c.event.remove(p,t):c.removeEvent(p,
t,d.handle);d.handle&&(d.handle.elem=null)}k?delete p[c.expando]:p.removeAttribute&&p.removeAttribute(c.expando);delete e[b]}}});var Xb=/alpha\([^)]*\)/i,hc=/opacity=([^)]*)/,mc=/([A-Z]|^ms)/g,Kb=/^-?\d+(?:px)?$/i,Yb=/^-?\d/,Zb=/^[+\-]=/,ya=/[^+\-\.\de]+/g,ic={position:"absolute",visibility:"hidden",display:"block"},ma=["Left","Right"],Qb=["Top","Bottom"],fb,mb,va;c.fn.css=function(a,d){if(arguments.length===2&&d===g)return this;return c.access(this,a,d,true,function(b,e,f){return f!==g?c.style(b,
e,f):c.css(b,e)})};c.extend({cssHooks:{opacity:{get:function(a,d){if(d){var b=fb(a,"opacity","opacity");return b===""?"1":b}return a.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":c.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,d,b,e){if(a&&a.nodeType!==3&&a.nodeType!==8&&a.style){var f,i=c.camelCase(d),k=a.style,n=c.cssHooks[i];d=c.cssProps[i]||i;if(b===g){if(n&&"get"in n&&(f=
n.get(a,false,e))!==g)return f;return k[d]}e=typeof b;if(!(e==="number"&&isNaN(b)||b==null)){e==="string"&&Zb.test(b)&&(b=+b.replace(ya,"")+parseFloat(c.css(a,d)),e="number");e==="number"&&!c.cssNumber[i]&&(b+="px");if(!n||!("set"in n)||(b=n.set(a,b))!==g)try{k[d]=b}catch(p){}}}},css:function(a,d,b){var e,f;d=c.camelCase(d);f=c.cssHooks[d];d=c.cssProps[d]||d;d==="cssFloat"&&(d="float");if(f&&"get"in f&&(e=f.get(a,true,b))!==g)return e;if(fb)return fb(a,d)},swap:function(a,d,b){var e={};for(var f in d){e[f]=
a.style[f];a.style[f]=d[f]}b.call(a);for(f in d)a.style[f]=e[f]}});c.curCSS=c.css;c.each(["height","width"],function(a,d){c.cssHooks[d]={get:function(b,e,f){var i;if(e){if(b.offsetWidth!==0)return P(b,d,f);c.swap(b,ic,function(){i=P(b,d,f)});return i}},set:function(b,e){if(!Kb.test(e))return e;e=parseFloat(e);if(e>=0)return e+"px"}}});c.support.opacity||(c.cssHooks.opacity={get:function(a,d){return hc.test((d&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":
d?"1":""},set:function(a,d){var b=a.style,e=a.currentStyle;b.zoom=1;var f=c.isNaN(d)?"":"alpha(opacity="+d*100+")";e=e&&e.filter||b.filter||"";b.filter=Xb.test(e)?e.replace(Xb,f):e+" "+f}});c(function(){c.support.reliableMarginRight||(c.cssHooks.marginRight={get:function(a,d){var b;c.swap(a,{display:"inline-block"},function(){d?(b=fb(a,"margin-right","marginRight")):(b=a.style.marginRight)});return b}})});X.defaultView&&X.defaultView.getComputedStyle&&(mb=function(a,d){var b,e;d=d.replace(mc,"-$1").toLowerCase();
if(!(e=a.ownerDocument.defaultView))return g;if(e=e.getComputedStyle(a,null)){b=e.getPropertyValue(d);b===""&&!c.contains(a.ownerDocument.documentElement,a)&&(b=c.style(a,d))}return b});X.documentElement.currentStyle&&(va=function(a,d){var b,e=a.currentStyle&&a.currentStyle[d],f=a.runtimeStyle&&a.runtimeStyle[d],i=a.style;!Kb.test(e)&&Yb.test(e)&&(b=i.left,f&&(a.runtimeStyle.left=a.currentStyle.left),i.left=d==="fontSize"?"1em":e||0,e=i.pixelLeft+"px",i.left=b,f&&(a.runtimeStyle.left=f));return e===
""?"auto":e});fb=mb||va;c.expr&&c.expr.filters&&(c.expr.filters.hidden=function(a){var d=a.offsetHeight;return a.offsetWidth===0&&d===0||!c.support.reliableHiddenOffsets&&(a.style.display||c.css(a,"display"))==="none"},c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)});var Ab=/%20/g,eb=/\[\]$/,Lb=/\r?\n/g,nb=/#.*$/,Mb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,$b=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ea=/^(?:GET|HEAD)$/,Ya=/^\/\//,
ob=/\?/,Qa=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ac=/^(?:select|textarea)/i,cc=/\s+/,bc=/([?&])_=[^&]*/,Ta=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,W=c.fn.load,cb={},Za={},Wa,O;try{Wa=V.href}catch(hb){Wa=X.createElement("a");Wa.href="";Wa=Wa.href}O=Ta.exec(Wa.toLowerCase())||[];c.fn.extend({load:function(a,d,b){if(typeof a!="string"&&W)return W.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}e="GET";d&&
(c.isFunction(d)?(b=d,d=g):typeof d=="object"&&(d=c.param(d,c.ajaxSettings.traditional),e="POST"));var i=this;c.ajax({url:a,type:e,dataType:"html",data:d,complete:function(k,n,p){p=k.responseText;k.isResolved()&&(k.done(function(t){p=t}),i.html(f?c("<div>").append(p.replace(Qa,"")).find(f):p));b&&i.each(b,[p,n,k])}});return this},serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||ac.test(this.nodeName)||$b.test(this.type))}).map(function(a,d){var b=c(this).val();return b==null?null:c.isArray(b)?c.map(b,function(e){return{name:d.name,value:e.replace(Lb,"\r\n")}}):{name:d.name,value:b.replace(Lb,"\r\n")}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,d){c.fn[d]=function(b){return this.bind(d,b)}});c.each(["get","post"],function(a,d){c[d]=function(b,e,f,i){c.isFunction(e)&&(i=i||f,f=e,e=
g);return c.ajax({type:d,url:b,data:e,success:f,dataType:i})}});c.extend({getScript:function(a,d){return c.get(a,g,d,"script")},getJSON:function(a,d,b){return c.get(a,d,b,"json")},ajaxSetup:function(a,d){d?c.extend(true,a,c.ajaxSettings,d):(d=a,a=c.extend(true,c.ajaxSettings,d));for(var b in{context:1,url:1})b in d?(a[b]=d[b]):b in c.ajaxSettings&&(a[b]=c.ajaxSettings[b]);return a},ajaxSettings:{url:Wa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(O[1]),global:true,type:"GET",
contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":h.String,"text html":true,"text json":c.parseJSON,"text xml":c.parseXML}},ajaxPrefilter:N(cb),ajaxTransport:N(Za),ajax:function(a,d){function b(D,J,U,Z){if(Ba!==2){Ba=2;Ia&&clearTimeout(Ia);
ka=g;R=Z||"";u.readyState=D?4:0;var ra,Ma,Ja;if(U){Z=e;var Sa=u,v=Z.contents,K=Z.dataTypes,da=Z.responseFields,Y,qa,Aa,Da;for(qa in da)qa in U&&(Sa[da[qa]]=U[qa]);for(;K[0]==="*";){K.shift();Y===g&&(Y=Z.mimeType||Sa.getResponseHeader("content-type"))}if(Y)for(qa in v)if(v[qa]&&v[qa].test(Y)){K.unshift(qa);break}if(K[0]in U)Aa=K[0];else{for(qa in U){if(!K[0]||Z.converters[qa+" "+K[0]]){Aa=qa;break}Da||(Da=qa)}Aa=Aa||Da}if(Aa){Aa!==K[0]&&K.unshift(Aa);U=U[Aa]}else U=void 0}else U=g;U=U;if(D>=200&&D<
300||D===304){if(e.ifModified){if(Y=u.getResponseHeader("Last-Modified"))c.lastModified[t]=Y;if(Y=u.getResponseHeader("Etag"))c.etag[t]=Y}if(D===304){J="notmodified";ra=true}else try{Y=e;U=U;Y.dataFilter&&(U=Y.dataFilter(U,Y.dataType));var Fa=Y.dataTypes;qa={};var vb,wb,oc=Fa.length,jc,Bb=Fa[0],Nb,nc,Cb,Ib,Ob;for(vb=1;vb<oc;vb++){if(vb===1)for(wb in Y.converters)typeof wb=="string"&&(qa[wb.toLowerCase()]=Y.converters[wb]);Nb=Bb;Bb=Fa[vb];if(Bb==="*")Bb=Nb;else if(Nb!=="*"&&Nb!==Bb){nc=Nb+" "+Bb;Cb=
qa[nc]||qa["* "+Bb];if(!Cb){Ob=g;for(Ib in qa){jc=Ib.split(" ");if(jc[0]===Nb||jc[0]==="*")if(Ob=qa[jc[1]+" "+Bb]){Ib=qa[Ib];Ib===true?(Cb=Ob):Ob===true&&(Cb=Ib);break}}}!Cb&&!Ob&&c.error("No conversion from "+nc.replace(" "," to "));Cb!==true&&(U=Cb?Cb(U):Ob(Ib(U)))}}Ma=U;J="success";ra=true}catch(pc){J="parsererror";Ja=pc}}else{Ja=J;if(!J||D){J="error";D<0&&(D=0)}}u.status=D;u.statusText=J;ra?k.resolveWith(f,[Ma,J,u]):k.rejectWith(f,[u,J,Ja]);u.statusCode(p);p=g;Ca&&i.trigger("ajax"+(ra?"Success":
"Error"),[u,e,ra?Ma:Ja]);n.resolveWith(f,[u,J]);Ca&&(i.trigger("ajaxComplete",[u,e]),--c.active||c.event.trigger("ajaxStop"))}}typeof a=="object"&&(d=a,a=g);d=d||{};var e=c.ajaxSetup({},d),f=e.context||e,i=f!==e&&(f.nodeType||f instanceof c)?c(f):c.event,k=c.Deferred(),n=c._Deferred(),p=e.statusCode||{},t,w={},C={},R,ba,ka,Ia,za,Ba=0,Ca,o,u={readyState:0,setRequestHeader:function(D,J){if(!Ba){var U=D.toLowerCase();D=C[U]=C[U]||D;w[D]=J}return this},getAllResponseHeaders:function(){return Ba===2?R:
null},getResponseHeader:function(D){var J;if(Ba===2){if(!ba)for(ba={};J=Mb.exec(R);)ba[J[1].toLowerCase()]=J[2];J=ba[D.toLowerCase()]}return J===g?null:J},overrideMimeType:function(D){Ba||(e.mimeType=D);return this},abort:function(D){D=D||"abort";ka&&ka.abort(D);b(0,D);return this}};k.promise(u);u.success=u.done;u.error=u.fail;u.complete=n.done;u.statusCode=function(D){if(D){var J;if(Ba<2)for(J in D)p[J]=[p[J],D[J]];else{J=D[u.status];u.then(J,J)}}return this};e.url=((a||e.url)+"").replace(nb,"").replace(Ya,
O[1]+"//");e.dataTypes=c.trim(e.dataType||"*").toLowerCase().split(cc);e.crossDomain==null&&(za=Ta.exec(e.url.toLowerCase()),e.crossDomain=!(!za||za[1]==O[1]&&za[2]==O[2]&&(za[3]||(za[1]==="http:"?80:443))==(O[3]||(O[1]==="http:"?80:443))));e.data&&e.processData&&typeof e.data!="string"&&(e.data=c.param(e.data,e.traditional));z(cb,e,d,u);if(Ba===2)return false;Ca=e.global;e.type=e.type.toUpperCase();e.hasContent=!Ea.test(e.type);Ca&&c.active++===0&&c.event.trigger("ajaxStart");if(!e.hasContent){e.data&&
(e.url+=(ob.test(e.url)?"&":"?")+e.data);t=e.url;if(e.cache===false){za=c.now();var F=e.url.replace(bc,"$1_="+za);e.url=F+(F===e.url?(ob.test(e.url)?"&":"?")+"_="+za:"")}}(e.data&&e.hasContent&&e.contentType!==false||d.contentType)&&u.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(t=t||e.url,c.lastModified[t]&&u.setRequestHeader("If-Modified-Since",c.lastModified[t]),c.etag[t]&&u.setRequestHeader("If-None-Match",c.etag[t]));u.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?
e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", */*; q=0.01":""):e.accepts["*"]);for(o in e.headers)u.setRequestHeader(o,e.headers[o]);if(e.beforeSend&&(e.beforeSend.call(f,u,e)===false||Ba===2)){u.abort();return false}for(o in{success:1,error:1,complete:1})u[o](e[o]);if(ka=z(Za,e,d,u)){u.readyState=1;Ca&&i.trigger("ajaxSend",[u,e]);e.async&&e.timeout>0&&(Ia=setTimeout(function(){u.abort("timeout")},e.timeout));try{Ba=1;ka.send(w,b)}catch(I){status<2?b(-1,I):c.error(I)}}else b(-1,"No Transport");
return u},param:function(a,d){var b=[],e=function(i,k){k=c.isFunction(k)?k():k;b[b.length]=encodeURIComponent(i)+"="+encodeURIComponent(k)};d===g&&(d=c.ajaxSettings.traditional);if(c.isArray(a)||a.jquery&&!c.isPlainObject(a))c.each(a,function(){e(this.name,this.value)});else for(var f in a)B(f,a[f],d,e);return b.join("&").replace(Ab,"+")}});c.extend({active:0,lastModified:{},etag:{}});var ub=c.now(),Db=/(\=)\?(&|$)|\?\?/i;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return c.expando+"_"+
ub++}});c.ajaxPrefilter("json jsonp",function(a,d,b){d=a.contentType==="application/x-www-form-urlencoded"&&typeof a.data=="string";if(a.dataTypes[0]==="jsonp"||a.jsonp!==false&&(Db.test(a.url)||d&&Db.test(a.data))){var e,f=a.jsonpCallback=c.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,i=h[f],k=a.url,n=a.data,p="$1"+f+"$2";a.jsonp!==false&&(k=k.replace(Db,p),a.url===k&&(d&&(n=n.replace(Db,p)),a.data===n&&(k+=(/\?/.test(k)?"&":"?")+a.jsonp+"="+f)));a.url=k;a.data=n;h[f]=function(t){e=
[t]};b.always(function(){h[f]=i;e&&c.isFunction(i)&&h[f](e[0])});a.converters["script json"]=function(){e||c.error(f+" was not called");return e[0]};a.dataTypes[0]="json";return"script"}});c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){c.globalEval(a);return a}}});c.ajaxPrefilter("script",function(a){a.cache===g&&(a.cache=false);a.crossDomain&&
(a.type="GET",a.global=false)});c.ajaxTransport("script",function(a){if(a.crossDomain){var d,b=X.head||X.getElementsByTagName("head")[0]||X.documentElement;return{send:function(e,f){d=X.createElement("script");d.async="async";a.scriptCharset&&(d.charset=a.scriptCharset);d.src=a.url;d.onload=d.onreadystatechange=function(i,k){if(k||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null;b&&d.parentNode&&b.removeChild(d);d=g;k||f(200,"success")}};b.insertBefore(d,b.firstChild)},
abort:function(){d&&d.onload(0,1)}}}});var bb=h.ActiveXObject?function(){for(var a in pb)pb[a](0,1)}:false,Ua=0,pb;c.ajaxSettings.xhr=h.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&G()))a:{try{a=new h.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}a=void 0}return a}:G;(function(a){c.extend(c.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(c.ajaxSettings.xhr());c.support.ajax&&c.ajaxTransport(function(a){if(!a.crossDomain||c.support.cors){var d;return{send:function(b,e){var f=a.xhr(),
i,k;a.username?f.open(a.type,a.url,a.async,a.username,a.password):f.open(a.type,a.url,a.async);if(a.xhrFields)for(k in a.xhrFields)f[k]=a.xhrFields[k];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType);!a.crossDomain&&!b["X-Requested-With"]&&(b["X-Requested-With"]="XMLHttpRequest");try{for(k in b)f.setRequestHeader(k,b[k])}catch(n){}f.send(a.hasContent&&a.data||null);d=function(p,t){var w,C,R,ba,ka;try{if(d&&(t||f.readyState===4)){d=g;i&&(f.onreadystatechange=c.noop,bb&&delete pb[i]);
if(t)f.readyState!==4&&f.abort();else{w=f.status;R=f.getAllResponseHeaders();ba={};(ka=f.responseXML)&&ka.documentElement&&(ba.xml=ka);ba.text=f.responseText;try{C=f.statusText}catch(Ia){C=""}!w&&a.isLocal&&!a.crossDomain?(w=ba.text?200:404):w===1223&&(w=204)}}}catch(za){t||e(-1,za)}ba&&e(w,C,ba,R)};!a.async||f.readyState===4?d():(i=++Ua,bb&&(pb||(pb={},c(h).unload(bb)),pb[i]=d),f.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var db={},Xa,Ha,ib=/^(?:toggle|show|hide)$/,kc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
jb,Pa=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],qb,Eb=h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame||h.oRequestAnimationFrame;c.fn.extend({show:function(a,d,b){var e;if(a||a===0)return this.animate(q("show",3),a,d,b);d=0;for(b=this.length;d<b;d++){a=this[d];a.style&&(e=a.style.display,!c._data(a,"olddisplay")&&e==="none"&&(e=a.style.display=""),e===""&&c.css(a,"display")==="none"&&
c._data(a,"olddisplay",l(a.nodeName)))}for(d=0;d<b;d++){a=this[d];if(a.style){e=a.style.display;if(e===""||e==="none")a.style.display=c._data(a,"olddisplay")||""}}return this},hide:function(a,d,b){if(a||a===0)return this.animate(q("hide",3),a,d,b);a=0;for(d=this.length;a<d;a++)if(this[a].style){b=c.css(this[a],"display");b!=="none"&&!c._data(this[a],"olddisplay")&&c._data(this[a],"olddisplay",b)}for(a=0;a<d;a++)this[a].style&&(this[a].style.display="none");return this},_toggle:c.fn.toggle,toggle:function(a,
d,b){var e=typeof a=="boolean";c.isFunction(a)&&c.isFunction(d)?this._toggle.apply(this,arguments):a==null||e?this.each(function(){var f=e?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(q("toggle",3),a,d,b);return this},fadeTo:function(a,d,b,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:d},a,b,e)},animate:function(a,d,b,e){var f=c.speed(d,b,e);if(c.isEmptyObject(a))return this.each(f.complete,[false]);a=c.extend({},a);return this[f.queue===false?
"each":"queue"](function(){f.queue===false&&c._mark(this);var i=c.extend({},f),k=this.nodeType===1,n=k&&c(this).is(":hidden"),p,t,w,C,R,ba,ka,Ia;i.animatedProperties={};for(w in a){p=c.camelCase(w);w!==p&&(a[p]=a[w],delete a[w]);t=a[p];c.isArray(t)?(i.animatedProperties[p]=t[1],t=a[p]=t[0]):(i.animatedProperties[p]=i.specialEasing&&i.specialEasing[p]||i.easing||"swing");if(t==="hide"&&n||t==="show"&&!n)return i.complete.call(this);k&&(p==="height"||p==="width")&&(i.overflow=[this.style.overflow,this.style.overflowX,
this.style.overflowY],c.css(this,"display")==="inline"&&c.css(this,"float")==="none"&&(c.support.inlineBlockNeedsLayout?(C=l(this.nodeName),C==="inline"?(this.style.display="inline-block"):(this.style.display="inline",this.style.zoom=1)):(this.style.display="inline-block")))}i.overflow!=null&&(this.style.overflow="hidden");for(w in a){k=new c.fx(this,i,w);t=a[w];ib.test(t)?k[t==="toggle"?n?"show":"hide":t]():(R=kc.exec(t),ba=k.cur(),R?(ka=parseFloat(R[2]),Ia=R[3]||(c.cssNumber[w]?"":"px"),Ia!=="px"&&
(c.style(this,w,(ka||1)+Ia),ba=(ka||1)/k.cur()*ba,c.style(this,w,ba+Ia)),R[1]&&(ka=(R[1]==="-="?-1:1)*ka+ba),k.custom(ba,ka,Ia)):k.custom(ba,t,""))}return true})},stop:function(a,d){a&&this.queue([]);this.each(function(){var b=c.timers,e=b.length;for(d||c._unmark(true,this);e--;)b[e].elem===this&&(d&&b[e](true),b.splice(e,1))});d||this.dequeue();return this}});c.each({slideDown:q("show",1),slideUp:q("hide",1),slideToggle:q("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},
function(a,d){c.fn[a]=function(b,e,f){return this.animate(d,b,e,f)}});c.extend({speed:function(a,d,b){var e=a&&typeof a=="object"?c.extend({},a):{complete:b||!b&&d||c.isFunction(a)&&a,duration:a,easing:b&&d||d&&!c.isFunction(d)&&d};e.duration=c.fx.off?0:typeof e.duration=="number"?e.duration:e.duration in c.fx.speeds?c.fx.speeds[e.duration]:c.fx.speeds._default;e.old=e.complete;e.complete=function(f){c.isFunction(e.old)&&e.old.call(this);e.queue!==false?c.dequeue(this):f!==false&&c._unmark(this)};
return e},easing:{linear:function(a,d,b,e){return b+e*a},swing:function(a,d,b,e){return(-Math.cos(a*Math.PI)/2+0.5)*e+b}},timers:[],fx:function(a,d,b){this.options=d;this.elem=a;this.prop=b;d.orig=d.orig||{}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||c.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,d=c.css(this.elem,
this.prop);return isNaN(a=parseFloat(d))?!d||d==="auto"?0:d:a},custom:function(a,d,b){function e(n){return f.step(n)}var f=this,i=c.fx,k;this.startTime=qb||x();this.start=a;this.end=d;this.unit=b||this.unit||(c.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;e.elem=this.elem;e()&&c.timers.push(e)&&!jb&&(Eb?(jb=true,k=function(){jb&&(Eb(k),i.tick())},Eb(k)):(jb=setInterval(i.tick,i.interval)))},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=
true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var d=qb||x(),b=true,e=this.elem,f=this.options,i,k;if(a||d>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=true;for(i in f.animatedProperties)f.animatedProperties[i]!==true&&(b=false);if(b){f.overflow!=
null&&!c.support.shrinkWrapBlocks&&c.each(["","X","Y"],function(p,t){e.style["overflow"+t]=f.overflow[p]});f.hide&&c(e).hide();if(f.hide||f.show)for(var n in f.animatedProperties)c.style(e,n,f.orig[n]);f.complete.call(e)}return false}f.duration==Infinity?(this.now=d):(k=d-this.startTime,this.state=k/f.duration,this.pos=c.easing[f.animatedProperties[this.prop]](this.state,k,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return true}};c.extend(c.fx,{tick:function(){for(var a=
c.timers,d=0;d<a.length;++d)a[d]()||a.splice(d--,1);a.length||c.fx.stop()},interval:13,stop:function(){clearInterval(jb);jb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?(a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit):(a.elem[a.prop]=a.now)}}});c.expr&&c.expr.filters&&(c.expr.filters.animated=function(a){return c.grep(c.timers,function(d){return a===
d.elem}).length});var $a=/^t(?:able|d|h)$/i,Pb=/^(?:body|html)$/i;"getBoundingClientRect"in X.documentElement?(c.fn.offset=function(a){var d=this[0],b;if(a)return this.each(function(k){c.offset.setOffset(this,a,k)});if(!d||!d.ownerDocument)return null;if(d===d.ownerDocument.body)return c.offset.bodyOffset(d);try{b=d.getBoundingClientRect()}catch(e){}var f=d.ownerDocument,i=f.documentElement;if(!b||!c.contains(i,d))return b?{top:b.top,left:b.left}:{top:0,left:0};d=f.body;f=j(f);return{top:b.top+(f.pageYOffset||
c.support.boxModel&&i.scrollTop||d.scrollTop)-(i.clientTop||d.clientTop||0),left:b.left+(f.pageXOffset||c.support.boxModel&&i.scrollLeft||d.scrollLeft)-(i.clientLeft||d.clientLeft||0)}}):(c.fn.offset=function(a){var d=this[0];if(a)return this.each(function(w){c.offset.setOffset(this,a,w)});if(!d||!d.ownerDocument)return null;if(d===d.ownerDocument.body)return c.offset.bodyOffset(d);c.offset.initialize();var b,e=d.offsetParent,f=d,i=d.ownerDocument,k=i.documentElement,n=i.body;b=(i=i.defaultView)?
i.getComputedStyle(d,null):d.currentStyle;for(var p=d.offsetTop,t=d.offsetLeft;(d=d.parentNode)&&d!==n&&d!==k;){if(c.offset.supportsFixedPosition&&b.position==="fixed")break;b=i?i.getComputedStyle(d,null):d.currentStyle;p-=d.scrollTop;t-=d.scrollLeft;d===e&&(p+=d.offsetTop,t+=d.offsetLeft,c.offset.doesNotAddBorder&&(!c.offset.doesAddBorderForTableAndCells||!$a.test(d.nodeName))&&(p+=parseFloat(b.borderTopWidth)||0,t+=parseFloat(b.borderLeftWidth)||0),f=e,e=d.offsetParent);c.offset.subtractsBorderForOverflowNotVisible&&
b.overflow!=="visible"&&(p+=parseFloat(b.borderTopWidth)||0,t+=parseFloat(b.borderLeftWidth)||0);b=b}if(b.position==="relative"||b.position==="static"){p+=n.offsetTop;t+=n.offsetLeft}c.offset.supportsFixedPosition&&b.position==="fixed"&&(p+=Math.max(k.scrollTop,n.scrollTop),t+=Math.max(k.scrollLeft,n.scrollLeft));return{top:p,left:t}});c.offset={initialize:function(){var a=X.body,d=X.createElement("div"),b,e,f,i=parseFloat(c.css(a,"marginTop"))||0;c.extend(d.style,{position:"absolute",top:0,left:0,
margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});d.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a.insertBefore(d,a.firstChild);b=d.firstChild;e=b.firstChild;f=b.nextSibling.firstChild.firstChild;this.doesNotAddBorder=e.offsetTop!==
5;this.doesAddBorderForTableAndCells=f.offsetTop===5;e.style.position="fixed";e.style.top="20px";this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15;e.style.position=e.style.top="";b.style.overflow="hidden";b.style.position="relative";this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i;a.removeChild(d);c.offset.initialize=c.noop},bodyOffset:function(a){var d=a.offsetTop,b=a.offsetLeft;c.offset.initialize();c.offset.doesNotIncludeMarginInBodyOffset&&
(d+=parseFloat(c.css(a,"marginTop"))||0,b+=parseFloat(c.css(a,"marginLeft"))||0);return{top:d,left:b}},setOffset:function(a,d,b){var e=c.css(a,"position");e==="static"&&(a.style.position="relative");var f=c(a),i=f.offset(),k=c.css(a,"top"),n=c.css(a,"left"),p={},t={},w,C;(e==="absolute"||e==="fixed")&&c.inArray("auto",[k,n])>-1?(t=f.position(),w=t.top,C=t.left):(w=parseFloat(k)||0,C=parseFloat(n)||0);c.isFunction(d)&&(d=d.call(a,b,i));d.top!=null&&(p.top=d.top-i.top+w);d.left!=null&&(p.left=d.left-
i.left+C);"using"in d?d.using.call(a,p):f.css(p)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],d=this.offsetParent(),b=this.offset(),e=Pb.test(d[0].nodeName)?{top:0,left:0}:d.offset();b.top-=parseFloat(c.css(a,"marginTop"))||0;b.left-=parseFloat(c.css(a,"marginLeft"))||0;e.top+=parseFloat(c.css(d[0],"borderTopWidth"))||0;e.left+=parseFloat(c.css(d[0],"borderLeftWidth"))||0;return{top:b.top-e.top,left:b.left-e.left}},offsetParent:function(){return this.map(function(){for(var a=
this.offsetParent||X.body;a&&!Pb.test(a.nodeName)&&c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,d){var b="scroll"+d;c.fn[b]=function(e){var f,i;if(e===g){f=this[0];if(!f)return null;return(i=j(f))?"pageXOffset"in i?i[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&i.document.documentElement[b]||i.document.body[b]:f[b]}return this.each(function(){(i=j(this))?i.scrollTo(a?c(i).scrollLeft():e,a?e:c(i).scrollTop()):(this[b]=e)})}});c.each(["Height",
"Width"],function(a,d){var b=d.toLowerCase();c.fn["inner"+d]=function(){var e=this[0];return e&&e.style?parseFloat(c.css(e,b,"padding")):null};c.fn["outer"+d]=function(e){var f=this[0];return f&&f.style?parseFloat(c.css(f,b,e?"margin":"border")):null};c.fn[b]=function(e){var f=this[0];if(!f)return e==null?null:this;if(c.isFunction(e))return this.each(function(k){var n=c(this);n[b](e.call(this,k,n[b]()))});if(c.isWindow(f)){var i=f.document.documentElement["client"+d];return f.document.compatMode===
"CSS1Compat"&&i||f.document.body["client"+d]||i}if(f.nodeType===9)return Math.max(f.documentElement["client"+d],f.body["scroll"+d],f.documentElement["scroll"+d],f.body["offset"+d],f.documentElement["offset"+d]);if(e===g){f=c.css(f,b);i=parseFloat(f);return c.isNaN(i)?f:i}return this.css(b,typeof e=="string"?e:e+"px")}});h.jQuery=h.$=c})(window);
(function(h,g){var j,l=/:([\w\d]+)/g,q=/\?([^#]*)$/,s=function(m){return Array.prototype.slice.call(m)},x=function(m){return Object.prototype.toString.call(m)==="[object Function]"},G=function(m){return Object.prototype.toString.call(m)==="[object Array]"},B=function(m){return decodeURIComponent((m||"").replace(/\+/g," "))},z=encodeURIComponent,N=function(m){return String(m).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},P=function(m){return function(r,
y){return this.route.apply(this,[m,r,y])}},la={},pa=!!(g.history&&history.pushState),na=[];j=function(){var m=s(arguments),r,y;j.apps=j.apps||{};if(m.length===0||m[0]&&x(m[0]))return j.apply(j,["body"].concat(m));else if(typeof(y=m.shift())=="string"){r=j.apps[y]||new j.Application;r.element_selector=y;m.length>0&&h.each(m,function(E,ca){r.use(ca)});r.element_selector!=y&&delete j.apps[y];return j.apps[r.element_selector]=r}};j.VERSION="0.7.0";j.addLogger=function(m){na.push(m)};j.log=function(){var m=
s(arguments);m.unshift("["+Date()+"]");h.each(na,function(r,y){y.apply(j,m)})};if(typeof g.console!="undefined")x(g.console.log.apply)?j.addLogger(function(){g.console.log.apply(g.console,arguments)}):j.addLogger(function(){g.console.log(arguments)});else typeof console!="undefined"&&j.addLogger(function(){console.log.apply(console,arguments)});h.extend(j,{makeArray:s,isFunction:x,isArray:G});j.Object=function(m){return h.extend(this,m||{})};h.extend(j.Object.prototype,{escapeHTML:N,h:N,toHash:function(){var m=
{};h.each(this,function(r,y){x(y)||(m[r]=y)});return m},toHTML:function(){var m="";h.each(this,function(r,y){x(y)||(m+="<strong>"+r+"</strong> "+y+"<br />")});return m},keys:function(m){var r=[];for(var y in this)if(!x(this[y])||!m)r.push(y);return r},has:function(m){return this[m]&&h.trim(this[m].toString())!==""},join:function(){var m=s(arguments),r=m.shift();return m.join(r)},log:function(){j.log.apply(j,arguments)},toString:function(m){var r=[];h.each(this,function(y,E){if(!x(E)||m)r.push('"'+
y+'": '+E.toString())});return"Sammy.Object: {"+r.join(",")+"}"}});j.DefaultLocationProxy=function(m,r){this.app=m;this.is_native=false;this.has_history=pa;this._startPolling(r)};j.DefaultLocationProxy.fullPath=function(m){var r=m.toString().match(/^[^#]*(#.+)$/);return[m.pathname,m.search,r?r[1]:""].join("")};j.DefaultLocationProxy.prototype={bind:function(){var m=this,r=this.app,y=j.DefaultLocationProxy;h(g).bind("hashchange."+this.app.eventNamespace(),function(E,ca){if(m.is_native===false&&!ca){m.is_native=
true;g.clearInterval(y._interval)}r.trigger("location-changed")});if(pa&&!r.disable_push_state){h(g).bind("popstate."+this.app.eventNamespace(),function(){r.trigger("location-changed")});h("a").live("click.history-"+this.app.eventNamespace(),function(E){var ca=y.fullPath(this);if(this.hostname==g.location.hostname&&r.lookupRoute("get",ca)){E.preventDefault();m.setLocation(ca);return false}})}if(!y._bindings)y._bindings=0;y._bindings++},unbind:function(){h(g).unbind("hashchange."+this.app.eventNamespace());
h(g).unbind("popstate."+this.app.eventNamespace());h("a").die("click.history-"+this.app.eventNamespace());j.DefaultLocationProxy._bindings--;j.DefaultLocationProxy._bindings<=0&&g.clearInterval(j.DefaultLocationProxy._interval)},getLocation:function(){return j.DefaultLocationProxy.fullPath(g.location)},setLocation:function(m){if(/^([^#\/]|$)/.test(m))m=pa?"/"+m:"#!/"+m;if(m!=this.getLocation())if(pa&&/^\//.test(m)){history.pushState({path:m},g.title,m);this.app.trigger("location-changed")}else return g.location=
m},_startPolling:function(m){var r=this;if(!j.DefaultLocationProxy._interval){m||(m=10);var y=function(){var E=r.getLocation();if(typeof j.DefaultLocationProxy._last_location=="undefined"||E!=j.DefaultLocationProxy._last_location)g.setTimeout(function(){h(g).trigger("hashchange",[true])},0);j.DefaultLocationProxy._last_location=E};y();j.DefaultLocationProxy._interval=g.setInterval(y,m)}}};j.Application=function(m){var r=this;this.routes={};this.listeners=new j.Object({});this.arounds=[];this.befores=
[];this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1E3,10);this.context_prototype=function(){j.EventContext.apply(this,arguments)};this.context_prototype.prototype=new j.EventContext;x(m)&&m.apply(this,[this]);this._location_proxy||this.setLocationProxy(new j.DefaultLocationProxy(this,this.run_interval_every));this.debug&&this.bindToAllEvents(function(y,E){r.log(r.toString(),y.cleaned_type,E||{})})};j.Application.prototype=h.extend({},j.Object.prototype,{ROUTE_VERBS:["get","post","put",
"delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:false,element_selector:"body",debug:false,raise_errors:false,run_interval_every:50,disable_push_state:false,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(m){return m?h(this.element_selector).find(m):
h(this.element_selector)},use:function(){var m=s(arguments),r=m.shift(),y=r||"";try{m.unshift(this);if(typeof r=="string"){y="Sammy."+r;r=j[r]}r.apply(this,m)}catch(E){if(typeof r==="undefined")this.error("Plugin Error: called use() but plugin ("+y.toString()+") is not defined",E);else x(r)?this.error("Plugin Error",E):this.error("Plugin Error: called use() but '"+y.toString()+"' is not a function",E)}return this},setLocationProxy:function(m){var r=this._location_proxy;this._location_proxy=m;if(this.isRunning()){r&&
r.unbind();this._location_proxy.bind()}},route:function(m,r,y){var E=this,ca=[],oa,T;if(!y&&x(r)){y=r=m;m="any"}m=m.toLowerCase();if(r.constructor==String){for(l.lastIndex=0;(T=l.exec(r))!==null;)ca.push(T[1]);r=new RegExp(r.replace(l,"([^/]+)")+"$")}if(typeof y=="string")y=E[y];oa=function(fa){var ga={verb:fa,path:r,callback:y,param_names:ca};E.routes[fa]=E.routes[fa]||[];E.routes[fa].push(ga)};m==="any"?h.each(this.ROUTE_VERBS,function(fa,ga){oa(ga)}):oa(m);return this},get:P("get"),post:P("post"),
put:P("put"),del:P("delete"),any:P("any"),mapRoutes:function(m){var r=this;h.each(m,function(y,E){r.route.apply(r,E)});return this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(m,r,y){var E=this;if(typeof y=="undefined")y=r;r=function(ca,oa){var T;if(oa&&oa.context){T=oa.context;delete oa.context}else T=new E.context_prototype(E,"bind",ca.type,oa,ca.target);ca.cleaned_type=ca.type.replace(E.eventNamespace(),"");y.apply(T,[ca,oa])};this.listeners[m]||(this.listeners[m]=
[]);this.listeners[m].push(r);this.isRunning()&&this._listen(m,r);return this},trigger:function(m,r){this.$element().trigger([m,this.eventNamespace()].join("."),[r]);return this},refresh:function(){this.last_location=null;this.trigger("location-changed");return this},before:function(m,r){if(x(m)){r=m;m={}}this.befores.push([m,r]);return this},after:function(m){return this.bind("event-context-after",m)},around:function(m){this.arounds.push(m);return this},isRunning:function(){return this._running},
helpers:function(m){h.extend(this.context_prototype.prototype,m);return this},helper:function(m,r){this.context_prototype.prototype[m]=r;return this},run:function(m){if(this.isRunning())return false;var r=this;h.each(this.listeners.toHash(),function(y,E){h.each(E,function(ca,oa){r._listen(y,oa)})});this.trigger("run",{start_url:m});this._running=true;this.last_location=null;!/\#(.+)/.test(this.getLocation())&&typeof m!="undefined"&&this.setLocation(m);this._checkLocation();this._location_proxy.bind();
this.bind("location-changed",function(){r._checkLocation()});this.bind("submit",function(y){return r._checkFormSubmission(h(y.target).closest("form"))===false?y.preventDefault():false});h(g).bind("beforeunload",function(){r.unload()});return this.trigger("changed")},unload:function(){if(!this.isRunning())return false;var m=this;this.trigger("unload");this._location_proxy.unbind();this.$element().unbind("submit").removeClass(m.eventNamespace());h.each(this.listeners.toHash(),function(r,y){h.each(y,
function(E,ca){m._unlisten(r,ca)})});this._running=false;return this},bindToAllEvents:function(m){var r=this;h.each(this.APP_EVENTS,function(y,E){r.bind(E,m)});h.each(this.listeners.keys(true),function(y,E){h.inArray(E,r.APP_EVENTS)==-1&&r.bind(E,m)});return this},routablePath:function(m){return m.replace(q,"")},lookupRoute:function(m,r){var y=false,E=0,ca,oa;if(typeof this.routes[m]!="undefined")for(ca=this.routes[m].length;E<ca;E++){oa=this.routes[m][E];if(this.routablePath(r).match(oa.path)){y=
oa;break}}return y},runRoute:function(m,r,y,E){var ca=this,oa=this.lookupRoute(m,r),T,fa,ga,xa,Oa,Ra,X;this.log("runRoute",[m,r].join(" "));this.trigger("run-route",{verb:m,path:r,params:y});if(typeof y=="undefined")y={};h.extend(y,this._parseQueryString(r));if(oa){this.trigger("route-found",{route:oa});if((Ra=oa.path.exec(this.routablePath(r)))!==null){Ra.shift();h.each(Ra,function(V,c){if(oa.param_names[V])y[oa.param_names[V]]=B(c);else{if(!y.splat)y.splat=[];y.splat.push(B(c))}})}T=new this.context_prototype(this,
m,r,y,E);E=this.arounds.slice(0);ga=this.befores.slice(0);Oa=[T].concat(y.splat);fa=function(){for(var V;ga.length>0;){xa=ga.shift();if(ca.contextMatchesOptions(T,xa[0])){V=xa[1].apply(T,[T]);if(V===false)return false}}ca.last_route=oa;T.trigger("event-context-before",{context:T});V=oa.callback.apply(T,Oa);T.trigger("event-context-after",{context:T});return V};h.each(E.reverse(),function(V,c){var A=fa;fa=function(){return c.apply(T,[A])}});try{X=fa()}catch(Q){this.error(["500 Error",m,r].join(" "),
Q)}return X}else return this.notFound(m,r)},contextMatchesOptions:function(m,r,y){r=r;if(typeof r==="undefined"||r=={})return true;if(typeof y==="undefined")y=true;if(typeof r==="string"||x(r.test))r={path:r};if(r.only)return this.contextMatchesOptions(m,r.only,true);else if(r.except)return this.contextMatchesOptions(m,r.except,false);var E=true,ca=true;if(r.path){if(!x(r.path.test))r.path=new RegExp(r.path.toString()+"$");E=r.path.test(m.path)}if(r.verb)ca=typeof r.verb==="string"?r.verb===m.verb:
r.verb.indexOf(m.verb)>-1;return y?ca&&E:!(ca&&E)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(m){return this._location_proxy.setLocation(m)},swap:function(m){return this.$element().html(m)},templateCache:function(m,r){return typeof r!="undefined"?(la[m]=r):la[m]},clearTemplateCache:function(){return la={}},notFound:function(m,r){var y=this.error(["404 Not Found",m,r].join(" "));return m==="get"?y:true},error:function(m,r){r||(r=new Error);r.message=[m,r.message].join(" ");
this.trigger("error",{message:r.message,error:r});if(this.raise_errors)throw r;else this.log(r.message,r)},_checkLocation:function(){var m,r;m=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=m){this.last_location=["get",m];r=this.runRoute("get",m)}return r},_getFormVerb:function(m){m=h(m);var r,y;y=m.find('input[name="_method"]');if(y.length>0)r=y.val();r||(r=m[0].getAttribute("method"));if(!r||r=="")r="get";return h.trim(r.toString().toLowerCase())},
_checkFormSubmission:function(m){var r,y,E;this.trigger("check-form-submission",{form:m});r=h(m);y=r.attr("action")||"";E=this._getFormVerb(r);this.log("_checkFormSubmission",r,y,E);if(E==="get"){this.setLocation(y+"?"+this._serializeFormParams(r));m=false}else{r=h.extend({},this._parseFormParams(r));m=this.runRoute(E,y,r,m.get(0))}return typeof m=="undefined"?false:m},_serializeFormParams:function(m){var r="";m=m.serializeArray();var y;if(m.length>0){r=this._encodeFormPair(m[0].name,m[0].value);
for(y=1;y<m.length;y++)r=r+"&"+this._encodeFormPair(m[y].name,m[y].value)}return r},_encodeFormPair:function(m,r){return z(m)+"="+z(r)},_parseFormParams:function(m){var r={};m=m.serializeArray();var y;for(y=0;y<m.length;y++)r=this._parseParamPair(r,m[y].name,m[y].value);return r},_parseQueryString:function(m){var r={},y,E;if(m=m.match(q)){m=m[1].split("&");for(E=0;E<m.length;E++){y=m[E].split("=");r=this._parseParamPair(r,B(y[0]),B(y[1]||""))}}return r},_parseParamPair:function(m,r,y){if(m[r])if(G(m[r]))m[r].push(y);
else m[r]=[m[r],y];else m[r]=y;return m},_listen:function(m,r){return this.$element().bind([m,this.eventNamespace()].join("."),r)},_unlisten:function(m,r){return this.$element().unbind([m,this.eventNamespace()].join("."),r)}});j.RenderContext=function(m){this.event_context=m;this.callbacks=[];this.content=this.previous_content=null;this.waiting=this.next_engine=false};j.RenderContext.prototype=h.extend({},j.Object.prototype,{then:function(m){if(!x(m))if(typeof m==="string"&&m in this.event_context){var r=
this.event_context[m];m=function(E){return r.apply(this.event_context,[E])}}else return this;var y=this;if(this.waiting)this.callbacks.push(m);else{this.wait();g.setTimeout(function(){var E=m.apply(y,[y.content,y.previous_content]);E!==false&&y.next(E)},0)}return this},wait:function(){this.waiting=true},next:function(m){this.waiting=false;if(typeof m!=="undefined"){this.previous_content=this.content;this.content=m}this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(m,r,y){var E=
this;return this.then(function(){var ca,oa,T;if(x(r)){y=r;r={}}else r=h.extend({},r);y&&this.then(y);if(typeof m==="string"){ca=(T=m.match(/\.json$/)||r.json)&&r.cache===true||r.cache!==false;E.next_engine=E.event_context.engineFor(m);delete r.cache;delete r.json;if(r.engine){E.next_engine=r.engine;delete r.engine}if(ca&&(oa=this.event_context.app.templateCache(m)))return oa;this.wait();h.ajax(h.extend({url:m,data:{},dataType:T?"json":null,type:"get",success:function(fa){ca&&E.event_context.app.templateCache(m,
fa);E.next(fa)}},r));return false}else{if(m.nodeType)return m.innerHTML;if(m.selector){E.next_engine=m.attr("data-engine");return r.clone===false?m.remove()[0].innerHTML.toString():m[0].innerHTML.toString()}}})},loadPartials:function(m){if(m){this.partials=this.partials||{};for(name in m)this.load(m[name]).then(function(r){this.partials[name]=r})}return this},render:function(m,r,y,E){return x(m)&&!r?this.then(m):this.loadPartials(E).load(m).interpolate(r,m).then(y)},partial:function(m,r){return this.render(m,
r).swap()},send:function(){var m=this,r=s(arguments),y=r.shift();if(G(r[0]))r=r[0];return this.then(function(){r.push(function(E){m.next(E)});m.wait();y.apply(y,r);return false})},collect:function(m,r,y){var E=this,ca=function(){if(x(m)){r=m;m=this.content}var oa=[],T=false;h.each(m,function(fa,ga){var xa=r.apply(E,[fa,ga]);if(xa.jquery&&xa.length==1){xa=xa[0];T=true}oa.push(xa);return xa});return T?oa:oa.join("")};return y?ca():this.then(ca)},renderEach:function(m,r,y,E){if(G(r)){E=y;y=r;r=null}return this.load(m).then(function(ca){var oa=
this;y||(y=G(this.previous_content)?this.previous_content:[]);if(E)h.each(y,function(T,fa){var ga={},xa=this.next_engine||m;r?(ga[r]=fa):(ga=fa);E(fa,oa.event_context.interpolate(ca,ga,xa))});else return this.collect(y,function(T,fa){var ga={},xa=this.next_engine||m;r?(ga[r]=fa):(ga=fa);return this.event_context.interpolate(ca,ga,xa)},true)})},interpolate:function(m,r,y){var E=this;return this.then(function(ca,oa){if(!m&&oa)m=oa;if(this.next_engine){r=this.next_engine;this.next_engine=false}var T=
E.event_context.interpolate(ca,m,r,this.partials);return y?oa+T:T})},swap:function(){return this.then(function(m){this.event_context.swap(m)}).trigger("changed",{})},appendTo:function(m){return this.then(function(r){h(m).append(r)}).trigger("changed",{})},prependTo:function(m){return this.then(function(r){h(m).prepend(r)}).trigger("changed",{})},replace:function(m){return this.then(function(r){h(m).html(r)}).trigger("changed",{})},trigger:function(m,r){return this.then(function(y){if(typeof r=="undefined")r=
{content:y};this.event_context.trigger(m,r)})}});j.EventContext=function(m,r,y,E,ca){this.app=m;this.verb=r;this.path=y;this.params=new j.Object(E);this.target=ca};j.EventContext.prototype=h.extend({},j.Object.prototype,{$element:function(){return this.app.$element(s(arguments).shift())},engineFor:function(m){var r;if(x(m))return m;m=(m||this.app.template_engine).toString();if(r=m.match(/\.([^\.\?\#]+)$/))m=r[1];if(m&&x(this[m]))return this[m];if(this.app.template_engine)return this.engineFor(this.app.template_engine);
return function(y){return y}},interpolate:function(m,r,y,E){return this.engineFor(y).apply(this,[m,r,E])},render:function(m,r,y,E){return(new j.RenderContext(this)).render(m,r,y,E)},renderEach:function(m,r,y,E){return(new j.RenderContext(this)).renderEach(m,r,y,E)},load:function(m,r,y){return(new j.RenderContext(this)).load(m,r,y)},partial:function(m,r){return(new j.RenderContext(this)).partial(m,r)},send:function(){var m=new j.RenderContext(this);return m.send.apply(m,arguments)},redirect:function(){var m;
m=s(arguments);var r=this.app.getLocation(),y=m.length;if(y>1){for(var E=0,ca=[],oa=[],T={},fa=false;E<y;E++)if(typeof m[E]=="string")ca.push(m[E]);else{h.extend(T,m[E]);fa=true}m=ca.join("/");if(fa){for(var ga in T)oa.push(this.app._encodeFormPair(ga,T[ga]));m+="?"+oa.join("&")}}else m=m[0];this.trigger("redirect",{to:m});this.app.last_location=[this.verb,this.path];this.app.setLocation(m);(new RegExp(m)).test(r)&&this.app.trigger("location-changed")},trigger:function(m,r){if(typeof r=="undefined")r=
{};if(!r.context)r.context=this;return this.app.trigger(m,r)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(m){return this.app.swap(m)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(m){return h.parseJSON(m)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}});h.sammy=g.Sammy=j})(jQuery,window);
(function(h){Sammy=Sammy||{};Sammy.Title=function(){this.setTitle=function(g){this.title_function=h.isFunction(g)?g:function(j){return[g,j].join(" ")}};this.helper("title",function(){var g=h.makeArray(arguments).join(" ");if(this.app.title_function)g=this.app.title_function(g);document.title=g})}})(jQuery);
(function(h){function g(l){l=unescape(l);return l==="true"?true:l==="false"?false:l}function j(l,q,s){var x;if(q.match(/^[^\[]+$/))l[q]=g(s);else if(x=q.match(/^([^\[]+)\[\](.*)$/)){q=x[1];x=x[2];if(l[q]&&!h.isArray(l[q]))throw"400 Bad Request";if(x){x=x.match(/^\[([^\]]+)\](.*)$/);if(!x)throw"400 Bad Request";if(l[q])l[q][l[q].length-1][x[1]]?l[q].push(j({},x[1]+x[2],s)):h.extend(true,l[q][l[q].length-1],j({},x[1]+x[2],s));else l[q]=[j({},x[1]+x[2],s)]}else if(l[q])l[q].push(g(s));else l[q]=[g(s)]}else if(x=
q.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){q=x[1];x=x[2]+x[3];if(l[q]&&h.isArray(l[q]))throw"400 Bad Request";if(l[q])h.extend(true,l[q],j(l[q],x,s));else l[q]=j({},x,s)}return l}Sammy=Sammy||{};Sammy.NestedParams=function(l){l._parseParamPair=j}})(jQuery);
(function(){if(!window.JSON)window.JSON={};(function(){function h(z){return z<10?"0"+z:z}function g(z){q.lastIndex=0;return q.test(z)?'"'+z.replace(q,function(N){var P=G[N];return typeof P==="string"?P:"\\u"+("0000"+N.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+z+'"'}function j(z,N){var P,la,pa,na,m=s,r,y=N[z];if(y&&typeof y==="object"&&typeof y.toJSON==="function")y=y.toJSON(z);if(typeof B==="function")y=B.call(N,z,y);switch(typeof y){case "string":return g(y);case "number":return isFinite(y)?
String(y):"null";case "boolean":case "null":return String(y);case "object":if(!y)return"null";s+=x;r=[];if(Object.prototype.toString.apply(y)==="[object Array]"){na=y.length;for(P=0;P<na;P+=1)r[P]=j(P,y)||"null";pa=r.length===0?"[]":s?"[\n"+s+r.join(",\n"+s)+"\n"+m+"]":"["+r.join(",")+"]";s=m;return pa}if(B&&typeof B==="object"){na=B.length;for(P=0;P<na;P+=1){la=B[P];if(typeof la==="string")if(pa=j(la,y))r.push(g(la)+(s?": ":":")+pa)}}else for(la in y)if(Object.hasOwnProperty.call(y,la))if(pa=j(la,
y))r.push(g(la)+(s?": ":":")+pa);pa=r.length===0?"{}":s?"{\n"+s+r.join(",\n"+s)+"\n"+m+"}":"{"+r.join(",")+"}";s=m;return pa}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var l=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
q=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s,x,G={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},B;if(typeof JSON.stringify!=="function")JSON.stringify=function(z,N,P){var la;x=s="";if(typeof P==="number")for(la=0;la<P;la+=1)x+=" ";else if(typeof P==="string")x=P;if((B=N)&&typeof N!=="function"&&(typeof N!=="object"||typeof N.length!=="number"))throw new Error("JSON.stringify");
return j("",{"":z})};if(typeof JSON.parse!=="function")JSON.parse=function(z,N){function P(pa,na){var m,r,y=pa[na];if(y&&typeof y==="object")for(m in y)if(Object.hasOwnProperty.call(y,m)){r=P(y,m);if(r!==undefined)y[m]=r;else delete y[m]}return N.call(pa,na,y)}var la;l.lastIndex=0;if(l.test(z))z=z.replace(l,function(pa){return"\\u"+("0000"+pa.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(z.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){la=eval("("+z+")");return typeof N==="function"?P({"":la},""):la}throw new SyntaxError("JSON.parse");}})();Sammy=Sammy||{};Sammy.JSON=function(h){h.helpers({json:function(g){return typeof g=="string"?JSON.parse(g):JSON.stringify(g)}})}})(jQuery);
(function(h){if(!window.Mustache)var g=function(){var j=function(){};j.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(l,q,s,x){if(!x){this.context=q;this.buffer=[]}if(!this.includes("",l))if(x)return l;else{this.send(l);return}l=this.render_pragmas(l);l=this.render_section(l,q,s);if(x)return this.render_tags(l,q,s,x);this.render_tags(l,q,s,x)},send:function(l){l!=""&&this.buffer.push(l)},render_pragmas:function(l){if(!this.includes("%",
l))return l;var q=this;return l.replace(new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag),function(s,x,G){if(!q.pragmas_implemented[x])throw{message:"This implementation of mustache doesn't understand the '"+x+"' pragma"};q.pragmas[x]={};if(G){s=G.split("=");q.pragmas[x][s[0]]=s[1]}return""})},render_partial:function(l,q,s){l=this.trim(l);if(!s||s[l]===undefined)throw{message:"unknown_partial '"+l+"'"};if(typeof q[l]!="object")return this.render(s[l],q,s,true);return this.render(s[l],
q[l],s,true)},render_section:function(l,q,s){if(!this.includes("#",l)&&!this.includes("^",l))return l;var x=this;return l.replace(new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(G,B,z,N){G=x.find(z,q);if(B=="^")return!G||x.is_array(G)&&G.length===0?x.render(N,q,s,true):"";else if(B=="#")return x.is_array(G)?x.map(G,function(P){return x.render(N,x.create_context(P),s,true)}).join(""):x.is_object(G)?x.render(N,x.create_context(G),
s,true):typeof G==="function"?G.call(q,N,function(P){return x.render(P,q,s,true)}):G?x.render(N,q,s,true):""})},render_tags:function(l,q,s,x){var G=this,B=function(){return new RegExp(G.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+G.ctag+"+","g")},z=B(),N=function(la,pa,na){switch(pa){case "!":return"";case "=":G.set_delimiters(na);z=B();return"";case ">":return G.render_partial(na,q,s);case "{":return G.find(na,q);default:return G.escape(G.find(na,q))}};l=l.split("\n");for(var P=0;P<l.length;P++){l[P]=
l[P].replace(z,N,this);x||this.send(l[P])}if(x)return l.join("\n")},set_delimiters:function(l){l=l.split(" ");this.otag=this.escape_regex(l[0]);this.ctag=this.escape_regex(l[1])},escape_regex:function(l){if(!arguments.callee.sRE)arguments.callee.sRE=new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return l.replace(arguments.callee.sRE,"\\$1")},find:function(l,q){l=this.trim(l);var s;if(q[l]===false||q[l]===0||q[l])s=q[l];else if(this.context[l]===false||this.context[l]===0||
this.context[l])s=this.context[l];if(typeof s==="function")return s.apply(q);if(s!==undefined)return s;return""},includes:function(l,q){return q.indexOf(this.otag+l)!=-1},escape:function(l){return String(l===null?"":l).replace(/&(?!\w+;)|["<>\\]/g,function(q){switch(q){case "&":return"&amp;";case "\\":return"\\\\";case '"':return'"';case "<":return"&lt;";case ">":return"&gt;";default:return q}})},create_context:function(l){if(this.is_object(l))return l;else{var q=".";if(this.pragmas["IMPLICIT-ITERATOR"])q=
this.pragmas["IMPLICIT-ITERATOR"].iterator;var s={};s[q]=l;return s}},is_object:function(l){return l&&typeof l=="object"},is_array:function(l){return Object.prototype.toString.call(l)==="[object Array]"},trim:function(l){return l.replace(/^\s*|\s*$/g,"")},map:function(l,q){if(typeof l.map=="function")return l.map(q);else{for(var s=[],x=l.length,G=0;G<x;G++)s.push(q(l[G]));return s}}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(l,q,s,x){var G=new j;if(x)G.send=x;G.render(l,q,s);
if(!x)return G.buffer.join("\n")}}}();Sammy=Sammy||{};Sammy.Mustache=function(j,l){l||(l="mustache");j.helper(l,function(q,s,x){s=h.extend({},this,s);x=h.extend({},s.partials,x);return g.to_html(q,s,x)})}})(jQuery);
window.Modernizr=function(h,g,j){function l(){G.input=function(Q){for(var V=0,c=Q.length;V<c;V++)oa[Q[V]]=!!(Q[V]in la);return oa}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));G.inputtypes=function(Q){for(var V=0,c,A,L,M=Q.length;V<M;V++){la.setAttribute("type",A=Q[V]);(c=la.type!=="text")&&(la.value=pa,la.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(A)&&la.style.WebkitAppearance!==j?(B.appendChild(la),L=g.defaultView,c=L.getComputedStyle&&
L.getComputedStyle(la,null).WebkitAppearance!=="textfield"&&la.offsetHeight!==0,B.removeChild(la)):/^(search|tel)$/.test(A)||(/^(url|email)$/.test(A)?(c=la.checkValidity&&la.checkValidity()===false):/^color$/.test(A)?(B.appendChild(la),c=la.value!=pa,B.removeChild(la)):(c=la.value!=pa)));ca[Q[V]]=!!c}return ca}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function q(Q,V){var c=Q.charAt(0).toUpperCase()+Q.substr(1);c=(Q+" "+r.join(c+" ")+c).split(" ");
return!!s(c,V)}function s(Q,V){for(var c in Q)if(P[Q[c]]!==j&&(!V||V(Q[c],N)))return true}function x(Q,V){return typeof Q===V}var G={},B=g.documentElement,z=g.head||g.getElementsByTagName("head")[0],N=g.createElement("modernizr"),P=N.style,la=g.createElement("input"),pa=":)",na=Object.prototype.toString,m=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),r="Webkit Moz O ms Khtml".split(" "),y={svg:"http://www.w3.org/2000/svg"},E={},ca={},oa={},T=[],fa,ga=function(Q){var V=g.createElement("style"),c=
g.createElement("div");V.textContent=Q+"{#modernizr{height:3px}}";z.appendChild(V);c.id="modernizr";B.appendChild(c);Q=c.offsetHeight===3;V.parentNode.removeChild(V);c.parentNode.removeChild(c);return!!Q},xa=function(){var Q={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(V,c){c=c||g.createElement(Q[V]||"div");var A=(V="on"+V)in c;A||(c.setAttribute||(c=g.createElement("div")),c.setAttribute&&c.removeAttribute&&(c.setAttribute(V,""),A=
x(c[V],"function"),x(c[V],j)||(c[V]=j),c.removeAttribute(V)));return A}}(),Oa={}.hasOwnProperty,Ra;x(Oa,j)||x(Oa.call,j)?(Ra=function(Q,V){return V in Q&&x(Q.constructor.prototype[V],j)}):(Ra=function(Q,V){return Oa.call(Q,V)});E.flexbox=function(){var Q=g.createElement("div"),V=g.createElement("div");(function(A,L,M,S){L+=":";A.style.cssText=(L+m.join(M+";"+L)).slice(0,-L.length)+(S||"")})(Q,"display","box","width:42px;padding:0;");V.style.cssText=m.join("box-flex:1;")+"width:10px;";Q.appendChild(V);
B.appendChild(Q);var c=V.offsetWidth===42;Q.removeChild(V);B.removeChild(Q);return c};E.canvas=function(){var Q=g.createElement("canvas");return Q.getContext&&Q.getContext("2d")};E.canvastext=function(){return G.canvas&&x(g.createElement("canvas").getContext("2d").fillText,"function")};E.webgl=function(){return!!h.WebGLRenderingContext};E.touch=function(){return"ontouchstart"in h||ga("@media ("+m.join("touch-enabled),(")+"modernizr)")};E.geolocation=function(){return!!navigator.geolocation};E.postmessage=
function(){return!!h.postMessage};E.websqldatabase=function(){return!!h.openDatabase};E.indexedDB=function(){for(var Q=-1,V=r.length;++Q<V;){var c=r[Q].toLowerCase();if(h[c+"_indexedDB"]||h[c+"IndexedDB"])return true}return false};E.hashchange=function(){return xa("hashchange",h)&&(g.documentMode===j||g.documentMode>7)};E.history=function(){return!!(h.history&&history.pushState)};E.draganddrop=function(){return xa("dragstart")&&xa("drop")};E.websockets=function(){return"WebSocket"in h};E.rgba=function(){P.cssText=
"background-color:rgba(150,255,150,.5)";return(""+P.backgroundColor).indexOf("rgba")!==-1};E.hsla=function(){P.cssText="background-color:hsla(120,40%,100%,.5)";return(""+P.backgroundColor).indexOf("rgba")!==-1||(""+P.backgroundColor).indexOf("hsla")!==-1};E.multiplebgs=function(){P.cssText="background:url(//:),url(//:),red url(//:)";return/(url\s*\(.*?){3}/.test(P.background)};E.backgroundsize=function(){return q("backgroundSize")};E.borderimage=function(){return q("borderImage")};E.borderradius=
function(){return q("borderRadius","",function(Q){return(""+Q).indexOf("orderRadius")!==-1})};E.boxshadow=function(){return q("boxShadow")};E.textshadow=function(){return g.createElement("div").style.textShadow===""};E.opacity=function(){var Q=m.join("opacity:.55;")+"";P.cssText=Q;return/^0.55$/.test(P.opacity)};E.cssanimations=function(){return q("animationName")};E.csscolumns=function(){return q("columnCount")};E.cssgradients=function(){var Q=("background-image:"+m.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+
m.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,-17);P.cssText=Q;return(""+P.backgroundImage).indexOf("gradient")!==-1};E.cssreflections=function(){return q("boxReflect")};E.csstransforms=function(){return!!s(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};E.csstransforms3d=function(){var Q=!!s(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);Q&&"webkitPerspective"in B.style&&(Q=ga("@media ("+
m.join("transform-3d),(")+"modernizr)"));return Q};E.csstransitions=function(){return q("transitionProperty")};E.fontface=function(){var Q,V,c=z||B,A=g.createElement("style");V=g.implementation||{hasFeature:function(){return false}};A.type="text/css";c.insertBefore(A,c.firstChild);Q=A.sheet||A.styleSheet;V=(V.hasFeature("CSS2","")?function(L){if(!Q||!L)return false;var M=false;try{Q.insertRule(L,0);M=/src/i.test(Q.cssRules[0].cssText);Q.deleteRule(Q.cssRules.length-1)}catch(S){}return M}:function(L){if(!Q||
!L)return false;Q.cssText=L;return Q.cssText.length!==0&&/src/i.test(Q.cssText)&&Q.cssText.replace(/\r+|\n+/g,"").indexOf(L.split(" ")[0])===0})('@font-face { font-family: "font"; src: url(data:,); }');c.removeChild(A);return V};E.video=function(){var Q=g.createElement("video"),V=!!Q.canPlayType;if(V){V=new Boolean(V);V.ogg=Q.canPlayType('video/ogg; codecs="theora"');V.h264=Q.canPlayType('video/mp4; codecs="avc1.42E01E"')||Q.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');V.webm=Q.canPlayType('video/webm; codecs="vp8, vorbis"')}return V};
E.audio=function(){var Q=g.createElement("audio"),V=!!Q.canPlayType;V&&(V=new Boolean(V),V.ogg=Q.canPlayType('audio/ogg; codecs="vorbis"'),V.mp3=Q.canPlayType("audio/mpeg;"),V.wav=Q.canPlayType('audio/wav; codecs="1"'),V.m4a=Q.canPlayType("audio/x-m4a;")||Q.canPlayType("audio/aac;"));return V};E.localstorage=function(){try{return!!localStorage.getItem}catch(Q){return false}};E.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(Q){return false}};E.webWorkers=function(){return!!h.Worker};
E.applicationcache=function(){return!!h.applicationCache};E.svg=function(){return!!g.createElementNS&&!!g.createElementNS(y.svg,"svg").createSVGRect};E.inlinesvg=function(){var Q=g.createElement("div");Q.innerHTML="<svg/>";return(Q.firstChild&&Q.firstChild.namespaceURI)==y.svg};E.smil=function(){return!!g.createElementNS&&/SVG/.test(na.call(g.createElementNS(y.svg,"animate")))};E.svgclippaths=function(){return!!g.createElementNS&&/SVG/.test(na.call(g.createElementNS(y.svg,"clipPath")))};for(var X in E)Ra(E,
X)&&(fa=X.toLowerCase(),G[fa]=E[X](),T.push((G[fa]?"":"no-")+fa));G.input||l();G.crosswindowmessaging=G.postmessage;G.historymanagement=G.history;G.addTest=function(Q,V){Q=Q.toLowerCase();if(!G[Q]){V=!!V();B.className+=" "+(V?"":"no-")+Q;G[Q]=V;return G}};P.cssText="";N=la=null;h.attachEvent&&function(){var Q=g.createElement("div");Q.innerHTML="<elem></elem>";return Q.childNodes.length!==1}()&&function(Q,V){function c(aa,ha){for(var sa=-1,ta=aa.length,La,gb=[];++sa<ta;){La=aa[sa];(ha=La.media||ha)!=
"screen"&&gb.push(c(La.imports,ha),La.cssText)}return gb.join("")}function A(aa){for(var ha=-1;++ha<M;)aa.createElement(L[ha])}var L="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video".split("|"),M=L.length,S=new RegExp("(^|\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)","gi"),ja=new RegExp("<(/*)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)",
"gi"),ia=new RegExp("(^|[^\\n]*?\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)([^\\n]*)({[\\n\\w\\W]*?})","gi"),wa=V.createDocumentFragment(),Ga=V.documentElement,ua=Ga.firstChild,Na=V.createElement("body"),H=V.createElement("style"),ea;A(V);A(wa);ua.insertBefore(H,ua.firstChild);H.media="print";Q.attachEvent("onbeforeprint",function(){var aa=-1,ha=c(V.styleSheets,"all"),sa=[],ta;for(ea=ea||V.body;(ta=
ia.exec(ha))!=null;)sa.push((ta[1]+ta[2]+ta[3]).replace(S,"$1.iepp_$2")+ta[4]);for(H.styleSheet.cssText=sa.join("\n");++aa<M;){ha=V.getElementsByTagName(L[aa]);sa=ha.length;for(ta=-1;++ta<sa;)ha[ta].className.indexOf("iepp_")<0&&(ha[ta].className+=" iepp_"+L[aa])}wa.appendChild(ea);Ga.appendChild(Na);Na.className=ea.className;Na.innerHTML=ea.innerHTML.replace(ja,"<$1font")});Q.attachEvent("onafterprint",function(){Na.innerHTML="";Ga.removeChild(Na);Ga.appendChild(ea);H.styleSheet.cssText=""})}(h,
g);G._enableHTML5=true;G._version="1.7";B.className=B.className.replace(/\bno-js\b/,"")+" js "+T.join(" ");return G}(this,this.document);
var Model=function(h,g){var j=function(l){this.attributes=jQuery.extend({},l);this.changes={};this.errors=new Model.Errors(this);this.uid=[h,Model.UID.generate()].join("-");jQuery.isFunction(this.initialize)&&this.initialize()};Model.Module.extend.call(j,Model.Module);j._name=h;j.collection=[];j.unique_key="id";j.extend(Model.Callbacks).extend(Model.ClassMethods);j.prototype=new Model.Base;j.prototype.constructor=j;jQuery.isFunction(g)&&g.call(j,j,j.prototype);return j};
Model.Callbacks={bind:function(h,g){this.callbacks=this.callbacks||{};this.callbacks[h]=this.callbacks[h]||[];this.callbacks[h].push(g);return this},trigger:function(h,g){this.callbacks=this.callbacks||{};var j=this.callbacks[h];if(j)for(var l=0;l<j.length;l++)j[l].apply(this,g||[]);return this},unbind:function(h,g){this.callbacks=this.callbacks||{};if(g)for(var j=this.callbacks[h]||[],l=0;l<j.length;l++)j[l]===g&&this.callbacks[h].splice(l,1);else delete this.callbacks[h];return this}};
Model.ClassMethods={add:function(h){var g=h.id();if(jQuery.inArray(h,this.collection)===-1&&!(g&&this.find(g))){this.collection.push(h);this.trigger("add",[h])}return this},all:function(){return this.collection.slice()},chain:function(h){return jQuery.extend({},this,{collection:h})},count:function(){return this.all().length},detect:function(h){for(var g=this.all(),j,l=0,q=g.length;l<q;l++){j=g[l];if(h.call(j,j,l))return j}},each:function(h,g){for(var j=this.all(),l=0,q=j.length;l<q;l++)h.call(g||
j[l],j[l],l,j);return this},find:function(h){return this.detect(function(){return this.id()==h})},first:function(){return this.all()[0]},load:function(h){if(this._persistence){var g=this;this._persistence.read(function(j){for(var l=0,q=j.length;l<q;l++)g.add(j[l]);h&&h.call(g,j)})}return this},last:function(){var h=this.all();return h[h.length-1]},map:function(h,g){for(var j=this.all(),l=[],q=0,s=j.length;q<s;q++)l.push(h.call(g||j[q],j[q],q,j));return l},persistence:function(h){if(arguments.length==
0)return this._persistence;else{var g=Array.prototype.slice.call(arguments,1);g.unshift(this);this._persistence=h.apply(h,g);return this}},pluck:function(h){for(var g=this.all(),j=[],l=0,q=g.length;l<q;l++)j.push(g[l].attr(h));return j},remove:function(h){for(var g,j=0,l=this.collection.length;j<l;j++)if(this.collection[j]===h){g=j;break}if(g!=undefined){this.collection.splice(g,1);this.trigger("remove",[h]);return true}else return false},reverse:function(){return this.chain(this.all().reverse())},
select:function(h,g){for(var j=this.all(),l=[],q,s=0,x=j.length;s<x;s++){q=j[s];if(h.call(g||q,q,s,j))l.push(q)}return this.chain(l)},sort:function(h){return this.chain(this.all().sort(h))},sortBy:function(h){var g=jQuery.isFunction(h);return this.sort(function(j,l){var q=g?h.call(j):j.attr(h),s=g?h.call(l):l.attr(h);return q<s?-1:q>s?1:0})},use:function(h){var g=Array.prototype.slice.call(arguments,1);g.unshift(this);h.apply(this,g);return this}};
Model.Errors=function(h){this.errors={};this.model=h};Model.Errors.prototype={add:function(h,g){this.errors[h]||(this.errors[h]=[]);this.errors[h].push(g);return this},all:function(){return this.errors},clear:function(){this.errors={};return this},each:function(h){for(var g in this.errors)for(var j=0;j<this.errors[g].length;j++)h.call(this,g,this.errors[g][j]);return this},on:function(h){return this.errors[h]||[]},size:function(){var h=0;this.each(function(){h++});return h}};
Model.InstanceMethods={asJSON:function(){return this.attr()},attr:function(h,g){if(arguments.length===0)return jQuery.extend({},this.attributes,this.changes);else if(arguments.length===2){if(this.attributes[h]===g)delete this.changes[h];else this.changes[h]=g;return this}else if(typeof h==="object"){for(var j in h)this.attr(j,h[j]);return this}else return h in this.changes?this.changes[h]:this.attributes[h]},callPersistMethod:function(h,g){var j=this,l=function(q){if(q){j.merge(j.changes).reset();
h==="destroy"?j.constructor.remove(j):j.constructor.add(j);j.trigger(h)}var s;if(g)s=g.apply(j,arguments);return s};this.constructor._persistence?this.constructor._persistence[h](this,l):l.call(this,true)},destroy:function(h){this.callPersistMethod("destroy",h);return this},id:function(){return this.attributes[this.constructor.unique_key]},merge:function(h){jQuery.extend(this.attributes,h);return this},newRecord:function(){return this.id()===undefined},reset:function(){this.errors.clear();this.changes=
{};return this},save:function(h){if(this.valid())this.callPersistMethod(this.newRecord()?"create":"update",h);else h&&h(false);return this},valid:function(){this.errors.clear();this.validate();return this.errors.size()===0},validate:function(){return this}};
Model.localStorage=function(h){if(!window.localStorage)return{create:function(q,s){s(true)},destroy:function(q,s){s(true)},read:function(q){q([])},update:function(q,s){s(true)}};var g=[h._name,"collection"].join("-"),j=function(){var q=localStorage[g];return q?JSON.parse(q):[]},l=function(q){localStorage.setItem(q.uid,JSON.stringify(q.asJSON()));q=q.uid;var s=j();if(jQuery.inArray(q,s)===-1){s.push(q);localStorage.setItem(g,JSON.stringify(s))}};return{create:function(q,s){l(q);s(true)},destroy:function(q,
s){localStorage.removeItem(q.uid);var x=q.uid,G=j();x=jQuery.inArray(x,G);if(x>-1){G.splice(x,1);localStorage.setItem(g,JSON.stringify(G))}s(true)},read:function(q){if(!q)return false;for(var s=h.map(function(){return this.uid}),x=j(),G=[],B,z,N=0,P=x.length;N<P;N++){z=x[N];if(jQuery.inArray(z,s)==-1){B=JSON.parse(localStorage[z]);B=new h(B);B.uid=z;G.push(B)}}q(G)},update:function(q,s){l(q);s(true)}}};Model.Log=function(){window.console&&window.console.log.apply(window.console,arguments)};
Model.Module={extend:function(h){jQuery.extend(this,h);return this},include:function(h){jQuery.extend(this.prototype,h);return this}};
Model.REST=function(h,g,j){var l=/:([\w\d]+)/g,q=function(){for(var s=[],x;(x=l.exec(g))!==null;)s.push(x[1]);return s}();return jQuery.extend({path:function(s){var x=g;jQuery.each(q,function(G,B){x=x.replace(":"+B,s.attributes[B])});return x},create:function(s,x){return this.xhr("POST",this.create_path(s),s,x)},create_path:function(s){return this.path(s)},destroy:function(s,x){return this.xhr("DELETE",this.destroy_path(s),s,x)},destroy_path:function(s){return this.update_path(s)},params:function(s){var x;
if(s){var G=s.asJSON();delete G[s.constructor.unique_key];x={};x[s.constructor._name.toLowerCase()]=G}else x=null;if(jQuery.ajaxSettings.data)x=jQuery.extend({},jQuery.ajaxSettings.data,x);return x},read:function(s){return this.xhr("GET",this.read_path(),null,function(x,G,B){B=jQuery.makeArray(B);x=[];G=0;for(var z=B.length;G<z;G++)x.push(new h(B[G]));s(x)})},read_path:function(){return g},update:function(s,x){return this.xhr("PUT",this.update_path(s),s,x)},update_path:function(s){return[this.path(s),
s.id()].join("/")},xhr:function(s,x,G,B){var z=this,N=s=="GET"?undefined:this.params(G);return jQuery.ajax({type:s,url:x+".json",dataType:"json",data:N,dataFilter:function(P){return/\S/.test(P)?P:undefined},complete:function(P,la){z.xhrComplete(P,la,G,B)}})},xhrComplete:function(s,x,G,B){var z=Model.REST["handle"+s.status];z&&z.call(this,s,x,G);x=x==="success";z=Model.REST.parseResponseData(s);x&&G&&z&&G.attr(z);B&&B.call(G,x,s,z)}},j)};Model.RestPersistence=Model.REST;
Model.REST.handle422=function(h,g,j){if(h=Model.REST.parseResponseData(h)){j.errors.clear();for(var l in h)for(g=0;g<h[l].length;g++)j.errors.add(l,h[l][g])}};Model.REST.parseResponseData=function(h){try{return/\S/.test(h.responseText)?jQuery.parseJSON(h.responseText):undefined}catch(g){Model.Log(g)}};Model.UID={counter:0,generate:function(){return[(new Date).valueOf(),this.counter++].join("-")},reset:function(){this.counter=0;return this}};Model.VERSION="0.10.1";
Model.Base=function(){function h(){}h.prototype=jQuery.extend({},Model.Callbacks,Model.InstanceMethods);return h}();
Model.SinatraREST=function(h,g,j){var l=/:([\w\d]+)/g,q=function(){for(var s=[],x;(x=l.exec(g))!==null;)s.push(x[1]);return s}();return jQuery.extend({path:function(s){var x=g;jQuery.each(q,function(G,B){x=x.replace(":"+B,s.attributes[B])});return x},create:function(s,x){return this.xhr("POST",this.create_path(s),s,x)},create_path:function(s){return this.path(s)},destroy:function(s,x){return this.xhr("DELETE",this.destroy_path(s),s,x)},destroy_path:function(s){return this.update_path(s)},params:function(s){var x;
if(s){var G=s.asJSON();delete G[s.constructor.unique_key];x={};x[s.constructor._name.toLowerCase()]=G}else x=null;if(jQuery.ajaxSettings.data)x=jQuery.extend({},jQuery.ajaxSettings.data,x);return x},read:function(s){return this.xhr("GET",this.read_path(),null,function(x,G,B){B=jQuery.makeArray(B);x=[];G=0;for(var z=B.length;G<z;G++)x.push(new h(B[G]));s(x)})},read_path:function(){return g},update:function(s,x){return this.xhr("PUT",this.update_path(s),s,x)},update_path:function(s){return[this.path(s),
s.id()].join("/")},xhr:function(s,x,G,B){var z=this,N=s=="GET"?undefined:this.params(G);return jQuery.ajax({type:s,url:x+".json",dataType:"json",data:N,complete:function(P,la){z.xhrComplete(P,la,G,B)}})},xhrComplete:function(s,x,G,B){var z=Model.REST["handle"+s.status];z&&z.call(this,s,x,G);x=x==="success";z=Model.REST.parseResponseData(s);x&&G&&z&&G.attr(z);B&&B.call(G,x,s,z)}},j)};
var CodeMirror=function(){function h(c,A){function L(b){Za=null;var e={line:0,ch:0};ja(e,{line:W.length-1,ch:W[W.length-1].text.length},X(b),e,e);Za=new x}function M(){if(ma.readOnly!="nocursor"){!Wa&&ma.onFocus&&ma.onFocus($a);Wa=true;sa();if(va.className.search(/\bCodeMirror-focused\b/)==-1)va.className+=" CodeMirror-focused";dc()}}function S(){Wa&&ma.onBlur&&ma.onBlur($a);clearInterval(bc);hb=null;Wa=false;va.className=va.className.replace(" CodeMirror-focused","")}function ja(b,e,f,i,k){if(Za){for(var n=
[],p=b.line,t=e.line+1;p<t;++p)n.push(W[p].text);for(Za.addChange(b.line,f.length,n);Za.done.length>ma.undoDepth;)Za.done.shift()}ua(b,e,f,i,k)}function ia(b,e){var f=b.pop();if(f){for(var i=[],k=f.start+f.added,n=f.start;n<k;++n)i.push(W[n].text);e.push({start:f.start,added:f.old.length,old:i});n=f.start+f.old.length-1;i=i[i.length-1];var p=f.old[f.old.length-1];if(p)if(i){for(var t=i.length,w=p.length;t>=0&&w>=0;--t,--w)if(i.charAt(t)!=p.charAt(w))break;i=w+1}else i=p.length;else i=i?i.length:0;
n=Ka({line:n,ch:i});ua({line:f.start,ch:0},{line:k-1,ch:W[k-1].text.length},f.old,n,n)}}function wa(){ia(Za.done,Za.undone)}function Ga(){ia(Za.undone,Za.done)}function ua(b,e,f,i,k){for(var n=false,p=Eb.length,t=b.line;t<e.line;++t)if(W[t].text.length==p){n=true;break}var w=e.line-b.line;t=W[b.line];var C=W[e.line];if(t==C)if(f.length==1)t.replace(b.ch,e.ch,f[0]);else{C=t.split(e.ch,f[f.length-1]);var R=[b.line+1,w];t.replace(b.ch,t.text.length,f[0]);t=1;for(var ba=f.length-1;t<ba;++t)R.push(new q(f[t]));
R.push(C);W.splice.apply(W,R)}else if(f.length==1){t.replace(b.ch,t.text.length,f[0]+C.text.slice(e.ch));W.splice(b.line+1,w)}else{R=[b.line+1,w-1];t.replace(b.ch,t.text.length,f[0]);C.replace(0,e.ch,f[f.length-1]);t=1;for(ba=f.length-1;t<ba;++t)R.push(new q(f[t]));W.splice.apply(W,R)}t=b.line;for(ba=t+f.length;t<ba;++t){C=W[t].text;if(C.length>p){Eb=C;p=C.length;n=false}}if(n){t=p=0;for(ba=W.length;t<ba;++t){C=W[t].text;if(C.length>p){p=C.length;Eb=C}}}n=[];w=f.length-w-1;t=0;for(C=cb.length;t<C;++t){p=
cb[t];if(p<b.line)n.push(p);else p>e.line&&n.push(p+w)}f.length&&n.push(b.line);cb=n;Kb(100);Ua.push({from:b.line,to:e.line+1,diff:w});pb={from:b,to:e,text:f};xb(i,k,O.from.line<=Math.min(e.line,e.line+w)?O.from.line:O.from.line+w,O.to.line<=Math.min(e.line,e.line+w)?O.to.line:O.to.line+w);Ab.style.height=W.length*ab()+2*Ya.offsetTop+"px"}function Na(b,e,f){function i(n){if(m(n,e))return n;if(!m(f,n))return k;var p=n.line+b.length-(f.line-e.line)-1,t=n.ch;if(n.line==f.line)t+=b[b.length-1].length-
(f.ch-(f.line==e.line?e.ch:0));return{line:p,ch:t}}e=Ka(e);f=f?Ka(f):e;b=X(b);var k;ea(b,e,f,function(n){k=n;return{from:i(O.from),to:i(O.to)}});return k}function H(b,e){ea(X(b),O.from,O.to,function(f){return e=="end"?{from:f,to:f}:e=="start"?{from:O.from,to:O.from}:{from:O.from,to:f}})}function ea(b,e,f,i){i=i({line:e.line+b.length-1,ch:b.length==1?b[0].length+e.ch:b[b.length-1].length});ja(e,f,b,i.from,i.to)}function aa(b,e){var f=b.line,i=e.line;if(f==i)return W[f].text.slice(b.ch,e.ch);var k=
[W[f].text.slice(b.ch)];for(f=f+1;f<i;++f)k.push(W[f].text);k.push(W[i].text.slice(0,e.ch));return k.join("\n")}function ha(){return aa(O.from,O.to)}function sa(){Pb||ac.set(2E3,function(){Yb();La();Wa&&sa();Zb()})}function ta(b){function e(){Yb();var i=La();if(i=="moved"&&b)Oa[b]=true;if(!i&&!f){f=true;ac.set(80,e)}else{Pb=false;sa()}Zb()}var f=false;Pb=true;ac.set(20,e)}function La(){function b(Ba,Ca){for(var o=0;;){var u=f.indexOf("\n",o);if(u==-1||(f.charAt(u-1)=="\r"?u-1:u)>=Ba)return{line:Ca,
ch:Ba-o};++Ca;o=u+1}}if(!Xa){var e=false,f=Ea.value,i=Q(Ea);if(!i)return false;e=Pa.text!=f;var k=ub,n=e||i.start!=Pa.start||i.end!=(k?Pa.start:Pa.end);if(!n&&!k)return false;if(e){hb=ub=null;if(ma.readOnly){bb=true;return"changed"}}var p=b(i.start,Pa.from),t=b(i.end,Pa.from);if(k){p=i.start==k.anchor?t:p;t=hb?O.to:i.start==k.anchor?p:t;if(!m(p,t)){ub=null;O.inverted=false;k=p;p=t;t=k}}if(p.line==t.line&&p.line==O.from.line&&p.line==O.to.line&&!hb)bb=false;if(e){k=0;for(var w=f.length,C=Math.min(w,
Pa.text.length),R,ba=Pa.from,ka=-1;k<C&&(R=f.charAt(k))==Pa.text.charAt(k);){++k;if(R=="\n"){ba++;ka=k}}C=ka>-1?k-ka:k;for(var Ia=Pa.to-1,za=Pa.text.length;;){R=Pa.text.charAt(za);R=="\n"&&Ia--;if(f.charAt(w)!=R){++w;++za;break}if(za<=k||w<=k)break;--w;--za}ka=Pa.text.lastIndexOf("\n",za-1);ja({line:ba,ch:C},{line:Ia,ch:ka==-1?za:za-ka-1},X(f.slice(k,w)),p,t);if(ba!=Ia||p.line!=ba)bb=true}else xb(p,t);Pa.text=f;Pa.start=i.start;Pa.end=i.end;return e?"changed":n?"moved":false}}function gb(){for(var b=
[],e=Math.max(0,O.from.line-1),f=Math.min(W.length,O.to.line+2),i=e;i<f;++i)b.push(W[i].text);b=Ea.value=b.join(fa);var k=O.from.ch,n=O.to.ch;for(i=e;i<O.from.line;++i)k+=fa.length+W[i].text.length;for(i=e;i<O.to.line;++i)n+=fa.length+W[i].text.length;Pa={text:b,from:e,to:f,start:k,end:n};V(Ea,k,ub?k:n)}function kb(){ma.readOnly!="nocursor"&&Ea.focus()}function Fb(){var b=Wb(O.inverted?O.from:O.to);return Rb(b.x,b.y,b.x,b.yBot)}function Rb(b,e,f,i){var k=Ya.offsetLeft,n=Ya.offsetTop,p=ab();e+=n;i+=
n;b+=k;f+=k;var t=va.clientHeight,w=va.scrollTop;k=false;n=true;if(e<w){va.scrollTop=Math.max(0,e-2*p);k=true}else if(i>w+t){va.scrollTop=i+p-t;k=true}e=va.clientWidth;i=va.scrollLeft;if(b<i){va.scrollLeft=Math.max(0,b-10);k=true}else if(f>e+i){va.scrollLeft=f+10-e;k=true;if(f>Ab.clientWidth)n=false}k&&ma.onScroll&&ma.onScroll($a);return n}function Sb(){var b=ab(),e=va.scrollTop-Ya.offsetTop;return{from:Math.min(W.length,Math.max(0,Math.floor(e/b))),to:Math.min(W.length,Math.ceil((e+va.clientHeight)/
b))}}function lb(b){if(va.clientWidth){for(var e=b===true?[]:[{from:Ha,to:ib,domStart:0}],f=0,i=b.length||0;f<i;++f){for(var k=b[f],n=[],p=k.diff||0,t=0,w=e.length;t<w;++t){var C=e[t];if(k.to<=C.from)n.push({from:C.from+p,to:C.to+p,domStart:C.domStart});else if(C.to<=k.from)n.push(C);else{k.from>C.from&&n.push({from:C.from,to:k.from,domStart:C.domStart});k.to<C.to&&n.push({from:k.to+p,to:C.to+p,domStart:C.domStart+(k.to-C.from)})}}e=n}p=Sb();k=Math.min(Ha,Math.max(p.from-3,0));n=Math.min(W.length,
Math.max(ib,p.to+3));b=[];t=0;w=ib-Ha;var R=k,ba=0;f=0;for(i=e.length;f<i;++f){C=e[f];if(!(C.to<=k)){if(C.from>=n)break;if(C.domStart>t||C.from>R){b.push({from:R,to:C.from,domSize:C.domStart-t,domStart:t});ba+=C.from-R}R=C.to;t=C.domStart+(C.to-C.from)}}if(t!=w||R!=n){ba+=Math.abs(n-R);b.push({from:R,to:n,domSize:w-t,domStart:t})}if(b.length){Qa.style.display="none";if(ba>(p.to-p.from)*0.3){C=k=Math.max(p.from-10,0);e=n=Math.min(p.to+7,W.length);f=[];i={line:C,ch:0};i=m(O.from,i)&&!m(O.to,i);for(C=
C;C<e;++C){t=p=null;if(i){p=0;if(O.to.line==C){i=false;t=O.to.ch}}else if(O.from.line==C)if(O.to.line==C){p=O.from.ch;t=O.to.ch}else{i=true;p=O.from.ch}f.push(W[C].getHTML(p,t,true))}Qa.innerHTML=f.join("")}else{e=O.from.line;f=O.to.line;i=0;C=oa&&mb.createElement("div");p=0;for(t=b.length;p<t;++p){w=b[p];R=w.to-w.from-w.domSize;ba=Qa.childNodes[w.domStart+w.domSize+i]||null;if(oa)for(var ka=Math.max(-R,w.domSize);ka>0;--ka)Qa.removeChild(ba?ba.previousSibling:Qa.lastChild);else if(R){for(ka=Math.max(0,
R);ka>0;--ka)Qa.insertBefore(mb.createElement("pre"),ba);for(ka=Math.max(0,-R);ka>0;--ka)Qa.removeChild(ba?ba.previousSibling:Qa.lastChild)}var Ia=Qa.childNodes[w.domStart+i],za=e<w.from&&f>=w.from;for(ka=w.from;ka<w.to;++ka){var Ba=null,Ca=null;if(za){Ba=0;if(f==ka){za=false;Ca=O.to.ch}}else if(e==ka)if(f==ka){Ba=O.from.ch;Ca=O.to.ch}else{za=true;Ba=O.from.ch}if(oa){C.innerHTML=W[ka].getHTML(Ba,Ca,true);Qa.insertBefore(C.firstChild,ba)}else{Ia.innerHTML=W[ka].getHTML(Ba,Ca,false);Ia.className=W[ka].className||
"";Ia=Ia.nextSibling}}i+=R}}Qa.style.display="";e=k!=Ha||n!=ib||kc!=va.clientHeight;Ha=k;ib=n;Lb.style.top=k*ab()+"px";if(e){kc=va.clientHeight;Ab.style.height=W.length*ab()+2*Ya.offsetTop+"px";Gb()}k=Jb(Eb);Ya.style.width=k>va.clientWidth?k+"px":"";if(Qa.childNodes.length!=ib-Ha)throw new Error("BAD PATCH! "+JSON.stringify(b)+" size="+(ib-Ha)+" nodes="+Qa.childNodes.length);Hb()}}else Ha=ib=0}function Gb(){if(ma.gutter||ma.lineNumbers){var b=Lb.offsetHeight,e=va.clientHeight;nb.style.height=(b-e<
2?e:b)+"px";b=[];for(e=Ha;e<ib;++e){var f=W[e].gutterMarker,i=ma.lineNumbers?e+ma.firstLineNumber:null;if(f&&f.text)i=f.text.replace("%N%",i!=null?i:"");else if(i==null)i="\u00a0";b.push(f&&f.style?'<pre class="'+f.style+'">':"<pre>",i,"</pre>")}nb.style.display="none";Mb.innerHTML=b.join("");b=String(W.length).length;e=Mb.firstChild;f=e.textContent||e.innerText||e.nodeValue||"";for(i="";f.length+i.length<b;)i+="\u00a0";i&&e.insertBefore(mb.createTextNode(i),e.firstChild);nb.style.display="";Ya.style.marginLeft=
nb.offsetWidth+"px"}}function Hb(){var b=O.inverted?O.from:O.to,e=Ub(b.line,b.ch)+"px";b=(b.line-Ha)*ab()+"px";$b.style.top=b;if(na(O.from,O.to)){ob.style.top=b;ob.style.left=e;ob.style.display=""}else ob.style.display="none"}function rb(b,e){var f=hb&&Ka(hb);if(f)if(m(f,b))b=f;else if(m(e,f))e=f;xb(b,e)}function xb(b,e,f,i){if(!(na(O.from,b)&&na(O.to,e))){if(m(e,b)){var k=e;e=b;b=k}k=na(O.to,e);var n=na(O.from,b);if(na(b,e))O.inverted=false;else if(k&&!n)O.inverted=true;else if(n&&!k)O.inverted=
false;if(f==null){f=O.from.line;i=O.to.line}if(na(b,e))na(O.from,O.to)||Ua.push({from:f,to:i+1});else if(na(O.from,O.to))Ua.push({from:b.line,to:e.line+1});else{na(b,O.from)||(b.line<f?Ua.push({from:b.line,to:Math.min(e.line,f)+1}):Ua.push({from:f,to:Math.min(i,b.line)+1}));na(e,O.to)||(e.line<i?Ua.push({from:Math.max(f,b.line),to:i+1}):Ua.push({from:Math.max(b.line,i),to:e.line+1}))}O.from=b;O.to=e;db=true}}function yb(b,e,f){b=Ka({line:b,ch:e||0});(f?rb:xb)(b,b)}function zb(b){return Math.max(0,
Math.min(b,W.length-1))}function Ka(b){if(b.line<0)return{line:0,ch:0};if(b.line>=W.length)return{line:W.length-1,ch:W[W.length-1].text.length};var e=b.ch,f=W[b.line].text.length;return e==null||e>f?{line:b.line,ch:f}:e<0?{line:b.line,ch:0}:b}function lc(b){rb({line:b,ch:0},{line:b,ch:W[b].text.length})}function sb(b,e){if(e=="smart")if(Ta.indent)var f=hc(b);else e="prev";var i=W[b],k=i.indentation(),n=i.text.match(/^\s*/)[0],p;if(e=="prev")p=b?W[b-1].indentation():0;else if(e=="smart")p=Ta.indent(f,
i.text.slice(n.length));else if(e=="add")p=k+ma.indentUnit;else if(e=="subtract")p=k-ma.indentUnit;p=Math.max(0,p);if(p-k){k="";f=0;if(ma.indentWithTabs)for(i=Math.floor(p/ga);i;--i){f+=ga;k+="\t"}for(;f<p;){++f;k+=" "}}else{if(O.from.line!=b&&O.to.line!=b)return;k=n}Na(k,{line:b,ch:0},{line:b,ch:n.length})}function ec(){Ta=h.getMode(ma,ma.mode);for(var b=0,e=W.length;b<e;++b)W[b].stateAfter=null;cb=[0];Kb()}function Tb(b,e,f){function i(t,w,C,R){t=W[t];w=t.addMark(w,C,R);w.line=t;k.push(w)}b=Ka(b);
e=Ka(e);var k=[];if(b.line==e.line)i(b.line,b.ch,e.ch,f);else{i(b.line,b.ch,null,f);for(var n=b.line+1,p=e.line;n<p;++n)i(n,0,null,f);i(e.line,0,e.ch,f)}Ua.push({from:b.line,to:e.line+1});return function(){for(var t,w,C=0;C<k.length;++C){var R=k[C],ba=y(W,R.line);R.line.removeMark(R);if(ba>-1){if(t==null)t=ba;w=ba}}t!=null&&Ua.push({from:t,to:w+1})}}function Jb(b){eb.innerHTML="<pre><span>x</span></pre>";eb.firstChild.firstChild.firstChild.nodeValue=b;return eb.firstChild.firstChild.offsetWidth||
10}function Ub(b,e){if(e==0)return 0;eb.innerHTML="<pre><span>"+W[b].getHTML(null,null,false,e)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}function Vb(b,e){function f(R){eb.innerHTML="<pre><span>"+i.getHTML(null,null,false,R)+"</span></pre>";return eb.firstChild.firstChild.offsetWidth}if(e<=0)return 0;for(var i=W[b],k=0,n=0,p=i.text.length,t,w=Math.min(p,Math.ceil(e/Jb("x")));;){var C=f(w);if(C<=e&&w<p)w=Math.min(p,Math.ceil(w*1.2));else{t=C;p=w;break}}if(e>t)return p;w=Math.floor(p*
0.8);C=f(w);if(C<e){k=w;n=C}for(;;){if(p-k<=1)return t-e>e-n?k:p;w=Math.ceil((k+p)/2);C=f(w);if(C>e){p=w;t=C}else{k=w;n=C}}}function Wb(b,e){var f=ab(),i=b.line-(e?Ha:0);return{x:Ub(b.line,b.ch),y:i*f,yBot:(i+1)*f}}function fc(b){b=Wb(b,true);var e=pa(Ya);return{x:e.left+b.x,y:e.top+b.y,yBot:e.top+b.yBot}}function ab(){var b=Qa.childNodes.length;if(b)return Qa.offsetHeight/b||1;eb.innerHTML="<pre>x</pre>";return eb.firstChild.offsetHeight||1}function tb(b,e){var f=pa(va,true),i=b.e.clientX,k=b.e.clientY;
if(!e&&(i-f.left>va.clientWidth||k-f.top>va.clientHeight))return null;f=pa(Ya,true);k=Ha+Math.floor((k-f.top)/ab());return Ka({line:k,ch:Vb(zb(k),i-f.left)})}function gc(b){function e(){Ea.value!=k&&ya(H)(Ea.value,"end");Ea.style.cssText=i;Xa=false;gb();sa()}var f=tb(b);if(!(!f||window.opera)){if(na(O.from,O.to)||m(f,O.from)||!m(f,O.to))yb(f.line,f.ch);var i=Ea.style.cssText;Ea.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.pageY()-1)+"px; left: "+(b.pageX()-1)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden;";
var k=Ea.value=ha();kb();V(Ea,0,Ea.value.length);Xa=true;if(T){b.stop();var n=N(window,"mouseup",function(){n();setTimeout(e,20)},true)}else setTimeout(e,50)}}function dc(){clearInterval(bc);var b=true;ob.style.visibility="";bc=setInterval(function(){ob.style.visibility=(b=!b)?"":"hidden"},650)}function Va(b){function e(Ca,o,u){if(Ca.text){var F=Ca.styles;Ca=p?0:Ca.text.length-1;for(var I,D=p?0:F.length-2,J=p?F.length:-2;D!=J;D+=2*t){var U=F[D];if(F[D+1]!=null&&F[D+1]!=ba)Ca+=t*U.length;else for(var Z=
p?0:U.length-1,ra=p?U.length:-1;Z!=ra;Z+=t,Ca+=t)if(Ca>=o&&Ca<u&&Ia.test(I=U.charAt(Z))){var Ma=a[I];if(Ma.charAt(1)==">"==p)ka.push(I);else if(ka.pop()!=Ma.charAt(0))return{pos:Ca,match:false};else if(!ka.length)return{pos:Ca,match:true}}}}}var f=O.inverted?O.from:O.to,i=W[f.line],k=f.ch-1,n=k>=0&&a[i.text.charAt(k)]||a[i.text.charAt(++k)];if(n){n.charAt(0);var p=n.charAt(1)==">",t=p?1:-1,w=i.styles,C=k+1;n=0;for(var R=w.length;n<R;n+=2)if((C-=w[n].length)<=0){var ba=w[n+1];break}var ka=[i.text.charAt(k)],
Ia=/[(){}[\]]/;n=f.line;for(R=p?Math.min(n+50,W.length):Math.max(-1,n-50);n!=R;n+=t){i=W[n];w=n==f.line;if(i=e(i,w&&p?k+1:0,w&&!p?k:i.text.length)){ba=i.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var za=Tb({line:f.line,ch:k},{line:f.line,ch:k+1},ba),Ba=Tb({line:n,ch:i.pos},{line:n,ch:i.pos+1},ba);f=ya(function(){za();Ba()});if(b)setTimeout(f,800);else qb=f;break}}}}function Xb(b){for(var e,f,i=b;i>b-40;--i){if(i==0)return 0;var k=W[i-1];if(k.stateAfter)return i;k=k.indentation();
if(f==null||e>k){f=i;e=k}}return f}function hc(b){var e=Xb(b),f=e&&W[e-1].stateAfter;f=f?g(Ta,f):j(Ta);for(e=e;e<b;++e){var i=W[e];i.highlight(Ta,f);i.stateAfter=g(Ta,f)}W[b].stateAfter||cb.push(b);return f}function mc(){for(var b=+new Date+ma.workTime,e=false;cb.length;){var f=W[Ha].stateAfter?cb.pop():Ha;if(!(f>=W.length)){e=true;var i=Xb(f),k=i&&W[i-1].stateAfter;k=k?g(Ta,k):j(Ta);i=i;for(var n=W.length;i<n;++i){var p=W[i],t=p.stateAfter;if(+new Date>b){cb.push(i);Kb(ma.workDelay);Ua.push({from:f,
to:i});return}var w=p.highlight(Ta,k);p.stateAfter=g(Ta,k);if(t&&!w&&p.text)break}Ua.push({from:f,to:i})}}e&&ma.onHighlightComplete&&ma.onHighlightComplete($a)}function Kb(b){cb.length&&cc.set(b,ya(mc))}function Yb(){bb=null;Ua=[];pb=db=false}function Zb(){var b=false;if(db)b=!Fb();if(Ua.length)lb(Ua);else db&&Hb();b&&Fb();db&&dc();if(!Xa&&(bb===true||bb!==false&&db))gb();db&&ma.matchBrackets&&setTimeout(ya(function(){if(qb){qb();qb=null}Va(false)}),20);b=pb;db&&ma.onCursorActivity&&ma.onCursorActivity($a);
b&&ma.onChange&&$a&&ma.onChange($a,b)}function ya(b){return function(){d++||Yb();try{var e=b.apply(this,arguments)}finally{--d||Zb()}return e}}function ic(b,e,f){this.atOccurrence=false;if(f==null)f=typeof b=="string"&&b==b.toLowerCase();e=e&&typeof e=="object"?Ka(e):{line:0,ch:0};this.pos={from:e,to:e};if(typeof b!="string")this.matches=function(n,p){if(n)for(var t=W[p.line].text.slice(0,p.ch),w=t.match(b),C=0;w;){var R=t.indexOf(w[0]);C+=R;t=t.slice(R+1);if(R=t.match(b))w=R;else break;C++}else{t=
W[p.line].text.slice(p.ch);C=(w=t.match(b))&&p.ch+t.indexOf(w[0])}if(w)return{from:{line:p.line,ch:C},to:{line:p.line,ch:C+w[0].length},match:w}};else{if(f)b=b.toLowerCase();var i=f?function(n){return n.toLowerCase()}:function(n){return n},k=b.split("\n");this.matches=k.length==1?function(n,p){var t=i(W[p.line].text),w=b.length,C;if(n?p.ch>=w&&(C=t.lastIndexOf(b,p.ch-w))!=-1:(C=t.indexOf(b,p.ch))!=-1)return{from:{line:p.line,ch:C},to:{line:p.line,ch:C+w}}}:function(n,p){var t=p.line,w=n?k.length-
1:0,C=k[w],R=i(W[t].text),ba=n?R.indexOf(C)+C.length:R.lastIndexOf(C);if(!(n?ba>=p.ch||ba!=C.length:ba<=p.ch||ba!=R.length-C.length))for(;;){if(n?!t:t==W.length-1)return;R=i(W[t+=n?-1:1].text);C=k[n?--w:++w];if(w>0&&w<k.length-1)if(R!=C)return;else continue;w=n?R.lastIndexOf(C):R.indexOf(C)+C.length;if(n?w!=R.length-C.length:w!=C.length)return;C={line:p.line,ch:ba};t={line:t,ch:w};return{from:n?t:C,to:n?C:t}}}}}var ma={},Qb=h.defaults;for(var fb in Qb)if(Qb.hasOwnProperty(fb))ma[fb]=(A&&A.hasOwnProperty(fb)?
A:Qb)[fb];var mb=ma.document,va=mb.createElement("div");va.className="CodeMirror";if(window.ActiveXObject&&/MSIE [1-7]\b/.test(navigator.userAgent))va.style.position="relative";va.innerHTML='<div style="position: relative"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"></div><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div style="overflow: hidden; position: absolute; width: 1px; height: 0; left: 0"><textarea style="position: absolute; width: 100000px;" wrap="off"></textarea></div><div class="CodeMirror-lines"><div style="position: relative"><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div>';
c.appendChild?c.appendChild(va):c(va);var Ab=va.firstChild,eb=Ab.firstChild,Lb=eb.nextSibling,nb=Lb.firstChild,Mb=nb.firstChild,$b=nb.nextSibling,Ea=$b.firstChild,Ya=$b.nextSibling.firstChild,ob=Ya.firstChild,Qa=ob.nextSibling;if(ma.tabindex!=null)Ea.tabindex=ma.tabindex;if(!ma.gutter&&!ma.lineNumbers)nb.style.display="none";var ac=new P,cc=new P,bc,Ta,W=[new q("")],cb,Za=new x,Wa;ec();var O={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false},hb,ub,Db,bb,Ua,pb,db,Xa,Ha=0,ib=0,kc=0,jb=null,Pa,qb,
Eb="";ya(function(){L(ma.value||"");bb=false})();setTimeout(gb,20);N(va,"mousedown",ya(function(b){function e(C){var R=tb(C,true);if(R&&!na(R,n)){Wa||M();n=R;rb(k,R);bb=false;var ba=Sb();if(R.line>=ba.to||R.line<ba.from)p=setTimeout(ya(function(){e(C)}),150)}}var f=Db;Db=null;for(var i=b.target();i!=va;i=i.parentNode)if(i.parentNode==Mb){ma.onGutterClick&&ma.onGutterClick($a,y(Mb.childNodes,i)+Ha);return b.stop()}T&&b.button()==3&&gc(b);if(b.button()==1){var k=tb(b),n=k,p;if(k){Wa||M();b.stop();if(f&&
+new Date-f<400)return lc(k.line);yb(k.line,k.ch,true);var t=N(mb,"mousemove",ya(function(C){clearTimeout(p);C.stop();e(C)}),true),w=N(mb,"mouseup",ya(function(C){clearTimeout(p);var R=tb(C);R&&rb(k,R);C.stop();kb();bb=true;t();w()}),true)}else b.target()==va&&b.stop()}}));T||N(va,"contextmenu",ya(gc));N(Ab,"dblclick",ya(function(b){var e=tb(b);if(e){for(var f=W[e.line].text,i=e.ch,k=e.ch;i>0&&/\w/.test(f.charAt(i-1));)--i;for(;k<f.length&&/\w/.test(f.charAt(k));)++k;rb({line:e.line,ch:i},{line:e.line,
ch:k});b.stop();Db=+new Date}}));N(va,"scroll",function(){lb([]);ma.onScroll&&ma.onScroll($a)});N(window,"resize",function(){lb(true)});N(Ea,"keyup",ya(function(b){if(!(ma.onKeyEvent&&ma.onKeyEvent($a,B(b.e)))){if(ub){ub=null;bb=true}if(b.e.keyCode==16)hb=null}}));N(Ea,"keydown",ya(function(b){Wa||M();var e=b.e.keyCode,f=(xa?b.e.metaKey:b.e.ctrlKey)&&!b.e.altKey,i=b.e.ctrlKey||b.e.altKey||b.e.metaKey;hb=e==16||b.e.shiftKey?hb||(O.inverted?O.to:O.from):null;if(!(ma.onKeyEvent&&ma.onKeyEvent($a,B(b.e)))){if(e==
33||e==34){e=e==34;f=Math.floor(va.clientHeight/ab());i=O.inverted?O.from:O.to;yb(i.line+Math.max(f-1,1)*(e?1:-1),i.ch,true);return b.stop()}if(f&&(e==36||e==35||xa&&(e==38||e==40))){yb(e==36||e==38?0:W.length-1,true);return b.stop()}if(f&&e==65){e=W.length-1;xb({line:0,ch:0},{line:e,ch:W[e].text.length});return b.stop()}if(!ma.readOnly){if(!i&&e==13)return;if(i=!i){if(i=e==9)a:{i=b.e.shiftKey;hb=null;switch(ma.tabMode){case "default":i=false;break a;case "indent":for(var k=O.from.line,n=O.to.line;k<=
n;++k)sb(k,"smart");break;case "classic":if(na(O.from,O.to)){i?sb(O.from.line,"smart"):H("\t","end");break}case "shift":k=O.from.line;for(n=O.to.line;k<=n;++k)sb(k,i?"subtract":"add");break}i=true}i=i}if(i)return b.stop();if(f&&e==90){wa();return b.stop()}if(f&&(b.e.shiftKey&&e==90||e==89)){Ga();return b.stop()}}jb=(f?"c":"")+e;if(O.inverted&&Oa.hasOwnProperty(jb))if(b=Q(Ea)){ub={anchor:b.start};V(Ea,b.start,b.start)}ta(jb)}}));N(Ea,"keypress",ya(function(b){if(!(ma.onKeyEvent&&ma.onKeyEvent($a,B(b.e)))){if(ma.electricChars&&
Ta.electricChars){var e=String.fromCharCode(b.e.charCode==null?b.e.keyCode:b.e.charCode);Ta.electricChars.indexOf(e)>-1&&setTimeout(ya(function(){sb(O.to.line,"smart")}),50)}e=b.e.keyCode;if(e==13){if(!ma.readOnly){H("\n","end");if(ma.enterMode!="flat")sb(O.from.line,ma.enterMode=="keep"?"prev":"smart")}b.stop()}else!b.e.ctrlKey&&!b.e.altKey&&!b.e.metaKey&&e==9&&ma.tabMode!="default"?b.stop():ta(jb)}}));N(Ea,"focus",M);N(Ea,"blur",S);N(va,"dragenter",function(b){b.stop()});N(va,"dragover",function(b){b.stop()});
N(va,"drop",ya(function(b){var e=tb(b,true),f=b.e.dataTransfer.files;if(!(!e||ma.readOnly))if(f&&f.length&&window.FileReader&&window.File){var i=f.length,k=Array(i),n=0;for(b=0;b<i;++b)p(f[b],b);var p=function(w,C){var R=new FileReader;R.onload=function(){k[C]=R.result;++n==i&&Na(k.join(""),Ka(e),Ka(e))};R.readAsText(w)}}else try{(k=b.e.dataTransfer.getData("Text"))&&Na(k,e,e)}catch(t){}}));N(va,"paste",function(){kb();ta()});N(Ea,"paste",function(){ta()});N(Ea,"cut",function(){ta()});mb.activeElement==
Ea?M():S();var $a={getValue:function(){for(var b=[],e=0,f=W.length;e<f;++e)b.push(W[e].text);return b.join("\n")},setValue:ya(L),getSelection:ha,replaceSelection:ya(H),focus:function(){kb();M();ta()},setOption:function(b,e){ma[b]=e;if(b=="lineNumbers"||b=="gutter"){var f=ma.gutter||ma.lineNumbers;nb.style.display=f?"":"none";if(f)Gb();else Qa.parentNode.style.marginLeft=0}else if(b=="mode"||b=="indentUnit")ec();else b=="readOnly"&&e=="nocursor"&&Ea.blur()},getOption:function(b){return ma[b]},undo:ya(wa),
redo:ya(Ga),indentLine:ya(function(b){b>=0&&b<W.length&&sb(b,"smart")}),historySize:function(){return{undo:Za.done.length,redo:Za.undone.length}},matchBrackets:ya(function(){Va(true)}),getTokenAt:function(b){b=Ka(b);return W[b.line].getTokenAt(Ta,hc(b.line),b.ch)},cursorCoords:function(b){if(b==null)b=O.inverted;return fc(b?O.from:O.to)},charCoords:function(b){return fc(Ka(b))},coordsChar:function(b){var e=pa(Ya),f=zb(Math.min(W.length-1,Ha+Math.floor((b.y-e.top)/ab())));return Ka({line:f,ch:Vb(zb(f),
b.x-e.left)})},getSearchCursor:function(b,e,f){return new ic(b,e,f)},markText:ya(function(b,e,f){return ya(Tb(b,e,f))}),setMarker:function(b,e,f){if(typeof b=="number")b=W[zb(b)];b.gutterMarker={text:e,style:f};Gb();return b},clearMarker:function(b){if(typeof b=="number")b=W[zb(b)];b.gutterMarker=null;Gb()},setLineClass:ya(function(b,e){if(typeof b=="number"){var f=b;b=W[zb(b)]}else{f=y(W,b);if(f==-1)return null}if(b.className!=e){b.className=e;Ua.push({from:f,to:f+1})}return b}),lineInfo:function(b){if(typeof b==
"number"){var e=b;b=W[b];if(!b)return null}else{e=y(W,b);if(e==-1)return null}var f=b.gutterMarker;return{line:e,text:b.text,markerText:f&&f.text,markerClass:f&&f.style}},addWidget:function(b,e,f){b=Wb(Ka(b),true);e.style.top=Ha*ab()+b.yBot+Ya.offsetTop+"px";e.style.left=b.x+Ya.offsetLeft+"px";Ab.appendChild(e);f&&Rb(b.x,b.yBot,b.x+e.offsetWidth,b.yBot+e.offsetHeight)},lineCount:function(){return W.length},getCursor:function(b){if(b==null)b=O.inverted;return{line:(b?O.from:O.to).line,ch:(b?O.from:
O.to).ch}},somethingSelected:function(){return!na(O.from,O.to)},setCursor:ya(function(b,e){e==null&&typeof b.line=="number"?yb(b.line,b.ch):yb(b,e)}),setSelection:ya(function(b,e){xb(Ka(b),Ka(e||b))}),getLine:function(b){if(b>=0&&b<W.length)return W[b].text},setLine:ya(function(b,e){b>=0&&b<W.length&&Na(e,{line:b,ch:0},{line:b,ch:W[b].text.length})}),removeLine:ya(function(b){b>=0&&b<W.length&&Na("",{line:b,ch:0},Ka({line:b+1,ch:0}))}),replaceRange:ya(Na),getRange:function(b,e){return aa(Ka(b),Ka(e))},
operation:function(b){return ya(b)()},refresh:function(){lb(true)},getInputField:function(){return Ea},getWrapperElement:function(){return va}},Pb=false,a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},d=0;ic.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(b){function e(k){k={line:k,ch:0};f.pos={from:k,to:k};return f.atOccurrence=false}for(var f=this,i=Ka(b?this.pos.from:this.pos.to);;){if(this.pos=this.matches(b,i)){this.atOccurrence=
true;return this.pos.match||true}if(b){if(!i.line)return e(0);i={line:i.line-1,ch:W[i.line-1].text.length}}else{if(i.line==W.length-1)return e(W.length);i={line:i.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return{line:this.pos.from.line,ch:this.pos.from.ch}},to:function(){if(this.atOccurrence)return{line:this.pos.to.line,ch:this.pos.to.ch}}};return $a}function g(c,A){if(A===true)return A;if(c.copyState)return c.copyState(A);var L={};for(var M in A){var S=A[M];if(S instanceof Array)S=S.concat([]);
L[M]=S}return L}function j(c,A,L){return c.startState?c.startState(A,L):true}function l(c){this.pos=this.start=0;this.string=c}function q(c,A){this.styles=A||[c,null];this.stateAfter=null;this.text=c;this.marked=this.gutterMarker=this.className=null}function s(c,A,L,M){for(var S=0,ja=0,ia=0;ja<A;S+=2){var wa=L[S],Ga=ja+wa.length;if(ia==0){Ga>c&&M.push(wa.slice(c-ja,Math.min(wa.length,A-ja)),L[S+1]);if(Ga>=c)ia=1}else if(ia==1)Ga>A?M.push(wa.slice(0,A-ja),L[S+1]):M.push(wa,L[S+1]);ja=Ga}}function x(){this.time=
0;this.done=[];this.undone=[]}function G(){if(this.preventDefault){this.preventDefault();this.stopPropagation()}else{this.returnValue=false;this.cancelBubble=true}}function B(c){if(!c.stop)c.stop=G;return c}function z(c){this.e=c}function N(c,A,L,M){function S(ja){L(new z(ja||window.event))}if(typeof c.addEventListener=="function"){c.addEventListener(A,S,false);if(M)return function(){c.removeEventListener(A,S,false)}}else{c.attachEvent("on"+A,S);if(M)return function(){c.detachEvent("on"+A,S)}}}function P(){this.id=
null}function la(c,A){if(A==null){A=c.search(/[^\s\u00a0]/);if(A==-1)A=c.length}for(var L=0,M=0;L<A;++L)if(c.charAt(L)=="\t")M+=ga-M%ga;else++M;return M}function pa(c,A){for(var L=c.ownerDocument.body,M=0,S=0,ja=false,ia=c;ia;ia=ia.offsetParent){M+=ia.offsetLeft;S+=ia.offsetTop;if(ia==L)ja=true}for(ia=c.parentNode;ia!=(A&&ja?null:L);ia=ia.parentNode)if(ia.scrollLeft!=null){M-=ia.scrollLeft;S-=ia.scrollTop}return{left:M,top:S}}function na(c,A){return c.line==A.line&&c.ch==A.ch}function m(c,A){return c.line<
A.line||c.line==A.line&&c.ch<A.ch}function r(c){return c.replace(/[<>&]/g,function(A){return A=="&"?"&amp;":A=="<"?"&lt;":"&gt;"})}function y(c,A){if(c.indexOf)return c.indexOf(A);for(var L=0,M=c.length;L<M;++L)if(c[L]==A)return L;return-1}h.defaults={value:"",mode:null,indentUnit:2,indentWithTabs:false,tabMode:"classic",enterMode:"indent",electricChars:true,onKeyEvent:null,lineNumbers:false,gutter:false,firstLineNumber:1,readOnly:false,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,
onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,undoDepth:40,tabindex:null,document:window.document};var E={},ca={};h.defineMode=function(c,A){if(!h.defaults.mode&&c!="null")h.defaults.mode=c;E[c]=A};h.defineMIME=function(c,A){ca[c]=A};h.getMode=function(c,A){if(typeof A=="string"&&ca.hasOwnProperty(A))A=ca[A];if(typeof A=="string")var L=A,M={};else if(A!=null){L=A.name;M=A}var S=E[L];if(!S){window.console&&console.warn("No mode "+L+" found, falling back to plain text.");
return h.getMode(c,"text/plain")}return S(c,M||{})};h.listModes=function(){var c=[];for(var A in E)E.propertyIsEnumerable(A)&&c.push(A);return c};h.listMIMEs=function(){var c=[];for(var A in ca)ca.propertyIsEnumerable(A)&&c.push(A);return c};h.fromTextArea=function(c,A){function L(){c.value=ia.getValue()}A||(A={});A.value=c.value;if(!A.tabindex&&c.tabindex)A.tabindex=c.tabindex;if(c.form){var M=N(c.form,"submit",L,true);if(typeof c.form.submit=="function"){var S=c.form.submit,ja=function(){L();c.form.submit=
S;c.form.submit();c.form.submit=ja};c.form.submit=ja}}c.style.display="none";var ia=h(function(wa){c.parentNode.insertBefore(wa,c.nextSibling)},A);ia.save=L;ia.toTextArea=function(){L();c.parentNode.removeChild(ia.getWrapperElement());c.style.display="";if(c.form){M();if(typeof c.form.submit=="function")c.form.submit=S}};return ia};h.startState=j;h.copyState=g;l.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},
next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(c){var A=this.string.charAt(this.pos);if(typeof c=="string"?A==c:A&&(c.test?c.test(A):c(A))){++this.pos;return A}},eatWhile:function(c){for(var A=this.start;this.eat(c););return this.pos>A},eatSpace:function(){for(var c=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>c},skipToEnd:function(){this.pos=this.string.length},skipTo:function(c){c=this.string.indexOf(c,this.pos);
if(c>-1){this.pos=c;return true}},backUp:function(c){this.pos-=c},column:function(){return la(this.string,this.start)},indentation:function(){return la(this.string)},match:function(c,A,L){if(typeof c=="string"){if((L?this.string.toLowerCase():this.string).indexOf(L?c.toLowerCase():c,this.pos)==this.pos){if(A!==false)this.pos+=c.length;return true}}else{if((c=this.string.slice(this.pos).match(c))&&A!==false)this.pos+=c[0].length;return c}},current:function(){return this.string.slice(this.start,this.pos)}};
q.prototype={replace:function(c,A,L){var M=[],S=this.marked;s(0,c,this.styles,M);L&&M.push(L,null);s(A,this.text.length,this.styles,M);this.styles=M;this.text=this.text.slice(0,c)+L+this.text.slice(A);this.stateAfter=null;if(S){c=L.length-(A-c);L=this.text.length;for(M=0;M<S.length;++M){var ja=S[M],ia=false;if(ja.from>=L)ia=true;else{ja.from=ja.from<=Math.min(A,A+c)?ja.from:ja.from+c;if(ja.to!=null)ja.to=ja.to<=Math.min(A,A+c)?ja.to:ja.to+c}if(ia||ja.from>=ja.to){S.splice(M,1);M--}}}},split:function(c,
A){var L=[A,null];s(c,this.text.length,this.styles,L);return new q(A+this.text.slice(c),L)},addMark:function(c,A,L){c={from:c,to:A,style:L};if(this.marked==null)this.marked=[];this.marked.push(c);this.marked.sort(function(M,S){return M.from-S.from});return c},removeMark:function(c){var A=this.marked;if(A)for(var L=0;L<A.length;++L)if(A[L]==c){A.splice(L,1);break}},highlight:function(c,A){var L=new l(this.text),M=this.styles,S=0,ja=false,ia=M[0],wa;for(this.text==""&&c.blankLine&&c.blankLine(A);!L.eol();){var Ga=
c.token(L,A),ua=this.text.slice(L.start,L.pos);L.start=L.pos;if(S&&M[S-1]==Ga)M[S-2]+=ua;else if(ua){if(!ja&&(M[S+1]!=Ga||S&&M[S-2]!=wa))ja=true;M[S++]=ua;M[S++]=Ga;wa=ia;ia=M[S]}if(L.pos>5E3){M[S++]=this.text.slice(L.pos);M[S++]=null;break}}if(M.length!=S){M.length=S;ja=true}if(S&&M[S-2]!=wa)ja=true;return ja},getTokenAt:function(c,A,L){for(var M=new l(this.text);M.pos<L&&!M.eol();){M.start=M.pos;var S=c.token(M,A)}return{start:M.start,end:M.pos,string:M.current(),className:S||null,state:A}},indentation:function(){return la(this.text)},
getHTML:function(c,A,L,M){function S(kb,Fb){if(kb)Fb?ja.push('<span class="',Fb,'">',r(kb),"</span>"):ja.push(r(kb))}var ja=[];if(L)ja.push(this.className?'<pre class="'+this.className+'">':"<pre>");var ia=this.styles,wa=this.text,Ga=this.marked;if(c==A)c=null;var ua=wa.length;if(M!=null)ua=Math.min(M,ua);if(!wa&&M==null)S(" ",c!=null&&A==null?"CodeMirror-selected":null);else if(!Ga&&c==null)for(c=M=0;c<ua;M+=2){A=ia[M];var Na=A.length;if(c+Na>ua)A=A.slice(0,ua-c);c+=Na;S(A,ia[M+1])}else{M=wa=0;var H=
"",ea=-1,aa=null,ha=function(){if(Ga){ea+=1;aa=ea<Ga.length?Ga[ea]:null}};for(ha();wa<ua;){var sa=ua,ta="";if(c!=null)if(c>wa)sa=c;else if(A==null||A>wa){ta=" CodeMirror-selected";if(A!=null)sa=Math.min(sa,A)}for(;aa&&aa.to!=null&&aa.to<=wa;)ha();if(aa)if(aa.from>wa)sa=Math.min(sa,aa.from);else{ta+=" "+aa.style;if(aa.to!=null)sa=Math.min(sa,aa.to)}for(;;){var La=wa+H.length,gb=Na;if(ta)gb=Na?Na+ta:ta;S(La>sa?H.slice(0,sa-wa):H,gb);if(La>=sa){H=H.slice(sa-wa);wa=sa;break}wa=La;H=ia[M++];Na=ia[M++]}}c!=
null&&A==null&&S(" ","CodeMirror-selected")}L&&ja.push("</pre>");return ja.join("")}};x.prototype={addChange:function(c,A,L){this.undone.length=0;var M=+new Date,S=this.done[this.done.length-1];if(M-this.time>400||!S||S.start>c+A||S.start+S.added<c-S.added+S.old.length)this.done.push({start:c,added:A,old:L});else{var ja=0;if(c<S.start){for(var ia=S.start-c-1;ia>=0;--ia)S.old.unshift(L[ia]);S.added+=S.start-c;S.start=c}else if(S.start<c){ja=c-S.start;A+=ja}ia=S.added-ja;for(c=L.length;ia<c;++ia)S.old.push(L[ia]);
if(S.added<A)S.added=A}this.time=M}};z.prototype={stop:function(){G.call(this.e)},target:function(){return this.e.target||this.e.srcElement},button:function(){if(this.e.which)return this.e.which;else if(this.e.button&1)return 1;else if(this.e.button&2)return 3;else if(this.e.button&4)return 2},pageX:function(){if(this.e.pageX!=null)return this.e.pageX;var c=this.target().ownerDocument;return this.e.clientX+c.body.scrollLeft+c.documentElement.scrollLeft},pageY:function(){if(this.e.pageY!=null)return this.e.pageY;
var c=this.target().ownerDocument;return this.e.clientY+c.body.scrollTop+c.documentElement.scrollTop}};P.prototype={set:function(c,A){clearTimeout(this.id);this.id=setTimeout(A,c)}};var oa=function(){var c=document.createElement("pre");c.innerHTML=" ";return!c.innerHTML}(),T=/gecko\/\d{7}/i.test(navigator.userAgent),fa="\n";(function(){var c=document.createElement("textarea");c.value="foo\nbar";if(c.value.indexOf("\r")>-1)fa="\r\n"})();for(var ga=8,xa=/Mac/.test(navigator.platform),Oa={},Ra=35;Ra<=
40;++Ra)Oa[Ra]=Oa["c"+Ra]=true;var X="\n\nb".split(/\n/).length!=3?function(c){for(var A=0,L,M=[];(L=c.indexOf("\n",A))>-1;){M.push(c.slice(A,c.charAt(L-1)=="\r"?L-1:L));A=L+1}M.push(c.slice(A));return M}:function(c){return c.split(/\r?\n/)};if(window.getSelection)var Q=function(c){try{return{start:c.selectionStart,end:c.selectionEnd}}catch(A){return null}},V=function(c,A,L){try{c.setSelectionRange(A,L)}catch(M){}};else{Q=function(c){try{var A=c.ownerDocument.selection.createRange()}catch(L){return null}if(!A||
A.parentElement()!=c)return null;var M=c.value,S=M.length,ja=c.createTextRange();ja.moveToBookmark(A.getBookmark());var ia=c.createTextRange();ia.collapse(false);if(ja.compareEndPoints("StartToEnd",ia)>-1)return{start:S,end:S};c=-ja.moveStart("character",-S);for(A=M.indexOf("\r");A>-1&&A<c;A=M.indexOf("\r",A+1),c++);if(ja.compareEndPoints("EndToEnd",ia)>-1)return{start:c,end:S};S=-ja.moveEnd("character",-S);for(A=M.indexOf("\r");A>-1&&A<S;A=M.indexOf("\r",A+1),S++);return{start:c,end:S}};V=function(c,
A,L){var M=c.createTextRange();M.collapse(true);var S=M.duplicate(),ja=0;c=c.value;for(var ia=c.indexOf("\n");ia>-1&&ia<A;ia=c.indexOf("\n",ia+1))++ja;for(M.move("character",A-ja);ia>-1&&ia<L;ia=c.indexOf("\n",ia+1))++ja;S.move("character",L-ja);M.setEndPoint("EndToEnd",S);M.select()}}h.defineMode("null",function(){return{token:function(c){c.skipToEnd()}}});h.defineMIME("text/plain","null");return h}();
jQuery.cookie=function(h,g,j){if(typeof g!="undefined"){j=j||{};if(g===null){g="";j.expires=-1}var l="";if(j.expires&&(typeof j.expires=="number"||j.expires.toUTCString)){if(typeof j.expires=="number"){l=new Date;l.setTime(l.getTime()+j.expires*24*60*60*1E3)}else l=j.expires;l="; expires="+l.toUTCString()}var q=j.path?"; path="+j.path:"",s=j.domain?"; domain="+j.domain:"";j=j.secure?"; secure":"";document.cookie=[h,"=",encodeURIComponent(g),l,q,s,j].join("")}else{g=null;if(document.cookie&&document.cookie!=
""){j=document.cookie.split(";");for(l=0;l<j.length;l++){q=jQuery.trim(j[l]);if(q.substring(0,h.length+1)==h+"="){g=decodeURIComponent(q.substring(h.length+1));break}}}return g}};
function Sanskrit(h,g){this.options=g||{};this.textarea=h;this.form=h.form;this.container=document.createElement("div");this.iframe=document.createElement("iframe");this.hiddenInput=document.createElement("input");this.hiddenInput.type="hidden";this.callbacks=Sanskrit.inherit(Sanskrit.prototype.callbacks);for(var j in Sanskrit.prototype.callbacks)if(Sanskrit.prototype.callbacks.hasOwnProperty(j)&&typeof this.options[j]==="function")this.callbacks[j]=this.options[j];this.replaceTextarea();var l=this;
this.onReady(function(){l.findContentDocument();if(l.richTextIsAvailable()){l.applyClassNames();l.enableEditor();l.addStyle(Sanskrit.defaultStyle);l.createToolbar();l.hijackForm()}else l.unreplaceTextarea()});Sanskrit.editors.push(this)}Sanskrit.inherit=function(h){function g(){}g.prototype=h;return new g};Sanskrit.getClassName=function(h){return h.getAttribute("class")||h.getAttribute("className")};Sanskrit.setClassName=function(h,g){h.setAttribute("class",g);h.className=g};
Sanskrit.hasClassName=function(h,g){if(!Sanskrit.getClassName(h))return false;for(var j=Sanskrit.getClassName(h).split(" "),l=0;l<j.length;l++)if(j[l]==g)return true;return false};Sanskrit.addClassName=function(h,g){if(Sanskrit.hasClassName(h,g))return false;var j=Sanskrit.getClassName(h)||"";Sanskrit.setClassName(h,j==""?g:j+" "+g);return true};
Sanskrit.removeClassName=function(h,g){for(var j=(Sanskrit.getClassName(h)||"").split(" "),l=[],q=0;q<j.length;q++)j[q]!=g&&l.push(j[q]);l=l.join(" ");Sanskrit.setClassName(h,l);return l};Sanskrit.defaultStyle="html { padding:0; cursor:text; } body { font-size:90%; margin:0; padding:0.5em; cursor:text; } p { margin: 0.5em 0; }";Sanskrit.editors=[];
Sanskrit.prototype={onReady:function(h){setTimeout(h,250)},findContentDocument:function(){if(this.iframe.contentDocument){this.internetExplorer=false;this.contentDocument=this.iframe.contentDocument}else{this.internetExplorer=true;this.contentDocument=this.iframe.contentWindow.document}return this.contentDocument},replaceTextarea:function(){this.container.appendChild(this.iframe);this.hiddenInput.value=this.textarea.value;this.hiddenInput.name=this.textarea.name;this.hiddenInput.id=this.textarea.id;
this.container.insertBefore(this.hiddenInput,this.iframe);this.textarea.parentNode.insertBefore(this.container,this.textarea);this.textarea.parentNode.removeChild(this.textarea)},unreplaceTextarea:function(){this.container.parentNode.insertBefore(this.textarea,this.container);this.container.parentNode.removeChild(this.container)},toggleTextarea:function(){if(this.iframe.parentNode){this.textarea.value=this.textilize(this.getContents());this.iframe.parentNode.insertBefore(this.textarea,this.iframe);
this.iframe.parentNode.removeChild(this.iframe);return true}else{this.textarea.parentNode.insertBefore(this.iframe,this.textarea);this.textarea.parentNode.removeChild(this.textarea);var h=this;this.onReady(function(){h.findContentDocument();h.hiddenInput.value=h.textarea.value;h.enableEditor();h.toolbar.observeEditor()});return false}},enableEditor:function(){this.contentDocument.designMode="on";try{this.execCommand("styleWithCSS",false)}catch(h){}this.setContents(this.htmlize(this.hiddenInput.value))},
focusEditor:function(){this.iframe.contentWindow.focus()},createToolbar:function(){this.toolbar=new SanskritToolbar(this,this.options.toolbar||{})},insertToolbar:function(h){this.container.insertBefore(h,this.iframe)},getContents:function(){return this.contentDocument.getElementsByTagName("body")[0].innerHTML},setContents:function(h){var g=this;setTimeout(function(){g.contentDocument.getElementsByTagName("body")[0].innerHTML=h},250)},getSelection:function(){return this.iframe.contentWindow.document.selection?
this.iframe.contentWindow.document.selection:this.iframe.contentWindow.getSelection()},getCurrentAncestors:function(){var h=this.getSelection();if(h.createRange){h=h.createRange();h=h.parentElement()}else{h=h.getRangeAt(0);h=h.commonAncestorContainer}for(var g=[];h.nodeType!==1||h.nodeName.toLowerCase()!=="body";){h.nodeType===1&&g.push(h);h=h.parentNode}return g},includeAncestor:function(h,g){g=g||this.getCurrentAncestors();for(var j=false,l=0;l<g.length;l++)if(g[l].nodeName.toLowerCase()==h.toLowerCase())j=
true;return j},applyClassNames:function(){Sanskrit.addClassName(this.container,this.options.className||"sanskrit")},hijackForm:function(){var h=this,g=this.form.onsubmit||function(){};this.form.onsubmit=function(){g();h.hiddenInput.value=h.textilize(h.iframe.parentNode?h.getContents():h.textarea.value);return h.callbacks.onSubmit.call(h)}},addStyle:function(h){var g=this;setTimeout(function(){if(document.createStyleSheet){var j=g.contentDocument.createStyleSheet(),l=h.split("}"),q,s;for(q=0;q<l.length-
1;q++){s=l[q].split("{");j.addRule(s[0],s[1])}}else{j=document.createElement("style");j.appendChild(document.createTextNode(h));g.contentDocument.getElementsByTagName("head")[0].appendChild(j)}},250)},textilize:function(h,g){h=h.replace(/\s*<p>((.|[\r\n])*?)<\/p>\s*/gi,"\n\n$1\n\n");h=h.replace(/<br ?\/?>/gi,"\n");h=h.replace(/<(?:b|strong)>((.|[\r\n])*?)<\/(?:b|strong)>/gi,"*$1*");h=h.replace(/<(?:i|em)>((.|[\r\n])*?)<\/(?:i|em)>/gi,"_$1_");h=h.replace(/<(?:strike|del)>((.|[\r\n])*?)<\/(?:strike|del)>/gi,
"-$1-");h=h.replace(/<(?:u|ins)>((.|[\r\n])*?)<\/(?:u|ins)>/gi,"+$1+");h=h.replace(/<a href="(.*?)">((.|[\r\n])*?)<\/a>/gi,'"$2":$1');h=h.replace(/<code.*?>((.|[\r\n])*?)<\/code>/gi,"@$1@");if(g)h=h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");h=h.replace(/(\r\n|\n){3,}/g,"\n\n");return h=h.replace(/^[\r\n]+|[\r\n]+$/g,"")},htmlize:function(h,g){for(var j=h.split("\n\n"),l=0;l<j.length;l++){j[l]=j[l].replace(/(^|\r\n|\n|\r)\* (.*)/g,"$1###LI### $2");j[l]=j[l].replace(/\n/gi,"<br/>");
j[l]=j[l].replace(/@((.|[\r\n])*?)@/gi,"<code>$1</code>");j[l]=j[l].replace(/\*(.+?)\*/gi,this.internetExplorer?"<strong>$1</strong>":"<b>$1</b>");j[l]=j[l].replace(/_(.+?)_/gi,this.internetExplorer?"<em>$1</em>":"<i>$1</i>");j[l]=j[l].replace(/\+(.+?)\+/gi,"<u>$1</u>");j[l]=j[l].replace(/-(.+?)-/gi,"<strike>$1</strike>");j[l]=j[l].replace(/"(.+?)":([^\s\n<]+)/gi,'<a href="$2">$1</a>');j[l]=j[l].replace(/###LI###/gi,"*");j[l]="<p>"+j[l]+"</p>"}h=j.join("\n");h=h.replace(/<p>[\s\n]*<\/p>/g,"");if(g)h=
h.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return h},execCommand:function(h,g){if(typeof g=="undefined")g=null;this.contentDocument.execCommand(h,false,g)},richTextIsAvailable:function(){return typeof this.contentDocument.execCommand!="undefined"},callbacks:{onSubmit:function(){return true}}};
function SanskritToolbar(h,g){this.options=g||{};this.editor=h;this.list=document.createElement("ul");this.listItems=[];this.listItemCallbacks={};this.availableActions={strong:"strong",em:"em",ins:"ins",del:"del",link:"link",unlink:"unlink",textile:"textile"};this.callbacks=Sanskrit.inherit(SanskritToolbar.prototype.callbacks);for(var j in this.actions){var l="on"+j.slice(0,1).toUpperCase()+j.slice(1);if(typeof this.options[l]==="function")this.callbacks[l]=this.options[l]}this.addListItems();this.applyClassNames();
this.injectListIntoEditor();this.observeEditor()}
SanskritToolbar.prototype={actions:{strong:function(h){h.execCommand("Bold")},em:function(h){h.execCommand("Italic")},link:function(h){var g=prompt("Enter link address:");if(typeof g==="string"){g.match(/^[a-zA-Z]+:\/\//)||(g="http://"+g);h.execCommand("createLink",g)}else return false},unlink:function(h){h.execCommand("unlink");h.toolbar.deactivateListItem("link");h.toolbar.activateListItem("unlink")},del:function(h){h.execCommand("strikeThrough")},ins:function(h){h.execCommand("underline")},textile:function(h){h.toolbar.resetListStatus();
var g=h.toolbar;(h=h.toggleTextarea())?g.activateListItem("textile"):g.deactivateListItem("textile");for(var j in g.actions)if(g.actions.hasOwnProperty(j)&&j!=="textile")h?g.hideListItem(j):g.showListItem(j);return false}},callbacks:{},createAction:function(h,g){var j=this,l=h.onclick||function(){};return function(){l();if(j.actions[g](j.editor)!==false){var q="on"+g.slice(0,1).toUpperCase()+g.slice(1);typeof j.callbacks[q]==="function"&&j.callbacks[q].call(j.editor);j.updateListStatus(j.editor.getCurrentAncestors());
j.editor.focusEditor()}return false}},addListItems:function(){var h=this.options.actions||this.availableActions;for(var g in h)if(h.hasOwnProperty(g)){var j=document.createElement("li"),l=document.createElement("a");l.setAttribute("href","#");Sanskrit.addClassName(j,g);l.appendChild(typeof h[g]=="string"?document.createTextNode(h[g]):h[g]);l.onclick=this.createAction(l,g);j.appendChild(l);this.listItems.push(j);this.list.appendChild(j)}},applyClassNames:function(){Sanskrit.addClassName(this.list,
"toolbar")},injectListIntoEditor:function(){this.editor.insertToolbar(this.list)},observeEditor:function(){var h=this;setTimeout(function(){if(h.editor.contentDocument.addEventListener){h.editor.contentDocument.addEventListener("mouseup",function(){h.updateListStatus(h.editor.getCurrentAncestors())},false);h.editor.contentDocument.addEventListener("keyup",function(){h.updateListStatus(h.editor.getCurrentAncestors())},false);h.editor.contentDocument.addEventListener("keydown",function(){h.updateListStatus(h.editor.getCurrentAncestors())},
false);h.editor.contentDocument.addEventListener("blur",function(){h.resetListStatus()},false)}else{h.editor.contentDocument.attachEvent("onmouseup",function(){h.updateListStatus(h.editor.getCurrentAncestors())});h.editor.contentDocument.attachEvent("onkeyup",function(){h.updateListStatus(h.editor.getCurrentAncestors())});h.editor.contentDocument.attachEvent("onkeydown",function(){h.updateListStatus(h.editor.getCurrentAncestors())},false);h.editor.contentDocument.attachEvent("onblur",function(){h.resetListStatus()},
false)}},100)},getListItem:function(h){if(typeof h!="string")return h;for(var g=0;g<this.listItems.length;g++)if(Sanskrit.hasClassName(this.listItems[g],h))return this.listItems[g];return document.createElement("li")},activateListItem:function(h){Sanskrit.addClassName(this.getListItem(h),"active")},deactivateListItem:function(h){Sanskrit.removeClassName(this.getListItem(h),"active")},toggleListItem:function(h){h=this.getListItem(h);Sanskrit.hasClassName(h,"active")?Sanskrit.removeClassName(h,"active"):
Sanskrit.addClassName(h,"active")},hideListItem:function(h){h=this.getListItem(h);h.previousDisplayValue=h.style.display;h.style.display="none"},showListItem:function(h){h=this.getListItem(h);h.style.display=h.previousDisplayValue||""},resetListStatus:function(){for(var h=0;h<this.listItems.length;h++)this.deactivateListItem(this.listItems[h])},updateListStatus:function(h){this.resetListStatus();for(var g=0;g<h.length;g++)switch(h[g].nodeName.toLowerCase()){case "b":this.activateListItem("strong");
break;case "strong":this.activateListItem("strong");break;case "i":this.activateListItem("em");break;case "em":this.activateListItem("em");break;case "u":this.activateListItem("ins");break;case "strike":this.activateListItem("del");break;case "a":this.activateListItem("link");break}}};Sanskrit.onLoadFunction=function(){for(var h=[],g=document.getElementsByTagName("textarea"),j=0;j<g.length;j++)h.push(g[j]);for(j=0;j<h.length;j++)Sanskrit.hasClassName(h[j],"sanskrit")&&new Sanskrit(h[j])};
if(typeof Event!="undefined"&&Event.onReady)Event.onReady(Sanskrit.onLoadFunction);else if(typeof Event!="undefined"&&Event.observe)Event.observe(window,"load",Sanskrit.onLoadFunction);else if(window.addEventListener)window.addEventListener("load",Sanskrit.onLoadFunction,false);else if(window.attachEvent)window.attachEvent("onload",Sanskrit.onLoadFunction,false);else{var old=window.onload;window.onload=function(){old();Sanskrit.onLoadFunction()}}
CodeMirror.defineMode("javascript",function(h,g){function j(H,ea){for(var aa=false,ha;(ha=H.next())!=null;){if(ha==ea&&!aa)return false;aa=!aa&&ha=="\\"}return aa}function l(H,ea,aa){ia=H;wa=aa;return ea}function q(H,ea){var aa=H.next();if(aa=='"'||aa=="'"){aa=s(aa);ea.tokenize=aa;return aa(H,ea)}else if(/[\[\]{}\(\),;\:\.]/.test(aa))return l(aa);else if(aa=="0"&&H.eat(/x/i)){H.eatWhile(/[\da-f]/i);return l("number","js-atom")}else if(/\d/.test(aa)){H.match(/^\d*(?:\.\d*)?(?:e[+\-]?\d+)?/);return l("number",
"js-atom")}else if(aa=="/")if(H.eat("*")){aa=x;ea.tokenize=aa;return aa(H,ea)}else if(H.eat("/")){H.skipToEnd();return l("comment","js-comment")}else if(ea.reAllowed){j(H,"/");H.eatWhile(/[gimy]/);return l("regexp","js-string")}else{H.eatWhile(ja);return l("operator",null,H.current())}else if(ja.test(aa)){H.eatWhile(ja);return l("operator",null,H.current())}else{H.eatWhile(/[\w\$_]/);aa=H.current();var ha=S.propertyIsEnumerable(aa)&&S[aa];return ha?l(ha.type,ha.style,aa):l("variable","js-variable",
aa)}}function s(H){return function(ea,aa){if(!j(ea,H))aa.tokenize=q;return l("string","js-string")}}function x(H,ea){for(var aa=false,ha;ha=H.next();){if(ha=="/"&&aa){ea.tokenize=q;break}aa=ha=="*"}return l("comment","js-comment")}function G(H,ea,aa,ha,sa,ta){this.indented=H;this.column=ea;this.type=aa;this.prev=sa;this.info=ta;if(ha!=null)this.align=ha}function B(){for(var H=arguments.length-1;H>=0;H--)ua.cc.push(arguments[H])}function z(){B.apply(null,arguments);return true}function N(H){var ea=
ua.state;if(ea.context){ua.marked="js-variabledef";for(var aa=ea.localVars;aa;aa=aa.next)if(aa.name==H)return;ea.localVars={name:H,next:ea.localVars}}}function P(){if(!ua.state.context)ua.state.localVars=Na;ua.state.context={prev:ua.state.context,vars:ua.state.localVars}}function la(){ua.state.localVars=ua.state.context.vars;ua.state.context=ua.state.context.prev}function pa(H,ea){var aa=function(){var ha=ua.state;ha.lexical=new G(ha.indented,ua.stream.column(),H,null,ha.lexical,ea)};aa.lex=true;
return aa}function na(){var H=ua.state;if(H.lexical.prev){if(H.lexical.type==")")H.indented=H.lexical.indented;H.lexical=H.lexical.prev}}function m(H){return function(ea){return ea==H?z():H==";"?B():z(arguments.callee)}}function r(H){if(H=="var")return z(pa("vardef"),xa,m(";"),na);if(H=="keyword a")return z(pa("form"),y,r,na);if(H=="keyword b")return z(pa("form"),r,na);if(H=="{")return z(pa("}"),ga,na);if(H==";")return z();if(H=="function")return z(c);if(H=="for")return z(pa("form"),m("("),pa(")"),
Ra,m(")"),na,r,na);if(H=="variable")return z(pa("stat"),ca);if(H=="switch")return z(pa("form"),y,pa("}","switch"),m("{"),ga,na,na);if(H=="case")return z(y,m(":"));if(H=="default")return z(m(":"));if(H=="catch")return z(pa("form"),P,m("("),A,m(")"),r,na,la);return B(pa("stat"),y,m(";"),na)}function y(H){if(Ga.hasOwnProperty(H))return z(E);if(H=="function")return z(c);if(H=="keyword c")return z(y);if(H=="(")return z(pa(")"),y,m(")"),na,E);if(H=="operator")return z(y);if(H=="[")return z(pa("]"),fa(y,
"]"),na,E);if(H=="{")return z(pa("}"),fa(T,"}"),na,E);return z()}function E(H,ea){if(H=="operator"&&/\+\+|--/.test(ea))return z(E);if(H=="operator")return z(y);if(H!=";"){if(H=="(")return z(pa(")"),fa(y,")"),na,E);if(H==".")return z(oa,E);if(H=="[")return z(pa("]"),y,m("]"),na,E)}}function ca(H){if(H==":")return z(na,r);return B(E,m(";"),na)}function oa(H){if(H=="variable"){ua.marked="js-property";return z()}}function T(H){if(H=="variable")ua.marked="js-property";if(Ga.hasOwnProperty(H))return z(m(":"),
y)}function fa(H,ea){function aa(ha){if(ha==",")return z(H,aa);if(ha==ea)return z();return z(m(ea))}return function(ha){return ha==ea?z():B(H,aa)}}function ga(H){if(H=="}")return z();return B(r,ga)}function xa(H,ea){if(H=="variable"){N(ea);return z(Oa)}return z()}function Oa(H,ea){if(ea=="=")return z(y,Oa);if(H==",")return z(xa)}function Ra(H){if(H=="var")return z(xa,Q);if(H==";")return B(Q);if(H=="variable")return z(X);return B(Q)}function X(H,ea){if(ea=="in")return z(y);return z(E,Q)}function Q(H,
ea){if(H==";")return z(V);if(ea=="in")return z(y);return z(y,m(";"),V)}function V(H){H!=")"&&z(y)}function c(H,ea){if(H=="variable"){N(ea);return z(c)}if(H=="(")return z(pa(")"),P,fa(A,")"),na,r,la)}function A(H,ea){if(H=="variable"){N(ea);return z()}}var L=h.indentUnit,M=g.json,S=function(){function H(La){return{type:La,style:"js-keyword"}}var ea=H("keyword a"),aa=H("keyword b"),ha=H("keyword c"),sa=H("operator"),ta={type:"atom",style:"js-atom"};return{"if":ea,"while":ea,"with":ea,"else":aa,"do":aa,
"try":aa,"finally":aa,"return":ha,"break":ha,"continue":ha,"new":ha,"delete":ha,"throw":ha,"var":H("var"),"function":H("function"),"catch":H("catch"),"for":H("for"),"switch":H("switch"),"case":H("case"),"default":H("default"),"in":sa,"typeof":sa,"instanceof":sa,"true":ta,"false":ta,"null":ta,undefined:ta,NaN:ta,Infinity:ta}}(),ja=/[+\-*&%=<>!?|]/,ia,wa,Ga={atom:true,number:true,variable:true,string:true,regexp:true},ua={state:null,column:null,marked:null,cc:null},Na={name:"this",next:{name:"arguments"}};
na.lex=true;return{startState:function(H){return{tokenize:q,reAllowed:true,cc:[],lexical:new G((H||0)-L,0,"block",false),localVars:null,context:null,indented:0}},token:function(H,ea){if(H.sol()){if(!ea.lexical.hasOwnProperty("align"))ea.lexical.align=false;ea.indented=H.indentation()}if(H.eatSpace())return null;var aa=ea.tokenize(H,ea);if(ia=="comment")return aa;ea.reAllowed=ia=="operator"||ia=="keyword c"||ia.match(/^[\[{}\(,;:]$/);var ha;a:{var sa=ia,ta=wa,La=ea.cc;ua.state=ea;ua.stream=H;ua.marked=
null;ua.cc=La;if(!ea.lexical.hasOwnProperty("align"))ea.lexical.align=true;for(;;)if((La.length?La.pop():M?y:r)(sa,ta)){for(;La.length&&La[La.length-1].lex;)La.pop()();if(ua.marked){ha=ua.marked;break a}if(ha=sa=="variable")b:{for(ha=ea.localVars;ha;ha=ha.next)if(ha.name==ta){ha=true;break b}ha=void 0}if(ha){ha="js-localvariable";break a}ha=aa;break a}}return ha},indent:function(H,ea){if(H.tokenize!=q)return 0;var aa=ea&&ea.charAt(0),ha=H.lexical,sa=ha.type,ta=aa==sa;return sa=="vardef"?ha.indented+
4:sa=="form"&&aa=="{"?ha.indented:sa=="stat"||sa=="form"?ha.indented+L:ha.info=="switch"&&!ta?ha.indented+(/^(?:case|default)\b/.test(ea)?L:2*L):ha.align?ha.column+(ta?0:1):ha.indented+(ta?0:L)},electricChars:":{}"}});CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});
CodeMirror.defineMode("xml",function(h,g){function j(T,fa){function ga(Oa){fa.tokenize=Oa;return Oa(T,fa)}var xa=T.next();if(xa=="<")if(T.eat("!"))if(T.eat("["))return T.match("CDATA[")?ga(s("xml-cdata","]]\>")):null;else if(T.match("--"))return ga(s("xml-comment","--\>"));else if(T.match("DOCTYPE")){T.eatWhile(/[\w\._\-]/);return ga(s("xml-doctype",">"))}else return null;else if(T.eat("?")){T.eatWhile(/[\w\._\-]/);fa.tokenize=s("xml-processing","?>");return"xml-processing"}else{E=T.eat("/")?"closeTag":
"openTag";T.eatSpace();for(y="";xa=T.eat(/[^\s\u00a0=<>\"\'\/?]/);)y+=xa;fa.tokenize=l;return"xml-tag"}else if(xa=="&"){T.eatWhile(/[^;]/);T.eat(";");return"xml-entity"}else{T.eatWhile(/[^&<]/);return null}}function l(T,fa){var ga=T.next();if(ga==">"||ga=="/"&&T.eat(">")){fa.tokenize=j;E=ga==">"?"endTag":"selfcloseTag";return"xml-tag"}else if(ga=="="){E="equals";return null}else if(/[\'\"]/.test(ga)){fa.tokenize=q(ga);return fa.tokenize(T,fa)}else{T.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);return"xml-word"}}
function q(T){return function(fa,ga){for(;!fa.eol();)if(fa.next()==T){ga.tokenize=l;break}return"xml-attribute"}}function s(T,fa){return function(ga,xa){for(;!ga.eol();){if(ga.match(fa)){xa.tokenize=j;break}ga.next()}return T}}function x(){for(var T=arguments.length-1;T>=0;T--)ca.cc.push(arguments[T])}function G(){x.apply(null,arguments);return true}function B(T,fa){var ga=m.doNotIndent.hasOwnProperty(T)||ca.context&&ca.context.noIndent;ca.context={prev:ca.context,tagName:T,indent:ca.indented,startOfLine:fa,
noIndent:ga}}function z(T){if(T=="openTag"){ca.tagName=y;return G(la,N(ca.startOfLine))}else if(T=="closeTag"){if(ca.context)ca.context=ca.context.prev;return G(P)}else{if(T=="xml-cdata"){if(!ca.context||ca.context.name!="!cdata")B("!cdata");if(ca.tokenize==j)if(ca.context)ca.context=ca.context.prev}return G()}}function N(T){return function(fa){if(fa=="selfcloseTag"||fa=="endTag"&&m.autoSelfClosers.hasOwnProperty(ca.tagName.toLowerCase()))return G();if(fa=="endTag"){B(ca.tagName,T);return G()}return G()}}
function P(T){if(T=="endTag")return G();return x()}function la(T){if(T=="xml-word"){oa="xml-attname";return G(la)}if(T=="equals")return G(pa,la);return x()}function pa(T){if(T=="xml-word"&&m.allowUnquoted){oa="xml-attribute";return G()}if(T=="xml-attribute")return G();return x()}var na=h.indentUnit,m=g.htmlMode?{autoSelfClosers:{br:true,img:true,hr:true,link:true,input:true,meta:true,col:true,frame:true,base:true,area:true},doNotIndent:{pre:true,"!cdata":true},allowUnquoted:true}:{autoSelfClosers:{},
doNotIndent:{"!cdata":true},allowUnquoted:false},r=g.alignCDATA,y,E,ca,oa;return{startState:function(){return{tokenize:j,cc:[],indented:0,startOfLine:true,tagName:null,context:null}},token:function(T,fa){if(T.sol()){fa.startOfLine=true;fa.indented=T.indentation()}if(T.eatSpace())return null;oa=E=y=null;var ga=fa.tokenize(T,fa);if((ga||E)&&ga!="xml-comment")for(ca=fa;;)if((fa.cc.pop()||z)(E||ga))break;fa.startOfLine=false;return oa||ga},indent:function(T,fa){var ga=T.context;if(ga&&ga.noIndent)return 0;
if(r&&/<!\[CDATA\[/.test(fa))return 0;if(ga&&/^<\//.test(fa))ga=ga.prev;for(;ga&&!ga.startOfLine;)ga=ga.prev;return ga?ga.indent+na:0},electricChars:"/"}});CodeMirror.defineMIME("application/xml","xml");CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});
CodeMirror.defineMode("css",function(h){function g(B,z){G=z;return B}function j(B,z){var N=B.next();if(N=="@"){B.eatWhile(/\w/);return g("css-at",B.current())}else if(N=="/"&&B.eat("*")){z.tokenize=l;return l(B,z)}else if(N=="<"&&B.eat("!")){z.tokenize=q;return q(B,z)}else if(N=="=")g(null,"compare");else if((N=="~"||N=="|")&&B.eat("="))return g(null,"compare");else if(N=='"'||N=="'"){z.tokenize=s(N);return z.tokenize(B,z)}else if(N=="#"){B.eatWhile(/\w/);return g("css-selector","hash")}else if(N==
"!"){B.match(/^\s*\w*/);return g("css-important","important")}else if(/\d/.test(N)){B.eatWhile(/[\w.%]/);return g("css-unit","unit")}else if(/[,.+>*\/]/.test(N))return g(null,"select-op");else if(/[;{}:\[\]]/.test(N))return g(null,N);else{B.eatWhile(/[\w\\\-_]/);return g("css-identifier","identifier")}}function l(B,z){for(var N=false,P;(P=B.next())!=null;){if(N&&P=="/"){z.tokenize=j;break}N=P=="*"}return g("css-comment","comment")}function q(B,z){for(var N=0,P;(P=B.next())!=null;){if(N>=2&&P==">"){z.tokenize=
j;break}N=P=="-"?N+1:0}return g("css-comment","comment")}function s(B){return function(z,N){for(var P=false,la;(la=z.next())!=null;){if(la==B&&!P)break;P=!P&&la=="\\"}if(!P)N.tokenize=j;return g("css-string","string")}}var x=h.indentUnit,G;return{startState:function(B){return{tokenize:j,baseIndent:B||0,stack:[]}},token:function(B,z){if(B.eatSpace())return null;var N=z.tokenize(B,z),P=z.stack[z.stack.length-1];if(G=="hash"&&P=="rule")N="css-colorcode";else if(N=="css-identifier")if(P=="rule")N="css-value";
else if(!P||P=="@media{")N="css-selector";P=="rule"&&/^[\{\};]$/.test(G)&&z.stack.pop();if(G=="{")if(P=="@media")z.stack[z.stack.length-1]="@media{";else z.stack.push("{");else if(G=="}")z.stack.pop();else if(G=="@media")z.stack.push("@media");else P!="rule"&&P!="@media"&&G!="comment"&&z.stack.push("rule");return N},indent:function(B,z){var N=B.stack.length;if(/^\}/.test(z))N-=B.stack[B.stack.length-1]=="rule"?2:1;return B.baseIndent+N*x},electricChars:"}"}});CodeMirror.defineMIME("text/css","css");
CodeMirror.defineMode("liquid",function(h){function g(B,z){var N=s.token(B,z.htmlState);if(N=="xml-tag"&&B.current()==">"&&z.htmlState.context)if(/^script$/i.test(z.htmlState.context.tagName)){z.token=l;z.localState=x.startState(s.indent(z.htmlState,""))}else if(/^style$/i.test(z.htmlState.context.tagName)){z.token=q;z.localState=G.startState(s.indent(z.htmlState,""))}return N}function j(B,z,N){var P=B.current();z=P.search(z);z>-1&&B.backUp(P.length-z);return N}function l(B,z){if(B.match(/^<\/\s*script\s*>/i,
false)){z.token=g;z.curState=null;return g(B,z)}return j(B,/<\/\s*script\s*>/,x.token(B,z.localState))}function q(B,z){if(B.match(/^<\/\s*style\s*>/i,false)){z.token=g;z.localState=null;return g(B,z)}return j(B,/<\/\s*style\s*>/,G.token(B,z.localState))}var s=CodeMirror.getMode(h,{name:"xml",htmlMode:true}),x=CodeMirror.getMode(h,"javascript"),G=CodeMirror.getMode(h,"css");return{startState:function(){var B=s.startState();return{token:g,localState:null,htmlState:B}},copyState:function(B){if(B.localState)var z=
CodeMirror.copyState(B.token==q?G:x,B.localState);return{token:B.token,localState:z,htmlState:CodeMirror.copyState(s,B.htmlState)}},token:function(B,z){return z.token(B,z)},indent:function(B,z){return B.token==g||/^\s*<\//.test(z)?s.indent(B.htmlState,z):B.token==l?x.indent(B.localState,z):G.indent(B.localState,z)},electricChars:"/{}:"}});CodeMirror.defineMIME("text/html","htmlmixed");
var Asset=Model("asset",function(){this.persistence(Model.REST,"/admin/assets");this.include({toMustache:function(h){this.merge({query_path:h?"?"+decodeURIComponent(jQuery.param({query:h})):"",query:h});return this.attr()},toMustacheWithNeighbors:function(h){var g=Asset.all(),j=g.indexOf(this),l=this.toMustache(h),q=g[j+1]?Asset.all()[j+1].toMustache(h):null;h=g[j-1]?Asset.all()[j-1].toMustache(h):null;jQuery("<img />")[0].src="/images/large/"+l.id+"/"+l.file_name;if(q)jQuery("<img />")[0].src="/images/large/"+
q.id+"/"+q.file_name;if(h)jQuery("<img />")[0].src="/images/large/"+h.id+"/"+h.file_name;return{asset:l,next:q,previous:h}}});this.extend({toMustache:function(h){var g=h?"?"+decodeURIComponent(jQuery.param({query:h})):"";return{assets:this.map(function(j){j.merge({query_path:g,query:h});return j.attr()}),query:h}},asJSON:function(){return Asset.map(function(h){return h.attr()})},tags:function(){tags=[];Asset.map(function(){tags=tags.concat(this.attr("tags"))});return tags},searchRemote:function(h,
g){var j=h!=null?decodeURIComponent(jQuery.param({query:h})):"";Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/search.json",contentType:"application/json",dataType:"json",data:j,success:function(l){jQuery.each(l,function(q,s){var x=new Asset({id:s.id});x.merge(s);Asset.add(x)});g.call(this)}})},searchAdmin:function(h,g){Asset.each(function(){Asset.remove(this)});jQuery.ajax({type:"get",url:"/admin/assets.json",contentType:"application/json",dataType:"json",data:h,success:function(j){$.each(j,
function(l,q){var s=new Asset({id:q.id});s.merge(q);Asset.add(s)});g.call(this)}})},keys:{},create:function(h,g){Asset.callback=g;xhr=new XMLHttpRequest;var j=Asset.generate_uuid();jQuery(".progress").append('<p id="progress-'+j+'">'+h.name+'<span class="percentage"></span></p>');xhr.upload.uuid=j;xhr.upload.filename=h.name;xhr.upload.addEventListener("loadstart",Asset.onloadstartHandler,false);xhr.upload.addEventListener("progress",Asset.onprogressHandler);xhr.upload.addEventListener("load",Asset.onloadHandler,
false);xhr.addEventListener("readystatechange",Asset.onreadystatechangeHandler,false);xhr.open("POST","/admin/assets.json",true);xhr.setRequestHeader("Content-Type","application/octet-stream");xhr.setRequestHeader("X-File-Name",h.name);xhr.setRequestHeader("X-File-Upload","true");xhr.send(h)},onloadstartHandler:function(){console.log("started")},onloadHandler:function(){console.log("success")},onprogressHandler:function(h){var g=Math.round(h.loaded/h.total*100);jQuery("#progress-"+h.target.uuid+" .percentage").text(" "+
g+"%")},onreadystatechangeHandler:function(h){var g=null;try{g=h.target.status}catch(j){return}if(g=="200"&&h.target.readyState==4&&h.target.responseText){h=JSON.parse(h.target.responseText);g=new Asset({id:h.id});g.merge(h);Asset.add(g);Asset.callback.success&&Asset.callback.success.call(this,g)}},generate_uuid:function(){for(var h=[],g=0;g<32;g++)h[g]="0123456789ABCDEF".substr(Math.floor(Math.random()*16),1);h[12]="4";h[16]="0123456789ABCDEF".substr(h[16]&3|8,1);return h.join("")}})}),Page=Model("page",
function(){this.persistence(Model.SinatraREST,"/admin/pages");this.include({children:function(){return Page.find_all_by_parent_id(this.id())},has_children:function(){if(this.children().all().length>0)return true},assets:function(){for(var h=this.attr("assets"),g=0,j=h.length;g<j;++g){var l=h[g],q=new Asset({id:l.id});q.merge(l);Asset.add(q)}return Asset},parts:function(){for(var h=this.attr("parts"),g=0,j=h.length;g<j;++g){var l=h[g],q=new Part({id:l.id});q.merge(l);q.attr("page_id",this.id());Part.add(q)}return Part},
load:function(h){var g=this,j="/admin/pages/"+g.id()+".json";jQuery.ajax({type:"GET",url:j,dataType:"json",success:function(l){g.merge(l);h.call(this)}})},saveRemote:function(h,g){var j=this,l="/admin/pages/"+this.id()+".json";jQuery.ajax({type:"PUT",url:l,data:h,dataType:"json",success:function(q){if(q.errors){alert(JSON.stringify(q.errors));g.error&&g.error.call(this)}else{j.merge(q);g.success&&g.success.call(this)}}})}});this.extend({toMustache:function(){return{pages:this.map(function(h){return h.attr()})}},
asJSON:function(){return Page.map(function(h){return h.attr()})},root:function(){return this.detect(function(){return this.attr("parent_id")==null})},find_by_parent_id:function(h){return this.detect(function(){return this.attr("parent_id")==h})},find_all_by_parent_id:function(h){return this.select(function(){return this.attr("parent_id")==h})},create:function(h,g){jQuery.ajax({type:"post",url:"/admin/pages.json",dataType:"json",data:{page:h},success:function(j){var l=new Page({id:j.id});l.merge(j);
Page.add(l);g.call(this,j)}})}})}),Layout=Model("template",function(){this.persistence(Model.SinatraREST,"/admin/templates");this.include({});this.extend({toMustache:function(){return{layouts:this.map(function(h){return h.attr()})}},asLayoutJSON:function(h){return Layout.find_all_by_class("Layout").map(function(g){h==g.id()?g.attr("selected",'selected="selected"'):g.attr("selected","");return g.attr()})},find_by_class:function(h){return this.detect(function(){return this.attr("klass")==h})},find_all_by_class:function(h){return this.select(function(){return this.attr("klass")==
h})},asJSON_by_class:function(h){return this.find_all_by_class(function(){return h.map(function(g){return g.attributes})})}})}),Part=Model("part",function(){this.include({deleteRemote:function(h,g){var j="/admin/pages/"+h.id()+"/parts/"+this.id()+".json";jQuery.ajax({type:"DELETE",url:j,dataType:"json",success:function(l){h.merge(l);g.call(this)}})}});this.extend({toMustache:function(){return{parts:this.map(function(h){return h.attr()})}},create:function(h,g){var j="/admin/templates/"+h.template_id+
"/parts.json",l=Layout.find(h.template_id);jQuery.ajax({type:"post",url:j,dataType:"json",data:{part:h},success:function(q){l.merge(q);g.call(this)}})}})}),Site=Model("site",function(){this.persistence(Model.SinatraREST,"/admin/sites");this.include({});this.extend({toMustache:function(){return{sites:this.map(function(h){return h.attr()})}}})}),User=Model("user",function(){this.persistence(Model.SinatraREST,"/admin/users");this.include({});this.extend({toMustache:function(){return{users:this.map(function(h){return h.attr()})}}})}),
Galerie={open:function(h,g){$("body").append('<div id="overlay"></div>').append('<div id="modal_wrapper"><div id="modal"></div></div>');var j=$("#modal");j.html(h);var l=$("#modal_wrapper"),q=$(window).height();j=j.height()+42;j=(q-j)/2;$("#overlay").css({height:q}).hide().fadeIn("fast");l.hide().fadeIn("fast").css({top:j});g&&g.call(this)},close:function(){$("#modal_wrapper").fadeOut("fast",function(){$(this).remove();$("#overlay").fadeOut("fast",function(){$(this).remove()})})}},logger={info:function(h){window.console&&
console.log(h)},debug:function(h){window.console&&console.log(h)}},Utilities={notice:function(h){var g=jQuery(".notice");g.text(h);g.slideDown("slow",function(){setTimeout(function(){g.slideUp("slow")},1E3)})},keyboard_nav:function(){jQuery("body").keydown(function(h){switch(h.keyCode){case 37:$("a.previous").click();break;case 39:$("a.next").click();break}})},check_browser_version:function(){if(!Modernizr.history){jQuery("a").live("click",function(g){g.preventDefault();document.location.hash=$(this).attr("href")});
var h=jQuery("form#search-form");h.attr("action","#"+h.attr("action"))}},formObserver:function(h){jQuery(h).keyup(function(){delay(function(){jQuery(h).parents("form:first").submit()},800)})}},iFramer={initialize:function(h,g){var j=jQuery(h),l=this;j.length&&j.load(function(){var q=$(this).contents().find("span.part-editor"),s=q.find("a");logger.info("load");$(this).fadeIn("fast");l.setEditFlags(q);s.click(function(){window.top.trigger=$(this);window.top.location.hash=$(this).attr("href");return false});
g&&g.call(this)})},setEditFlags:function(h){h.css({position:"relative",display:"block",height:"0",width:"0","text-decoration":"none"}).find("span").css({display:"block",position:"absolute",top:"-24px",left:"12px",padding:"4px 8px",width:"100px",background:"rgba(255, 255, 0, 0.7)"})}},TabControl={initialize:function(h){if(h=jQuery(h)){h.each(function(g,j){$(j).hide()});h.first().show();this.tabControl(jQuery(".tab-control"))}},tabControl:function(h){h.click(function(){var g="tab-"+$(this).find("label").attr("for").split("-")[1];
console.log(g);jQuery(".tab").hide();jQuery("#"+g).show()})}},delay=function(){var h=0;return function(g,j){clearTimeout(h);h=setTimeout(g,j)}}();
Sites=Sammy(function(){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadSites:function(g){if(Site.all().length==0)Site.load(function(){g&&g.call(this)});else g&&g.call(this)},renderSiteIndex:function(){this.render("/templates/admin/sites/index.mustache",Site.toMustache()).replace("#sidebar")}});this.bind("run",function(){h.modal=false;h.refresh_pages=true});this.get("#/preview",function(){alert(document.location.hostname);
window.open("/","preview")});this.get("#/sites",function(g){h.refresh_pages=true;Galerie.close();jQuery("#editor").html('<h1 class="section">Sites</div>');g.loadSites(function(){g.renderSiteIndex()})});this.get("#/sites/new",function(g){g.loadSites(function(){$("#modal").length==0&&Galerie.open();g.render("/templates/admin/sites/new.mustache").replace("#modal");g.renderSiteIndex(Site.all())})});this.post("#/sites",function(g){(new Site(g.params.site)).save(function(j,l){var q=JSON.parse(l.responseText);
q.errors?alert(JSON.stringify(q)):g.redirect("#/sites")})});this.get("#/sites/:id/edit",function(g){Galerie.close();g.loadSites(function(){site=Site.find(g.params.id);g.render("/templates/admin/sites/edit.mustache",{site:site.asJSON()}).replace("#editor");g.renderSiteIndex(Site.all())})});this.put("#/sites/:id",function(g){var j=Site.find(g.params.id);j.attr(g.params.site);j.save(function(l,q){var s=JSON.parse(q.responseText);s.errors?alert(JSON.stringify(s)):g.redirect("#/sites")})});this.get("#/sites/:id/remove",
function(g){Galerie.open();g.loadSites(function(){site=Site.find(g.params.id);g.render("/templates/admin/sites/remove.mustache",{site:site.asJSON()}).replace("#modal");g.renderSiteIndex(Site.all())})});this.del("#/sites/:id",function(g){site.destroy(function(j){j?g.redirect("#/sites"):alert("there were issues")})})});
Layouts=Sammy(function(){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadLayouts:function(g){if(Layout.all().length==0)Layout.load(function(){g&&g.call(this)});else g&&g.call(this)},renderLayoutIndex:function(){this.render("/templates/admin/templates/index.mustache",{layouts:Layout.find_all_by_class("Layout").map(function(g){return g.attributes}),partials:Layout.find_all_by_class("Partial").map(function(g){return g.attributes}),
javascripts:Layout.find_all_by_class("Javascript").map(function(g){return g.attributes}),stylesheets:Layout.find_all_by_class("Stylesheet").map(function(g){return g.attributes})}).replace("#sidebar")},renderLayout:function(g){console.log(g.attr("filter")=="css"?"selected":"");this.render("/templates/admin/templates/edit.mustache",{layout:g.asJSON(),filters:[{name:"none",value:"none",selected:g.attr("filter")=="css"?'selected="selected"':""},{name:"Sass",value:"sass",selected:g.attr("filter")=="sass"?
'selected="selected"':""},{name:"Scss",value:"scss",selected:g.attr("filter")=="scss"?'selected="selected"':""}]}).replace("#editor").then(function(){var j=jQuery("#layout_content");j.attr("value",g.attr("content"));j=j.attr("class");jQuery("#layout_content").length>0&&CodeMirror.fromTextArea(document.getElementById("layout_content"),{mode:j,lineNumbers:true})})}});this.bind("run",function(){h.refresh_templates=true;h.refresh_pages=true;h.modal=false});this.get("#/templates",function(g){Galerie.close();
h.refresh_templates=false;h.refresh_pages=true;jQuery("#editor").html('<h1 class="section">Templates</div>');g.loadLayouts(function(){g.renderLayoutIndex(Layout.all())})});this.get("#/templates/new/:klass",function(g){this.loadLayouts(function(){var j=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(j);g.render("/templates/admin/templates/new.mustache",{klass:g.params.klass}).replace("#new-page-container");g.renderLayoutIndex(Layout.all())})});
this.post("#/templates",function(g){(new Layout(g.params.template)).save(function(j,l){var q=JSON.parse(l.responseText);if(q.errors)Utilities.notice(JSON.stringify(q));else{g.redirect("#/templates");Utilities.notice("Successfully saved template")}})});this.get("#/templates/:id/edit",function(g){Galerie.close();h.refresh_pages=true;this.loadLayouts(function(){var j=Layout.find(g.params.id);g.renderLayout(j);g.renderLayoutIndex(Layout.all())})});this.put("#/templates/:id",function(g){var j=Layout.find(g.params.id);
console.log(g.params.layout);j.attr(g.params.layout);j.save(function(l){if(l){g.renderLayoutIndex();Utilities.notice("Successfully saved template")}})});this.get("#/templates/:id/remove",function(g){this.loadLayouts(function(){var j=Layout.find(g.params.id);Galerie.open();g.render("/templates/admin/templates/remove.mustache",{layout:j.asJSON()}).replace("#modal");g.renderLayoutIndex(Layout.all())})});this.del("/templates/:id",function(g){Layout.find(g.params.id).destroy(function(j){if(j){g.renderLayoutIndex();
Utilities.notice("Successfully deleted template");g.redirect("#/templates")}})});this.post("/layouts/:id/parts",function(g){this.loadLayouts(function(){var j=g.params.id,l=g.params.part;alert(JSON.stringify(g.params.part));Part.create(l,function(){g.redirect("#/templates/"+j+"/edit")})})})});
Assets=Sammy(function(){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.swap=function(g){jQuery("#editor").html(g)};this.helpers({loadAssets:function(g,j){if(Asset.all().length==0)Asset.searchAdmin(g,function(){j&&j.call(this)});else j&&j.call(this)},send_files:function(g){for(var j=this,l=0;l<g.length;l++)Asset.create(g[l],{progress:function(){},success:function(q){j.render("/templates/admin/assets/asset.mustache",
{asset:q.attr()}).prependTo("#assets")}})}});this.bind("run",function(){h.modal=false;h.first_run=true});this.get("#/assets",function(g){var j=g.params.query,l=j?{query:j}:{};l.limit=g.params.limit||48;l.page=g.params.page||1;Galerie.close();h.modal||Asset.searchAdmin(l,function(){g.render("/templates/admin/assets/index.mustache",Asset.toMustache(j)).replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")})});h.modal=false;h.first_run=false});this.get("#/assets/new",
function(g){g.render("/templates/admin/assets/new.mustache").replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple","multiple")});h.first_run=false});this.post("/admin/assets",function(g){var j=this,l=document.getElementById("ajax_uploader").files,q=g.params.query?g.params.query:null;jQuery("form#new_asset");var s=q?{query:q}:{};s.limit=g.params.limit||48;s.page=g.params.page||1;this.send_files(l,s,function(){j.render("/templates/admin/assets/index.mustache",Asset.toMustache(s.query)).replace("#editor").then(function(){jQuery("#ajax_uploader").attr("multiple",
"multiple")})});return false});this.get("#/assets/:id/edit",function(g){var j=g.params.query?g.params.query:null;this.loadAssets(j?{query:g.params.query}:{},function(){var l=Asset.find(g.params.id);g.render("/templates/admin/assets/edit.mustache",l.toMustacheWithNeighbors(j)).replace("#editor").then(function(){setTimeout(function(){$("img.fade-in").fadeIn("slow")},100);Utilities.formObserver(".image-info input[type=text], .image-info textarea")})});h.modal=false});this.put("#/assets/:id",function(g){var j=
Asset.find(g.params.id);j.attr(g.params.asset);j.save(function(l){l&&Utilities.notice("Successfully saved asset")})});this.get("#/assets/:id/remove",function(g){var j=g.params.query?g.params.query:null,l=j?{query:g.params.query}:null;Galerie.close();Galerie.open(jQuery("<div />").attr({id:"remove-asset-container","class":"wide-modal"}));this.loadAssets(l,function(){var q=Asset.find(g.params.id);g.render("/templates/admin/assets/remove.mustache",{asset:q.toMustache(j)}).replace("#remove-asset-container");
h.first_run&&g.render("/templates/admin/assets/index.mustache",Asset.toMustache(j)).replace("#editor")})});this.del("#/assets/:id",function(g){var j=g.params.query?g.params.query:null,l=j?"?"+decodeURIComponent(jQuery.param({query:j})):"";Asset.find(g.params.id).destroy(function(q){if(q){Galerie.close();Utilities.notice("Successfully saved asset");g.redirect("#/assets"+l)}})})});
Pages=Sammy(function(h){var g=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);h.helpers({loadPages:function(j){if(Page.all().length==0)Page.load(function(){Layout.load(function(){j&&j.call(this)})});else j&&j.call(this)},renderTree:function(j,l){var q=this;q.render("/templates/admin/pages/node.mustache",{pages:[j.asJSON()]}).replace("#sidebar").then(function(){q.renderNode(j,l)})},renderNode:function(j,l){var q=this;pageNode=
q.render("/templates/admin/pages/node.mustache",j.children().toMustache());pageNode.appendTo("#page-"+j.id()).then(function(){j.children().each(function(s){s.id()==l.id()&&jQuery("li#page-"+s.id()).addClass("active");if(s.has_children()==true){jQuery("#page-"+s.id()).addClass("open");q.renderNode(s,l)}})})},renderPagePreview:function(j,l){g.modal||this.render("/templates/admin/pages/show.mustache",{page:j.asJSON(),layouts:Layout.asLayoutJSON(j.attr("layout_id")),base_page_id:j.id()}).replace("#editor").then(function(){iFramer.initialize(".preview iframe",
function(){l&&l.call(this)});jQuery("li.node").removeClass("active");jQuery("#page-"+j.id()).addClass("active")})},open_page_editor:function(){var j=jQuery("#page-editor"),l=jQuery("#page-title");j.addClass("open").animate({height:"200px"},300);l.removeAttr("disabled").focus()},close_page_editor:function(){var j=jQuery("#page-editor"),l=jQuery("#page-title");j.removeClass("open").animate({height:"0"},300);l.attr("disabled","disabled")}});this.bind("run",function(){g.application=this;g.refresh_pages=
true;g.modal=false;jQuery(".add-asset").live("click",function(){g.application.trigger("add-asset");return false});jQuery("#sidebar .opener").live("click",function(){var j=(new Date).getTime();j=$(this).parents("li:first");var l=this.id.split("-")[2],q=Page.find(l),s=jQuery.cookie("active_page_ids");s=s?s.split(","):[];if(j.hasClass("open")){j.toggleClass("open");s=jQuery.grep(s,function(x){return x!=l});jQuery.cookie("active_page_ids",s.join(","),{path:"/admin"});q.children().each(function(x){Page.remove(x)});
jQuery("#page-"+l+" ul").remove()}else{s.push(l);j.toggleClass("open");j=(new Date).getTime();jQuery.cookie("active_page_ids",s.join(","),{path:"/admin"});Page.load(function(){g.application.renderNode(q)})}g.refresh_pages=false;return g.modal=false})});this.get("#/pages/?",function(j){Galerie.close();g.refresh_pages&&j.loadPages(function(){j.renderTree(Page.root(),Page.root());logger.info("pages")});jQuery("#editor").html('<h1 class="section">Pages</div>');g.refresh_pages=true;g.do_not_refresh=false});
this.get("#/pages/:id/new/?",function(j){this.loadPages(function(){var l=Page.find(j.params.id),q=$("<div />").attr({id:"new-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(q);if(g.refresh_pages){j.renderTree(Page.root(),l);g.refresh_pages=true}j.render("/templates/admin/pages/new.mustache",{parent:l.asJSON(),layouts:Layout.asLayoutJSON(l.attr("layout_id"))}).replace("#new-page-container")})});this.post("#/pages/:page_id",function(j){Page.find(j.params.page_id);(new Page(j.params.page)).save(function(l,
q){var s=JSON.parse(q.responseText);if(s.errors)alert(JSON.stringify(s));else{g.refresh_pages=true;Utilities.notice("Successfully saved page");j.redirect("#/pages/"+s.id)}})});this.get("#/pages/:id/?",function(j){var l=this;Galerie.close();jQuery(".modal-editor").remove();this.loadPages(function(){var q=j.params.id,s=Page.find(q);if(g.do_not_refresh)l.close_page_editor();else{if(s)j.renderPagePreview(s);else{s=new Page({id:q});s.load(function(){j.renderPagePreview(s)})}g.modal=false;g.do_not_refresh=
false;if(g.refresh_pages){j.renderTree(Page.root(),s);g.refresh_pages=false}}});g.do_not_refresh=false});this.get("#/pages/:id/edit/?",function(j){var l=this;Galerie.close();g.modal=false;this.loadPages(function(){var q=Page.find(j.params.id);if(jQuery("#preview-"+q.id()).length)l.open_page_editor();else{j.renderPagePreview(q,function(){l.open_page_editor()});if(g.refresh_pages){j.renderTree(Page.root(),q);g.refresh_pages=false}}});g.do_not_refresh=true});this.put("#/pages/:page_id",function(j){var l=
Page.find(j.params.page_id);l.attr(j.params.page);l.save(function(q){if(q){g.modal=false;Utilities.notice("Successfully saved page");j.renderTree(Page.root(),l)}})});this.get("#/pages/:id/remove",function(j){this.loadPages(function(){var l=Page.find(j.params.id),q=$("<div />").attr({id:"remove-page-container","class":"small-modal"});$("#modal").length==0&&Galerie.open(q);g.refresh_pages&&j.renderTree(Page.root(),Page.root());j.render("/templates/admin/pages/remove.mustache",{page:l.asJSON()}).replace("#remove-page-container")})});
this.del("/pages/:id",function(j){var l=j.params.id;Page.find(l).destroy(function(q){if(q){jQuery("#page-"+l).remove();g.refresh_pages=false;j.redirect("#/pages")}})});this.get("/pages/:id/results",function(j){this.loadPages(function(){var l=Page.find(j.params.id),q=j.params.query?j.params.query:null;Asset.searchAdmin(q?{query:q}:{},function(){Asset.each(function(s){s.attr("current_page_id",l.id());s.save()});j.render("/templates/admin/pages/search_results.mustache",Asset.toMustache()).replace("#search-results-container")})})});
this.get("#/pages/:page_id/assets/:id/add",function(j){this.loadPages(function(){var l=j.params.page_id,q=Page.find(l),s=Asset.find(j.params.id),x=jQuery("#page-asset-ids");x.attr("value");var G=x.attr("value")+","+s.id();x.attr("value",G);q.saveRemote({page:{assets_list:G}},{success:function(){var B=jQuery('<div class="asset" />').attr("id","page-asset-"+s.id()),z=jQuery('<a href="#/assets/'+s.id()+'/edit"></a>'),N=jQuery('<br /><a href="#/pages/'+q.id()+"/assets/"+s.id()+'/remove">Remove</a>');
z.append('<img src="/images/icons/'+s.id()+"/"+s.attr("file_name")+'" alt="'+s.attr("title")+'" /></a>');B.html(z);B.append(N);jQuery("#page-assets").append(B);var P=jQuery(".preview iframe");P.hide().attr("src",P.attr("src"));P.load(function(){P.fadeIn("fast")});g.do_not_refresh=true;j.redirect("#/pages/"+l)}})})});this.get("#/pages/:page_id/assets/:id/remove",function(j){this.loadPages(function(){var l=j.params.id,q=j.params.page_id,s=Page.find(q),x=jQuery("#page-asset-ids"),G=x.attr("value").split(","),
B=G.indexOf(l);B!=-1&&G.splice(B,1);x.attr("value",G);s.attr("assets_list",G.join(","));s.save(function(){jQuery("#page-asset-"+l).fadeOut("fast",function(){$(this).remove()});var z=jQuery(".preview iframe");z.hide().attr("src",z.attr("src"));z.load(function(){z.fadeIn("fast")});g.do_not_refresh=true;j.redirect("#/pages/"+q)})})})});
Pages=Sammy(function(h){var g=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);h.helpers({render_part:function(j,l,q){var s=this;s.render("/templates/admin/"+q+"/edit.mustache",{part:j.asJSON(),page:l.asJSON(),assets:Asset.asJSON()}).appendTo(jQuery("body")).then(function(){var x=jQuery(".modal-editor"),G=$("iframe").contents(),B=G.find("#editor-"+j.id());x.fadeIn("fast").css({top:B.offset().top-G.find("body").scrollTop()+
"px",left:B.offset().left+400+"px"});jQuery("#ajax_uploader").attr("multiple","multiple");s.set_asset_links(j,l);g.modal=true})},set_asset_links:function(j,l){jQuery("#search-results-container li.asset").each(function(q,s){var x=jQuery(s).find("a"),G=jQuery(s).attr("id").split("-")[1];x.click(function(B){B.preventDefault();B=l.attr("parts");for(var z=0,N=B.length;z<N;++z){var P=B[z];if(j.id()==P.id){P.asset_id=G;j.attr("asset_id",G);j.save()}}l.save(function(){jQuery(".modal-editor").remove();g.modal=
false;document.location.hash="#/pages/"+l.id()})})})}});this.get("#/pages/:page_id/parts/:id/edit",function(j){var l=this;jQuery(".modal-editor").remove();this.loadPages(function(){var q=Page.find(j.params.page_id),s=q.parts().find(j.params.id);$("iframe").length?l.render_part(s,q,"parts"):j.renderPagePreview(q,function(){l.render_part(s,q,"parts")})})});this.get("#/pages/:page_id/image_parts/:id/edit",function(j){var l=this;jQuery(".modal-editor").remove();this.loadPages(function(){var q=Page.find(j.params.page_id),
s=q.parts().find(j.params.id),x=$("iframe");Asset.searchAdmin({limit:"12"},function(){x.length?l.render_part(s,q,"image_parts"):j.renderPagePreview(q,function(){l.render_part(s,q,"image_parts")})})})});this.get("/pages/:page_id/parts/:id/results",function(j){var l=this;this.loadPages(function(){var q=Page.find(j.params.page_id),s=Part.find(j.params.id),x=j.params.query?j.params.query:null;Asset.searchAdmin(x?{query:x}:{},function(){j.render("/templates/admin/pages/search_results.mustache",Asset.toMustache()).replace("#search-results-container").then(function(){l.set_asset_links(s,
q)})})})});this.put("#/pages/:page_id/parts/:id",function(j){var l=j.params.id,q=j.params.page_id,s=Page.find(q),x=s.parts().find(l);logger.info(j.params.part);for(var G=s.attr("parts"),B=0,z=G.length;B<z;++B){x=G[B];if(l==x.id){var N=j.params.part.content;x.content=N;x=Part.find(x.id);x.attr("content",N);x.save()}}s.save(function(P){if(P){g.modal=false;j.redirect("#/pages/"+q)}})});this.post("#/pages/:page_id/image_parts/:id/assets",function(j){var l=document.getElementById("ajax_uploader").files,
q=j.params.query?j.params.query:null;jQuery("form#new_asset");q=q?{query:q}:{};q.limit=j.params.limit||48;q.page=j.params.page||1;this.send_files(l,q,function(){j.render("/templates/admin/pages/search_results.mustache",Asset.toMustache()).replace("#search-results-container").then(function(){jQuery("#ajax_uploader").attr("files",null);application.set_asset_links(part,page)})})})});
Sites=Sammy(function(){var h=this;this.debug=false;this.disable_push_state=true;this.use(Sammy.JSON);this.use(Sammy.Mustache);this.use(Sammy.NestedParams);this.helpers({loadUsers:function(g){if(User.all().length==0)User.load(function(){g&&g.call(this)});else g&&g.call(this)},renderUserIndex:function(g){this.render("/templates/admin/users/index.mustache",User.toMustache()).replace("#editor").then(function(){g&&g.call(this)})}});this.bind("run",function(){h.modal=false;h.refresh_pages=true});this.get("#/users",
function(g){Galerie.close();jQuery("#editor").html('<h1 class="section">Users</div>');g.loadUsers(function(){g.renderUserIndex()})});this.get("#/users/new",function(g){g.loadUsers(function(){jQuery("#modal").length||Galerie.open();g.render("/templates/admin/users/new.mustache").replace("#modal");g.renderUserIndex()})});this.post("#/users",function(g){(new User(g.params.user)).save(function(j,l){var q=JSON.parse(l.responseText);q.errors?alert(JSON.stringify(q)):g.redirect("#/users")})});this.get("#/users/:id/edit",
function(g){g.loadUsers(function(){user=User.find(g.params.id);if(jQuery("#users").length){jQuery(".user-form").html("");g.render("/templates/admin/users/edit.mustache",{user:user.asJSON()}).replace("#user-form-"+user.id())}else g.renderUserIndex(function(){jQuery(".user-form").html("");g.render("/templates/admin/users/edit.mustache",{user:user.asJSON()}).replace("#user-form-"+user.id())})})});this.put("#/users/:id",function(g){var j=User.find(g.params.id);j.attr(g.params.user);j.save(function(l,
q){var s=JSON.parse(q.responseText);s.errors?alert(JSON.stringify(s)):g.redirect("#/users")})})});jQuery(document).ready(function(){jQuery("body").ajaxStart(function(){logger.info("starting")});jQuery("body").ajaxSuccess(function(){logger.info("success!")});jQuery("#login").length||Pages.run("#/pages");Utilities.keyboard_nav();Utilities.check_browser_version()});
